<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html><head>
    <meta content="text/html; charset=windows-1252" http-equiv="Content-Type">
    <meta name="description" content="ASTAP, ASTrometric Stacking
      Program, astrometric solver, stacking of images, photometry and
      FITS viewer.">
    <meta name="keywords" content="ASTAP, Astrometric Stacking Program,
      FITS viewer, PlateSolve2 replacement, astrometry.net, plate
      solver, astrometric solver, photometry">
    <meta name="author" content="Han K">
    <title>ASTAP, Astrometric Stacking Program</title></head>
<body style="background-attachment: fixed; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); background-image: url(astap_background.gif);" fixed="" alink="#000099" link="#000099" vlink="#990099">
    <center>
      <div style="text-align: left;"> &nbsp;<big style="font-family: Arial;"><big><big>ASTAP,
the Astrometric STAcking Program &nbsp; &nbsp;</big></big><a href="https://sourceforge.net/p/astap-program/discussion/">ASTAP
                    Forum</a> &nbsp; &nbsp; &nbsp; &nbsp;<a href="astap.htm#index">Documentation</a> &nbsp; &nbsp;&nbsp;<a href="history_astap.htm">Version history</a> &nbsp; <a href="http://www.hnsky.org/astap.htm#conditions">Checklist for solving</a>&nbsp;</big> <big><big><b><small><small>&nbsp;<a href="https://www.youtube.com/channel/UC31VsnorldNC7pJMUL0uniw"><img title="Some demonstration videos" style="border: 0px solid ; width: 93px; height: 42px;" alt="" src="Youtube.gif"></a></small></small></b></big></big><br>&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<big>
          astrometric (plate) solver, stacking of images, photometry and
          FITS viewer</big><br></div><div style="text-align: left;"><big><br>NEWS: &nbsp;<br></big><ul><li><big>2023.03.11,&nbsp;
New star databases D80, D50, D20, D05. The star databases H18, H17,
V17&nbsp; will be phased out. Download and install the D50 database or
if you want to save disk space the D20 or D05 depending on your setup
field-of-view. You will need only one database. Alternatively you can
continue using the older H18 or H17 database.&nbsp;</big></li><li><big>2023.09.18,&nbsp; Faster stacking<br></big></li><li><big>2023.09.26, &nbsp;Improved Sigma Clip stack method. Will work better with variable background values.</big></li><li><big>2024.04.12
&nbsp;Doubled the HyperLeda database in size. Note by purpose
all&nbsp;objects with size zero have no abbreviation to prevent
overlapping annotations. Use the popup menu online link to HyperLeda
for identification</big><big><big>.<br></big></big></li></ul><big><big style="font-weight: bold;"><span style="color: red;"><br></span><big style="font-weight: bold;"><span style="color: red;"></span><span style="color: red;"></span></big></big><big>
            Download installers: </big></big><big><big style="font-weight: bold;"><big style="font-weight: bold;"><big style="font-weight: bold;"><big><br></big></big></big></big></big><table style="text-align: left; width: 1288px; height: 720px;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td style="font-weight: bold; background-color: rgb(220, 220, 220);"><big>Operating system</big></td><td style="font-weight: bold; background-color: rgb(220, 220, 220);"><big>Program installer</big></td><td style="font-weight: bold; background-color: rgb(220, 220, 220); width: 134px;"><big>Very large STAR database installer<br></big></td><td style="font-weight: bold; background-color: rgb(220, 220, 220); width: 134px;"><big>Large STAR database installer</big></td><td style="font-weight: bold; background-color: rgb(220, 220, 220); width: 134px;"><big>Smaller STAR database installer</big></td><td style="background-color: rgb(220, 220, 220); font-weight: bold; width: 134px;"><big>Photometry &amp; colour STAR database installer</big></td><td style="font-weight: bold; background-color: rgb(220, 220, 220); width: 134px;"><big><span style="font-weight: bold;">Wide field STAR database installer</span></big></td><td style="background-color: rgb(220, 220, 220); font-weight: bold; width: 129px;"><big>Large GALAXY database installer</big></td><td style="background-color: rgb(220, 220, 220); width: 141px;"><big><span style="font-weight: bold;">VARIABLE star database installer</span></big></td></tr><tr><td style="background-color: rgb(233, 233, 233);"><big>Window 64 bit</big></td><td style="background-color: rgb(233, 233, 233);"><big><a href="https://sourceforge.net/projects/astap-program/files/windows_installer/astap_setup.exe/download">Program</a> (v2024.06.09) or <a href="#beta_version">development version</a></big></td><td colspan="1" rowspan="3" style="background-color: rgb(233, 233, 233); width: 134px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d80_star_database.exe/download">D80</a></big></td><td colspan="1" rowspan="3" style="background-color: rgb(233, 233, 233); width: 134px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d50_star_database.exe/download">D50</a></big></td><td style="background-color: rgb(233, 233, 233); width: 134px;" colspan="1" rowspan="3"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d20_star_database.exe/download">D20</a>&nbsp;or<br><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d05_star_database.exe/download">D05</a></big></td><td colspan="1" rowspan="3" style="background-color: rgb(233, 233, 233); width: 134px;"><big> <a href="https://sourceforge.net/projects/astap-program/files/star_databases/v05_star_database.exe/download">V05</a> or <br><a href="https://sourceforge.net/projects/astap-program/files/star_databases/v50_star_database.exe/download">V50</a></big></td><td colspan="1" rowspan="3" style="background-color: rgb(233, 233, 233); width: 134px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/g05_star_database.exe/download">G05</a> or<br><a href="https://sourceforge.net/projects/astap-program/files/star_databases/w08_star_database_mag08_astap.exe/download">W08</a></big></td><td style="background-color: rgb(233, 233, 233); width: 129px;" colspan="1" rowspan="3"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/hyperleda.exe/download">Hyperleda.exe </a><br>(5 million galaxies)</big></td><td style="background-color: rgb(233, 233, 233); width: 141px;" colspan="1" rowspan="3"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/variable_star_database.exe/download"><span style="text-decoration: underline;">Variable stars</span></a></big></td></tr><tr><td style="background-color: rgb(233, 233, 233);"><big>Window 32 bit</big></td><td style="background-color: rgb(233, 233, 233);"><big><a href="https://sourceforge.net/projects/astap-program/files/windows_installer/astapwin32.zip/download">Program zipped</a>&nbsp;</big></td></tr><tr><td style="background-color: rgb(233, 233, 233);"><big>Windows 11, 64 bit arm processor</big></td><td style="background-color: rgb(233, 233, 233);"><big>See&nbsp;<a href="astap.htm#beta_version">development version</a> for command line version</big></td></tr><tr><td style="background-color: rgb(233, 233, 233);"><big>Linux 64 bit</big></td><td style="background-color: rgb(233, 233, 233);"><big><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_amd64.deb/download">Program debian</a> (v2024.06.09),<br><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_amd64.tar.gz/download">Program .tar.gz</a><br><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_amd64.tar.gz/download">Program qt5.tar.gz</a> &nbsp;compiled for QT5 widget<br><a href="astap_rpm.htm">openSUSE and Fedora support</a><br><a href="astap.htm#beta_version">development version</a><br>Also available at "Debian unstable"<br><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_amd64_older_linux.deb/download">Program debian for older Linux versions</a> (v2024.06.09) </big></td><td style="background-color: rgb(233, 233, 233); width: 134px;" colspan="1" rowspan="4"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d80_star_database.deb/download">D80</a></big></td><td style="background-color: rgb(233, 233, 233); width: 134px;" colspan="1" rowspan="4"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d50_star_database.deb/download">D50</a><br><br></big><small><span style="color: red;">(Linux, D50 file read permission near celestial north pole was fixed on 2023-11-27)</span></small></td><td style="background-color: rgb(233, 233, 233); width: 134px;" colspan="1" rowspan="4"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d20_star_database.deb/download">D20</a> or<br><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d05_star_database.deb/download">D05</a></big></td><td colspan="1" rowspan="4" style="background-color: rgb(233, 233, 233); width: 134px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/v05_star_database.deb/download">V05 </a>or <br><a href="https://sourceforge.net/projects/astap-program/files/star_databases/v50_star_database.deb/download">V50</a></big></td><td colspan="1" rowspan="4" style="background-color: rgb(233, 233, 233); width: 134px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/g05_star_database.deb/download">G05</a> or<br><a href="https://sourceforge.net/projects/astap-program/files/star_databases/w08_star_database_mag08_astap.deb/download">W08</a></big></td><td style="background-color: rgb(233, 233, 233); width: 129px;" colspan="1" rowspan="4"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/hyperleda.deb/download">hyperleda.deb</a><br>or<br><a href="https://sourceforge.net/projects/astap-program/files/star_databases/hyperleda.zip/download">hyperleda.zip</a><br>(5 million galaxies)<br><br></big></td><td style="background-color: rgb(233, 233, 233); width: 141px;" colspan="1" rowspan="4"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/variable_star_database.deb/download"><span style="text-decoration: underline;">Variable stars</span></a></big></td></tr><tr><td style="background-color: rgb(233, 233, 233);"><big>Linux 32 bit</big></td><td style="background-color: rgb(233, 233, 233);"><big><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_i386.deb/download">Program debian</a> (v2024.06.09)</big></td></tr><tr><td style="background-color: rgb(233, 233, 233);"><big>Raspberry PI, 32 bit</big></td><td style="background-color: rgb(233, 233, 233);"><big><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_armhf.deb/download">Program</a> (v2024.06.09)</big></td></tr><tr><td style="background-color: rgb(233, 233, 233);"><big>Raspberry PI, 64 bit</big></td><td style="background-color: rgb(233, 233, 233);"><big><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_aarch64.deb/download">Program debian</a> (v2024.06.09)<br><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_aarch64.tar.gz/download">Program .tar.gz</a><br><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_aarch64_qt5.tar.gz/download">Program qt5 .tar.gz</a> &nbsp; compiled for QT5 widget</big></td></tr><tr><td style="background-color: rgb(233, 233, 233);"><big>MacOS&nbsp;64 bit</big></td><td style="background-color: rgb(233, 233, 233);"><big><a href="https://sourceforge.net/projects/astap-program/files/macOS%20installer/astap.pkg/download">Program</a> (v2024.06.09)<br><br><a href="https://sourceforge.net/projects/astap-program/files/macOS%20installer/astap_M1.pkg/download">Program compiled for M1, M2 processor</a>&nbsp;(code signing required! See instructions at this&nbsp;<a href="https://sourceforge.net/projects/astap-program/files/macOS%20installer/">link</a>&nbsp;(bottom)!! Significant faster.</big></td><td style="background-color: rgb(233, 233, 233); width: 134px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d80_star_database.pkg/download">D80</a></big></td><td style="background-color: rgb(233, 233, 233); width: 134px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d50_star_database.pkg/download">D50</a><br><br></big>To
remove&nbsp;old database files, press in finder Command+Shift+G and go
to&nbsp; /usr/local/opt/astap&nbsp; and select the old files and move
them to Bin.</td><td style="background-color: rgb(233, 233, 233); width: 134px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d20_star_database.pkg/download">D20</a> or<br><a href="https://sourceforge.net/projects/astap-program/files/star_databases/d05_star_database.pkg/download">D05</a><br></big><br><small><span style="color: red;">(D20 was fixed on 2023-6-21. </span></small><small style="color: red;">Some files where missing in the Mac D20 database. Please update</small><small style="color: red;">)</small></td><td style="background-color: rgb(233, 233, 233); width: 134px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/v05_star_database.pkg/download">V05 </a>or<br><a href="https://sourceforge.net/projects/astap-program/files/star_databases/v50_star_database.pkg/download">V50</a></big></td><td style="background-color: rgb(233, 233, 233); width: 134px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/g05_star_database.pkg/download">G05</a> or<br><a href="https://sourceforge.net/projects/astap-program/files/star_databases/w08_star_database_mag08_astap.pkg/download">W08</a></big></td><td style="background-color: rgb(233, 233, 233); width: 129px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/hyperleda.pkg/download">hyperleda.pkg</a><br>(5 million galaxies update. The 2.1 million object version is included with the star database</big></td><td style="background-color: rgb(233, 233, 233); width: 141px;"><big><a href="https://sourceforge.net/projects/astap-program/files/star_databases/variable_star_database.pkg/download"><span style="text-decoration: underline;">Variable stars</span></a></big></td></tr></tbody></table><big><br>You have to install: <br></big><div style="margin-left: 40px;"><big>1) Program<br>2)
One of the star databases.&nbsp;<br></big></div><big><br>You
will need only one database. Is your field of view 0.6 degree or larger
you can download either the D05 or D20 or D50 or D80. The D05 is the smallest.
The D80 is the largest. Using the D80 has no drawback accept it is
larger, about 1.25 gbyte.&nbsp; The H17,&nbsp; H18, V17 G17, G18&nbsp;can
be uninstalled/deleted.&nbsp;<br><br><a name="database_usability"></a>Star databases usability:<br><big><big><img style="width: 1406px; height: 241px;" alt="" src="astap_database_range3.png"><br></big><br></big>Instead
of a
magnitude limit the new databases have a density limit.&nbsp; These
databases have been sorted on star density up 500, 2000, 5000 or 8000
stars per square degree. This should guarantee that in
star-poor-areas&nbsp;there will be&nbsp;sufficient faint stars in the
database for navigation
(solving). In star-rich areas only a limited amount of bright stars is
included keeping the star database size
moderate.
If required these databases will go&nbsp;as deep as magnitude 21.<br><br>This will be beneficial for setups with a small field-of view. There 
should be always enough database stars available&nbsp;for navigation.&nbsp;<br><br>The
V50 photometry database has&nbsp;like the D50 a 5000 stars per square
degree density except the magnitude is the calculated Johnson-V and
it&nbsp;also contains the Gaia Bp-Rp magnitude difference. The&nbsp;V05
photometry database is like the G05 except&nbsp;the magnitude is the
calculated Johnson-V and it&nbsp;also contains the Gaia Bp-Rp magnitude
difference.<br><br><br>For <span style="font-weight: bold;">comment feedback</span> and <span style="font-weight: bold;">questions</span> there is the <a href="https://sourceforge.net/p/astap-program/discussion/">ASTAP
                    Forum.</a> The <a href="#index">ASTAP Manual</a> is below<br><br>For<span style="font-weight: bold;"> photometry</span> you
            could download and install the V50&nbsp;star database.&nbsp;It contains the calculated
Johnson-V magnitude and colour information (GBp-GRp) for star
annotations.&nbsp;This one also works best for solving an image with a
FOV of more then ten degrees<br><br><span style="font-weight: bold;">Hyperleda</span>,
            a very large galaxy database for deep sky annotation.
            2.190.000
            objects.
            Based on extract from leda.univ-lyon1.fr/ &nbsp;Will be
            placed in
            the program
            directory.<br><big><big><br><br></big><big style="font-weight: bold;"><big><a name="beta_version"></a>
            Alternative links &amp; development version:</big><big style="font-weight: bold;"><big><br></big></big></big></big></big><table style="text-align: left; background-color: rgb(233, 233, 233); width: 1426px; height: 884px;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td style="background-color: rgb(220, 220, 220); font-weight: bold;"><big>Operating system</big></td><td style="background-color: rgb(220, 220, 220); font-weight: bold;"><big>Program development version</big></td><td style="background-color: rgb(220, 220, 220); font-weight: bold;"><big>Alternative star database links <br></big></td><td style="background-color: rgb(220, 220, 220); font-weight: bold;"><big>Fits image compression &amp; decompression programs from
            Nasa HEASARC.
            &nbsp;Only required if you have files with the .fz
            &nbsp;extension.</big></td><td style="background-color: rgb(220, 220, 220); font-weight: bold;"><big>Barebone&nbsp;command-line solver&nbsp;compatible with the GUI version if
renamed. No pop-up notifier. Will not accept raw files and&nbsp;will not
work with SharpCap since FOV is not stored.</big></td></tr><tr><td style="background-color: rgb(234, 234, 234);"><big>Window 64 bit</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="astap_setup.exe">ASTAP_installer</a>_(v2024.06.09), <br><a href="astap.zip">ASTAP
              executable only</a></big></td><td colspan="1" rowspan="3" style="background-color: rgb(234, 234, 234);"><big><a href="https://drive.google.com/file/d/1i12A7Rciln26k0y7vg10rQREQnzLUjzQ/view?usp=sharing">D05 installer,</a><br><a href="https://drive.google.com/file/d/18ObI5OLA-RyepIIEIZLZTRZJ3dcQkDhR/view?usp=sharing">D20 installer</a>,<br><a href="https://drive.google.com/file/d/1w2UnCtwnWa35cj67yhLFh0nbZKwdiIGt/view?usp=sharing">D50 installer</a>,<br><a href="https://drive.google.com/file/d/1HJZQU7BXHc-OvS0BNi_b3Cu8ARy2px2K/view?usp=sharing">D80 zipped</a>,<br><a href="https://drive.google.com/file/d/1k96xBXowPjZCRZgwKyskml-EJ_edhgZ5/view?usp=sharing">G05 zipped,</a><br><a href="https://drive.google.com/file/d/133Fy2o948bNFcTeDJ5-7kt1ORXCOiSKq/view?usp=sharing">W08 zipped</a>,<br><a href="https://drive.google.com/file/d/1mEZoP5ffvCVBUxB8XNSAT_fSfe2q-aOg/view?usp=sharing">H18 installer</a> (Obsolete)<br><a href="https://drive.google.com/file/d/1mEZoP5ffvCVBUxB8XNSAT_fSfe2q-aOg/view?usp=sharing"> </a><a href="https://drive.google.com/file/d/1qaf23oFmPpnDZbLO30IB42kC8-qBEynJ/view?usp=sharing">H18 zipped</a>,  (Obsolete)<a href="https://drive.google.com/file/d/133Fy2o948bNFcTeDJ5-7kt1ORXCOiSKq/view?usp=sharing"> </a></big></td><td colspan="1" rowspan="3" style="background-color: rgb(234, 234, 234);"><big><a href="https://sourceforge.net/projects/astap-program/files/windows_installer/fpack_funpack.exe/download">Fpack
              &amp; Funpack</a>&nbsp;</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="https://sourceforge.net/projects/astap-program/files/windows_installer/astap_command-line_version_win64.zip/download">astap_cli</a>
(v2024.05.17</big></td></tr><tr><td style="background-color: rgb(234, 234, 234);"><big>Window 32 bit</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="astapwin32.zip">ASTAP_installer</a>_(v2024.06.09)</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="https://sourceforge.net/projects/astap-program/files/windows_installer/astap_command-line_version_win32.zip/download">astap_cli</a>
(v2024.05.17)</big></td></tr><tr><td><big>Window11 arm64</big></td><td><big></big></td><td><big><a href="https://sourceforge.net/projects/astap-program/files/windows_installer/astap_command-line_version_win11_aarch64.zip/download">astap_cli</a> (v2024.05.01) &nbsp; On Windows arm 375% faster. Can be renamed from astap_cli.exe to astap.exe</big></td></tr><tr><td style="background-color: rgb(234, 234, 234);"><big>Linux 64 bit</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="astap_amd64.deb">ASTAP_debian_package</a>_(v2024.06.07),&nbsp; <br><a href="astap_amd64.tar.gz">ASTAP tar.gz</a></big></td><td colspan="1" rowspan="4" style="background-color: rgb(234, 234, 234);"><big> <a href="https://drive.google.com/file/d/1Dzl8892j6KuIxjwJIKWGyktjsnx6Aa9M/view?usp=sharing">D05 zipped,</a><br><a href="https://drive.google.com/file/d/1aCAKK0tB6eCNrzqPvwfCq-vg70ik0Ug4/view?usp=sharing">D20 zipped,</a><br><a href="https://drive.google.com/file/d/1U2adlQF0x0FSuzlxZtvpmj7yQY9YC7h2/view?usp=sharing">D50 zipped,</a><br><a href="https://drive.google.com/file/d/1GsZgyExjRgmeD50VO0iT2vgH-Z3pbOcs/view?usp=sharing">D05 installer,</a><br><a href="https://drive.google.com/file/d/1ccpdFzHqTz4OsHYhRI3o0ny1A10vVr9M/view?usp=sharing">D20 installer</a>,<br><a href="https://drive.google.com/file/d/1iRn_-D-AMFwAsK5-tG3rO3BNhtL_w5TR/view?usp=sharing">D50 installer,</a><br><a href="https://drive.google.com/file/d/1HJZQU7BXHc-OvS0BNi_b3Cu8ARy2px2K/view?usp=sharing">D80 zipped</a>,<br><a href="https://drive.google.com/file/d/1k96xBXowPjZCRZgwKyskml-EJ_edhgZ5/view?usp=sharing">G05 zipped,</a><br><a href="https://drive.google.com/file/d/133Fy2o948bNFcTeDJ5-7kt1ORXCOiSKq/view?usp=sharing">W08 zipped</a>,<br><a href="https://drive.google.com/file/d/13igQ99_JXrCHp3x2ynOmYz78h8UroNto/view?usp=sharing">H18 debian</a>(Obsolete)<br> <a href="https://drive.google.com/file/d/1qaf23oFmPpnDZbLO30IB42kC8-qBEynJ/view?usp=sharing">H18 zipped</a> (Obsolete) for manual install at /opt/astap<br><a href="https://sourceforge.net/projects/hnsky/files/star_databases/v17_star_database_mag17_colour.zip/download">V17 zipped</a> (obsolete),</big></td><td colspan="1" rowspan="4" style="background-color: rgb(234, 234, 234);"><big>install from distribution</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_command-line_version_Linux_amd64.zip/download">astap_cli&nbsp;</a>
(v2024.05.01)</big></td></tr><tr><td style="background-color: rgb(234, 234, 234);"><big>Linux 32 bit</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="astap_i386.deb">ASTAP_debian_package</a>_(v2024.06.09)</big></td><td style="background-color: rgb(234, 234, 234);"><big></big></td></tr><tr><td style="background-color: rgb(234, 234, 234);"><big>Raspberry PI, 32 bit</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="astap_armhf.deb">ASTAP_debian_package</a>_(v2024.06.09)</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_command-line_version_Linux_armhf.zip/download">astap_cli&nbsp;</a>
(v2024.05.01)</big></td></tr><tr><td style="background-color: rgb(234, 234, 234);"><big>Raspberry PI, 64 bit</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="astap_aarch64.deb">ASTAP_debian_package</a>_(v2024.06.09)</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="https://sourceforge.net/projects/astap-program/files/linux_installer/astap_command-line_version_Linux_aarch64.zip/download">astap_cli&nbsp;</a>
(v2024.05.01)</big></td></tr><tr><td style="background-color: rgb(234, 234, 234);"><big>MacOS&nbsp;64 bit</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="astap_mac_X86_64.zip">astap_mac_X86_64.zip</a> (v2024.06.09)<br>Executable only. Move the executable in the application at /Contents/MacOS<br></big></td><td colspan="1" rowspan="2" style="background-color: rgb(234, 234, 234);"><big> <br><a href="https://drive.google.com/file/d/1oyqqLukzKoGSnZpTeqdHDuKMHmkNcpnA/view?usp=sharing">D05 installer</a><br><a href="https://drive.google.com/file/d/1yF1kqXbN-4362iMMQgDZHXxpy3S4_xAY/view?usp=sharing">D20 installer</a><br><a href="https://drive.google.com/file/d/1IDSM-p3Bfz6AK4-OxnH3GSYCpTyVzOTd/view?usp=sharing">D50 installer</a><br><a href="https://drive.google.com/file/d/1HJZQU7BXHc-OvS0BNi_b3Cu8ARy2px2K/view?usp=sharing">D80 zipped</a>,<br><a href="https://drive.google.com/file/d/1k96xBXowPjZCRZgwKyskml-EJ_edhgZ5/view?usp=sharing">G05 zipped,</a><br><a href="https://drive.google.com/file/d/133Fy2o948bNFcTeDJ5-7kt1ORXCOiSKq/view?usp=sharing">W08 zipped</a>,<br><a href="https://drive.google.com/file/d/1AcOkTshUioNi9sgTUhfA1CxveZSBWAa-/view?usp=sharing">H18 installer </a>(obsolete),<br><a href="https://drive.google.com/file/d/12TNnTnNjvar96-1sbwYaL7xzbTggk9Rl/view?usp=sharing">V17 installer</a> (obsolete)&nbsp; <br><br></big></td><td style="background-color: rgb(234, 234, 234);"><big></big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="https://sourceforge.net/projects/astap-program/files/macOS%20installer/astap_command-line_version_macOS_x86_64.zip/download">astap_cli</a>
(v2024.05.01)</big></td></tr><tr><td style="background-color: rgb(234, 234, 234);"><big>MacOS M1</big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="astap_mac_M1.zip">astap_mac_M1.zip</a> (v2024.06.09) <br>Executable only. Move the executable in the application at /Contents/MacOS</big></td><td style="background-color: rgb(234, 234, 234);"><big></big></td><td style="background-color: rgb(234, 234, 234);"><big><a href="https://sourceforge.net/projects/astap-program/files/macOS%20installer/astap_command-line_version_macOS_M1.zip/download">astap_cli</a>
(v2024.05.01) code signing required!</big></td></tr><tr><td><big>Android arm 64 bit</big></td><td><big></big></td><td colspan="1" rowspan="4"><big>Use a&nbsp;star database&nbsp;from above.</big></td><td><big></big></td><td><big><a href="https://sourceforge.net/projects/astap-program/files/android/astap_command-line_version_Android_aarch64.zip/download">astap_cli</a>
(v2024.05.01) zipped.<br>Included in this third party app&nbsp;<a href="https://www.cloudynights.com/topic/872895-openlivestacker-4th-beta-android-stability-fixes/">OpenLiveStacker</a> </big></td></tr><tr><td><big>Android arm 32 bit</big></td><td><big></big></td><td><big></big></td><td><big><a href="https://sourceforge.net/projects/astap-program/files/android/astap_command-line_version_Android_armhf.zip/download">astap_cli</a>
(v2024.05.01) zipped.<br>Included in this third party app&nbsp;<a href="https://www.cloudynights.com/topic/872895-openlivestacker-4th-beta-android-stability-fixes/">OpenLiveStacker</a></big></td></tr><tr><td><big>Android X86_64</big></td><td><big></big></td><td><big></big></td><td><big><a href="https://sourceforge.net/projects/astap-program/files/android/astap_command-line_version_Android_x86_64.zip/download">astap_cli</a>
(v2024.05.01) zipped. No GUI application available.</big></td></tr><tr><td><big>Android X86</big></td><td><big></big></td><td><big></big></td><td><big><a href="https://sourceforge.net/projects/astap-program/files/android/astap_command-line_version_Android_x86.zip/download">astap_cli</a>
(v2024.05.01) zipped. No GUI application available.</big></td></tr><tr><td><big>iOS</big></td><td><big></big></td><td><big>Use a&nbsp;star database&nbsp;from above</big></td><td><big></big></td><td><big><a href="https://sourceforge.net/projects/astap-program/files/ios/astap_command-line_version_iOS.zip/download">astap_cli</a>
(v2024.01.25) zipped. Untested. No GUI application available.</big></td></tr></tbody></table><big><br><br></big>
          </div>
      <div style="text-align: left;">
        <ul><big>
          </big><li><big>Questions, feedback: <a href="https://sourceforge.net/p/astap-program/discussion/">ASTAP
                    Forum</a></big></li><big>
          </big><li><big>Older versions are available
                at&nbsp;<a href="https://sourceforge.net/projects/astap-program/files/">Sourceforge</a></big></li><big>
          
          </big><li><big><a href="history_astap.htm">Version history</a><br>
                        </big></li><big>
          </big><li><big><a href="astap_source.zip">Source
                        code (Object
                        Pascal,&nbsp;Lazarus/FPC)</a></big></li><big>
          </big><li><big>&nbsp;<a href="https://www.youtube.com/channel/UC31VsnorldNC7pJMUL0uniw"><img title="Some demonstration videos" style="border: 0px solid ; width: 93px; height: 42px;" alt="" src="Youtube.gif"></a></big></li><big>
        </big></ul><big>
        &nbsp;
        </big><ul><big>
        </big></ul>
        <big>Donations are welcome:<br><br></big>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top"><big> <input name="cmd" value="_donations" type="hidden"> <input name="business" value="LHY7VVFDCKFMG" type="hidden">
<input name="item_name" value="Financial support for the free ASTAP or HNSKY program." type="hidden"> <input name="currency_code" value="EUR" type="hidden"> <input src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" border="0" type="image">
<img alt="" src="https://www.paypal.com/en_NL/i/scr/pixel.gif" border="0" height="1" width="1"> </big></form><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top"><big><br><a name="index"></a> <big style="font-weight: bold;">&nbsp; Documentation, contents:</big>
</big></form><big>
        </big><ul><big>
          </big><li><big><a href="#introduction">Introduction</a></big></li>
          <li><big><a href="#installation">Program
                installation</a></big></li>
          <li><big><a href="#operation">Program
                operation, stacking astronomical images</a></big></li>
          <li><big><a href="#stack_menu"><big>Stack
                  menu</big>&nbsp;</a></big></li>
          <ul><big>
            </big><li><big><a href="#lights_tab">Lights tab</a><a href="astap.htm#uncheck_outliers"></a><br></big></li><ul><li><big><a href="#classify">Classify by options</a></big></li><li><big><a href="astap.htm#uncheck_outliers">How to exclude poor images</a></big></li><li><big><a href="astap.htm#satellite_tracks">Satellite tracks</a></big></li></ul><li><big><a href="#darks_tab">Darks tab</a></big></li><li><big><a href="#flats_tab">Flats tab</a><br></big></li><li><big><a href="#flat_darks">Flat darks tab</a></big></li><li><big><a href="astap.htm#results">Results tab</a></big></li></ul>
          <ul><big></big><li><big><a href="#stack_menu2">Stack
                  method tab</a></big></li><big>
            </big><ul><big>
              </big><li><big><a href="astap.htm#gray">Stacking grayscale of colour stacking</a></big></li><li><big><a href="astap.htm#osc_menu">Stacking raw one shot colour images (OSC)</a></big></li><li><big><a href="#raw_conversion">RAW conversion of OSC images (one shot
            colour images)</a></big></li><li><big><a href="astap.htm#lrgb">Stacking LRGB</a></big></li><li><big><a href="astap.htm#mosaic">Image
                    stiching</a><br></big></li></ul><li><big><a href="astap.htm#alignment_menu">Alignment
                  menu tab</a></big></li><ul><li><big><a href="astap.htm#internal_alignment">Internal_alignment</a></big></li><li><big><a href="astap.htm#astrometric_alignment">Astrometric_alignment</a></big></li><li><big><a href="astap.htm#manual_alignment">Manual
                    alignment</a></big></li><li><big><a href="astap.htm#ephemeris_alignment">Ephemeris alignment</a></big></li><big>
            </big></ul><big>
            </big><li><big><a href="#blink">Blink tab</a></big><ul><li><big><a href="astap.htm#trackandstack">Track and Stack function</a></big></li></ul></li><big>
            </big><li><big><a href="#photometry">Photometry tab</a><br></big></li><ul><li><big><a href="astap.htm#photometry">Photometry</a></big></li><li><big><a href="astap.htm#transformation">Transformation</a></big></li><li><big><a href="astap.htm#measure_all">Measure all visible variables in one step</a></big></li><li><big><a href="astap.htm#asteroid_magnitude">Measuring asteroid magnitudes</a></big></li></ul><li><big><a href="#inspector_tab">Inspector tab</a></big></li><li><big><a href="astap.htm#mount_tab">Mount analyse tab</a></big></li><li><big><a href="#live_stacking">Live stacking</a></big></li><li><big><a href="#monitoring">Monitoring</a></big></li><big>
            </big><li><big><a href="#pixel_math">Pixel math
                  tab 1 and 2</a></big></li><big>
            </big><li><big><a href="astap.htm#background">Background
                  equalization tool</a></big></li><big>
            </big><li><big><a href="astap.htm#export_data">Popup
                  menu</a></big></li><big>
            </big><ul><big>
              </big><li><big><a href="#export_data">Export
                    FITS data to spreadsheet for analyses</a></big></li><big>
            </big></ul><big>
          </big></ul>
        </ul>
        <ul><big>
          </big><ul><big>
            </big><ul><big>
            </big></ul><big>
          </big></ul><big>
          </big><li style="font-weight: bold;"><big><big><a href="#viewer">Viewer:</a></big></big></li><big>
          </big><ul><big>
            </big><li><big><a href="astap.htm#viewer_angle">Reported angle</a></big></li><li><big><a href="astap.htm#viewer_filemenu">File menu</a></big></li><li><big><a href="astap.htm#viewer_preview">Opening,
                  preview&nbsp;files</a></big></li><big>
          </big></ul><big>
          </big><ul><big>
            </big><li><big><a href="astap.htm#thumbnail">FITS
                  thumbnail viewer</a></big></li><big>
            </big><li><big>Tools menu:<br>
              </big></li><big>
            </big><ul><big>
              </big><li><big><a href="#batch_processing">Batch
                    processing</a></big></li><li><big><a href="astap.htm#inspector">Image inspection</a></big></li><ul><li><big><a href="astap.htm#inspector">F5 menu</a></big></li><li><big><a href="astap.htm#curvature">Curvature and tilt indication</a><br></big></li><li><big><a href="astap.htm#hfd_2d_contour">HFD_2d_contour</a></big></li><li><big><a href="astap.htm#hfd_diagram">HFD_diagram</a></big></li><li><big><a href="astap.htm#median_background_values">Median_background_values</a></big></li><li><big><a href="astap.htm#hfd_values">HFD values</a></big></li><li><big><a href="astap.htm#unroundness">Unroundness of the imaged stars.</a><br></big></li><li><big><a href="astap.htm#show_distortion">Show distortion</a><br></big></li><li><big><a href="astap.htm#aberration_inspector">Aberration Inspector</a><br></big></li></ul><big>
              </big><li><big><a href="astap.htm#photometry_calibration">Photometry calibration</a></big></li><li><big><a href="astap.htm#sqm">SQM measurement</a></big></li><big>
              </big><li><big><a href="#star_annotation">Star
                    annotation and photometry</a></big></li><li><big><a href="#asteroid_annotation">Asteroid
                    annotation</a></big></li><big>
              </big><li><big><a href="astap.htm#deep_sky_annotation">Deep
                    sky annotation</a></big></li><big>
              
            </big></ul><big>
            </big><li><big><a href="#viewmenu">View menu</a></big></li><big>
            </big><li><big><a href="#viewer_popup">Pop-up menu</a></big></li><li><big><a href="#fits_tables">FITS tables&nbsp;</a></big></li><li><big><a href="#otherpopup">Other pop-up menus</a><br></big></li><big>
          </big></ul><big>
          <br>
          </big><li><big><a href="astap.htm#command_line"><big>Solver</big>,
                usage as
                astrometric solver and command
                line options</a></big></li><big>
          </big><ul><big>
            </big><li><big><a href="astap.htm#conditions">Conditions
                  required for solving</a></big></li><li><big><a href="astap.htm#solvable">Test if an image is solvable (full blind solving)</a></big></li><li><big><a href="astap.htm#astap_command_line">Command line usage ASTAP</a></big></li><big>
            </big></ul><ul><big>
            </big><li><big><a href="astap.htm#platesolve2">Usage&nbsp;as
                  a&nbsp;PlateSolve2
                  substitute</a></big></li><li><big><a href="astap.htm#performance_blind">Performance
                    blind solving</a></big></li><li><big><a href="astap.htm#popup_notifier">Pop-up
                    notifier</a></big></li><li><big><a href="astap.htm#solver_installation">Installation
of the
external astrometry.net&nbsp;solver&nbsp;</a></big></li></ul></ul><big><br></big>
        <ul>
          <li><big><a href="#stack_process">Appendix
                1 stack process</a></big></li><li><big><a href="#why-flat-darks">Appendix 2 Why using flat-darks or bias</a></big></li><li><big><a href="astap.htm#1476">Appendix 3 the star database 1476 and 001 format.</a></big></li><li><big><a href="astap.htm#sip">Developer information</a><a href="sip.htm">: Using&nbsp;SIP Coefficients&nbsp;for optical distortion correction</a></big></li>
          <li><big><a href="astap_astrometric_solving.htm">Background
                info, ASTAP star pattern recognition and astrometric (plate) solving algorithm.</a></big></li><big>
        </big></ul><big>
        <big><br>
          <br>
        </big></big></div>
      <big><font size="-2"><big><br>
      </big></font></big>
      <div style="text-align: left;"><big><big style="text-decoration: underline;"><big><span style="font-weight: bold;"><a name="introduction"></a><small>ASTAP
              introduction</small></span></big><br></big>
        <br>
        ASTAP is a free stacking
          and astrometric solver (plate solver) program for deep sky
          images. In
          works
          with&nbsp;astronomical images in the FITS format, but&nbsp;can
          import
          RAW DSLR images or XISF, PGM, PPM, TIF, PNG and JPG
          &nbsp;images.
          It has a powerful FITS viewer and the native astrometric
          solver&nbsp;can be
          used &nbsp;by CCDCiel, NINA, APT, Voyager or SGP imaging programs
          to&nbsp;synchronise&nbsp;the mount based on an image taken. <br>
        <br>
        Main features:
        </big><ol><big>
          </big><li><big>Native
              astrometric
              solver, <a href="astap.htm#platesolve2">command line</a>
              compatible with&nbsp;PlateSolve2.</big></li>
          <li><big>Stacking
              astronomical images including dark frame and flat field
              correction.&nbsp;</big></li>
          <ul><big>
            </big><li><big>Filtering of
                deep sky images based on HFD value and average value.</big></li><big>
            </big><li><big>Alignment
                using an internal star match routine,&nbsp; internal
                astrometric
                solver.</big></li><big>
            </big><li><big>Mosaic
                  building covering&nbsp;large areas using the
                  astrometric linear
                  solution WCS or WCS+SIP polynomial.&nbsp;</big></li><big>
            </big><li><big>Background
                    equalizing.</big></li><big>
          </big></ul>
          <li><big>FITS viewer
              with swipe functionality, deep sky and star annotation,
              photometry and
              CCD inspector.</big></li>
          <ul><big>
            </big><li><big>FITS
                thumbnail viewer.<br>
              </big></li><big>
            </big><li><big>Results can
                be saved to 16 bit or float (-32) FITS files.</big></li><big>
            </big><li><big><a href="#file_formats">Export</a> to&nbsp; JPEG, PNG, TIFF( <a href="https://astro-tiff.sourceforge.io/">ASTRO-TIFF</a>), PFM, PPM, PGM&nbsp; files.</big></li><big>
            </big><li><big>FITS header
                edit.</big></li><big>
            </big><li><big>FITS crop
                  function.</big></li><big>
            </big><li><big>Automatic photometry
                  calibration against Gaia database, Johnson -V or Gaia
                  Bm</big></li><big>
            </big><li><big>CCD inspector</big></li><big>
            </big><li><big>Deepsky and Hyperleda
                  annotation</big></li><li><big>Solar object annotation using MPC ephemerides</big></li><li><big>Read/writes<a href="#fits_tables"> FITS binary and reads ASCII tables</a>.<br></big></li><big>
          </big></ul>
          <li><big>Some pixel
              math functions and <a href="http://www.asahi-net.or.jp/%7Ert6k-okn/ddp/digital.htm">digital
development
                process</a></big></li><li><big>Can display images and&nbsp;tables from a multi-extension FITS.</big></li>
          <li><big><a href="#blink">Blink tab</a>.</big></li><li><big><a href="http://www.hnsky.org/astap.htm#trackandstack">Track and Stack function</a></big></li>
          
          <ul><big>
          </big></ul>
          <li><big><a href="#photometry">Photometry tab</a></big></li><li><big><a href="#inspector_tab">Inspector tab for measuring curvature</a>.</big></li><li><big><a href="#mount_tab">Mount analyse tab</a>.</big></li><li><big><a href="#live_stacking">Live stacking tab</a>.<br></big></li><li><big>Available
              for MS-Windows 32 &amp; 64 bit,&nbsp; Linux 32, 64 bit,
              MacOS 64 bit,
              Raspberry-Pi Linux 32 and 64 bit.</big></li>
          <ul><big>
          </big></ul>
        </ol>
        <big><br>
        <span style="text-decoration: underline; font-weight: bold;">Stacking of images:</span><br>
        <br>
          Stacking
          of astronomical images is done to achieve a greater signal to
          noise
          ratio, prevent sensor saturation&nbsp;and correct the images
          for
          dark
          current and flat field. Additional imperfect images&nbsp;due
          to
          guiding, focus&nbsp; problems or clouds can be removed.<br>
          <br>
          <a name="images"></a>This is a screen short
          of the stack
          menu. It contains several tabs for the file list and settings.
          File can
          be sorted on quality and values.The image can be visually
          inspected in
          the
          viewer by a double click on the file or using the pop-up menu.<br>
          <br>
        <img style="width: 1835px; height: 622px;" alt="" src="astap_stack_menu.png"><br>
        <br>
          Program requires FITS
          images or RAW files as input for stacking, but it&nbsp;can
          also
          view 16 bit PGM /PPM files, XISF files
          or &nbsp;in 8 bit&nbsp; PNG, TIFF or BMP
          files. For importing DSLR raw images &nbsp;the program<big><a href="https://www.cybercom.net/%7Edcoffin/dcraw/"> DCRAW</a>&nbsp;from David Coffin
          or </big><a href="https://www.libraw.org/">LibRaw</a> is used.<br>
        </big><ul><big>
          </big><li><big>Stacking
              methods: average and sigma-clipping-average.. Internal
              calculation
              using
              floating point numbers.</big></li><big>
          </big><li><big>Simple and
              intuitive user interface.</big></li><big>
          </big><li><big>Automatic
              saving of selected options and
              files.</big></li><big>
          </big><li><big>Can create
              master files for dark and flat &amp; flat-darks to reduce
              processing time.</big></li><big>
          </big><li><big>Limited&nbsp;memory
              use, independent of the number of images stacked.</big></li><big>
          </big><li><big>Bayer
              algorithm for DSLR/OSC cameras</big></li><big>
        </big></ul><big>
        For stacking the internal routine compares
          the image star positions to align. <br>
          <span style="font-weight: bold;"></span><br><br>Astrometric
            Solving:<br><br>
          ASTAP can be <a href="astap.htm#command_line">used
            as
            astrometric solver</a>
          to synchronise the telescope mount position&nbsp;with center
          position
          of an image taken with the&nbsp;telescope. Existing images can
          be
          solved to&nbsp;<a href="astap.htm#star_annotation">annotate,&nbsp;for
            photometry</a>
          or&nbsp;the measure positions of unknown objects.<br><br>
          The
          ASTAP solver aims at a robust star pattern recognition using
          the
          catalog star coordinates in Equinox J2000. The solution is not
          corrected for
          optical distortion, refraction, proper&nbsp; motion&nbsp;
          of&nbsp; stars and other
          minor effects all to be very minor. <br><br>
          The
          process astrometric solving is&nbsp;often referred to as a
          "plate
          solve". That was a correct&nbsp;description in the past, but
          in
          modern
          times there are no photographic plates involved in the
          process.<br></big>
          
        
          
          <big><br><br>
        <br>
        <a href="#index">Back to index</a><br>
        <br>
        <big style="text-decoration: underline;"><span style="font-weight: bold;"><a name="installation"></a>Program
            installation:
          </span><br></big>
        <br>
        <span style="font-weight: bold;">MS-Windows</span>:</big> <br>
          <br>
        <big>
        </big><div style="margin-left: 40px;"><big><big><small>The installer and separate star database will be default installed
            at c:\Program Files\astap. &nbsp;But they can be placed anywhere as long all files are in the same directory. <br><br>Note that for Windows ASTAP is seen as an unknown publisher. &nbsp;For Win10 you have to click trough the following screens.<br><br>Click on astap_setup.exe to install</small>.<br></big><br><img style="width: 534px; height: 500px;" alt="" src="astap_win10_1.png"><br><br><big><small>Click op "More info"</small><br><br><br></big><img style="width: 534px; height: 500px;" alt="" src="astap_win10_2.png"><br><br><big>Click op "Run anyway"
    <br></big></big><p><big><img style="width: 454px; height: 344px;" alt="" src="astap_win10_3.png"></big></p><big>Click op Yes.<br><br><br>Do the same for the database installer.<br><br><br></big>
          </div>
        <big><br><span style="font-weight: bold;">Linux
            installation:</span><br><br></big>
        
            
          
        <div style="margin-left: 40px;"><big>The program and database are&nbsp;provided as a
            Debian package
and will be installed in&nbsp; /opt/astap. The program is also as
an&nbsp;rpm
package&nbsp;available. &nbsp;In case the executable is manually placed
in
/usr/..., then the program will first look for the databases in
/opt/astap. If that path doesn't exist it will look for
the&nbsp;databases in&nbsp;/usr/share/astap/data/&nbsp;</big></div>
        <big><br><span style="font-weight: bold;">MacOS
            installation:</span><br><br></big>
        
            
          
        <div style="margin-left: 40px;"><big>The program and star databases are are provide as pkg
            file. The star database will be installed at&nbsp;/usr/local/opt/astap/ </big></div>
        <big><br>
        <br>
        <br>
        <big style="font-weight: bold;"><span style="text-decoration: underline;"><a name="operation"></a>Program
            operation, stacking astronomical images:</span><br></big>
        <br>
        The purpose of the
          stacking routine is to&nbsp;combine astronomical images to
          reduced
          noise and to flatten the image.<br>
          <br>
          &nbsp;Ideally you should have collected <br>
        <big><span style="text-decoration: underline;"></span><br>
        
        </big></big><ul><big>
          </big><li><big>1a) Several <span style="font-weight: bold;">light
                frames</span>. Images of deep sky object unprocessed.</big></li>
          <li><big>1b) Several <span style="font-weight: bold;">dark
                frames</span>
of the same temperature and exposure as the light frames. A dark frame
is a frame that represents an exposure done in total darkness. This
signal includes the bias signal, but also includes any dark current
charge accumulation, and thus any dark current noise that exists within
the dark current signal. For darks suburban area (SQM=20.4) you should
take about the same amount or more darks as lights. For a light
polluted area you could take less darks then lights since the noise in
the lights generated by the sky background will be abundant.</big></li>
          <li><big>2a) Several <span style="font-weight: bold;">flat
                frames</span>.
              A flat frame is a frame that represents the field flatness
              and taken
              from an uniform light source. Ideally with a significant
              signal level.
              This to compensate for vignetting and dust particles.
              Vignetting can
              greatly darken the corners of your image&nbsp;and have to be
              compensated. </big></li>
          <li><big>2b) <span style="font-weight: bold;">Flat
                dark frames</span> or<span style="font-weight: bold;"> bias
                frames</span>
              ideally of the same temperature and exposure duration as
              the flats.
              Since flats are taken with very short exposure times,
              either flat dark
              of bias image of almost zero&nbsp;seconds will do. See also <a href="#why-flat-darks">why&nbsp;flat-darks</a></big></li>
        </ul>
        <big>Only light frames are essential. <br><br>
          The automatic stacking process in ASTAP goes through the
          following
          steps:</big>
          <big><big><br>
        
        </big></big><ol><big>
          </big><li><big>The flats will
              be combined to an average and the combined average
              flat-darks will be
              subtracted to&nbsp; have a near ideal presentation of the
              vignetting
              called the master flat frame. </big></li>
          <li><big>The darks will
              be combined to an average&nbsp;master dark.</big></li><li><big>From each light frame the master dark will
              be subtracted to extract the pure deep
              sky signal. </big></li>
          <li><big>Each light frame will be
              flattened by
              dividing it by the master-flat resulting in the corrected light frames.</big></li><li><big>The
corrected light frames are combined to the final image using the
average or sigma clip mean (to remove outliers as satellite tracks)
method.&nbsp;</big></li></ol><big>Steps 3,4,5 are done in memory. No intermediate&nbsp;results are stored on disk.<br><br>It
is possible to mix different exposure times but it is not recommended
for the frames of one colour. The reason is that sigma clipping of
pixel value outliers could work less efficient for frames with
different exposure times. The frames will be combined with a weight
factor relative to the exposure time but the image noise will &nbsp;not
be fully linear with the exposure time. E.g. the read noise is fixed.
Once the individual colours are&nbsp;combined then the exposure times
are no longer relevant.<br><br>So you could expose all red frames for
60 seconds and all green frames with 120 seconds and combine them. But
combining red frames of 60 and 120 seconds is less desirable.<br><br><br>
          <span style="text-decoration: underline;">Operation of the
            stacking program</span> <br>
          <br>
          Start the ASTAP program.<br>
        <br>
        Call up the stack
          menu window using the&nbsp;<span style="background-color: rgb(153, 153, 153);">&nbsp;&#8721; &nbsp;</span> button.<br>
          <br>
          <span style="text-decoration: underline;">a)
            Select&nbsp;frames</span><br>
          In tab 
images select the lights. In tab dark select the corresponding darks.
&nbsp;Select in tab flats the flat-field images called flats and in tab
flats-darks the flat-darks/bias frames.
In most cases you could select all frames in tab images. The program
will move the fames to the corresponding tab during analyse. The light
and dark should preferable have the same exposure time and temperature.
The flats should have the same exposure time and temperature as the
flat-darks.<br>
          <span style="font-weight: bold;"><br>
          </span><span style="text-decoration: underline;">b)
            Analyse and remove bad frames</span><span style="font-weight: bold;"><br>
            I</span>n
          tab images (for the light frames), press analyse and remove
          manually
          any poor image. Poor images can be detected by a too
          high&nbsp;HFD
          (Half flux diamater stars), low number of stars or high
          background
          value( by clouds) . 
          Loss of tracking could result in too low HFD value. If
          required inspect
          each image by double on the file name. The
          list can be sorted by clicking on the corresponding columns.
          Using the
          pop-up menu selected bad frames can be renamed to *.bak for
          deletion
          later.<span style="font-weight: bold;"><br>
          </span><br>
        <span style="text-decoration: underline;">c)
          Set parameters in tab stack method</span><br>
        In tab stack method
          select the stacking
          method, average or sigma-clip-average. For&nbsp;OSC camera
          images&nbsp;
          select "Convert OSC images to colour". Select the
          correct&nbsp;Bayer
          pattern
          (4 options). Test the required
          pattern first in the viewer with a single image. The source
          images
          should be raw (gray) &nbsp;without colour produced by
          &nbsp;astronomical camera's.<br>
          <br>
        <span style="text-decoration: underline;">d)
          Set parameters in tab alignment<br>
        </span>Leave this
          to the default star alignment.<span style="text-decoration: underline;"><br>
        </span><br>
        <span style="text-decoration: underline;">e) Classify by</span><br>Leave&nbsp;all check marks&nbsp;initially
unchecked. (This is an option to select automatically a master dark
with the correct temperature and exposure time for the lights. Same for
&nbsp;master flat selection &nbsp;based on filter used both in the
light and flat.) <br>
          <br>
          <span style="text-decoration: underline;">f) Press the
            </span><span style="background-color: rgb(153, 153, 153);">&nbsp;Stack (..)</span><span style="text-decoration: underline;"> button.</span><br><span style="text-decoration: underline;"></span><span style="text-decoration: underline;">
          </span>The
          darks and flats &amp; flat-darks will be combined in a master
          dark
          and
          master flat frame. Then the program will combine the light
          frames to
          the final image and save it automatically to FITS. This will take some
          time.<br>
          <br>
        g)
            <span style="font-weight: bold;">Export</span><br>
The stack result will be saved as FITS. The program keep a record of
all&nbsp;results in tab Results. Stretch the image as required.
&nbsp;Crop the sides if required using the pop-up menu. Equalise the
back ground if required using the tool in tab <a href="astap.htm#pixel_math">pixel
          math</a>.
Export as stretched JPG or&nbsp;16 bit bit stretched/unstretched&nbsp;
PNG / TIFF. &nbsp;The stretched export follows the gamma and stretch
setting of the display. &nbsp;For further image processing you could
export to 32 bit float TIFF or 32 bit float PFM&nbsp;format.<br><br>ASTAP export types:</big><big><big><br><img style="width: 1652px; height: 417px;" alt="" src="astap_export.png"><br><br><a name="file_formats"></a><br></big></big><table style="text-align: left; width: 988px; height: 172px;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td><big>File formats ASTAP</big></td><td style="font-weight: bold;"><big>8 bit&nbsp;</big></td><td style="font-weight: bold;"><big>16 bit</big></td><td style="font-weight: bold;"><big>32 bit (float)</big></td></tr><tr><td style="font-weight: bold;"><big>Import</big></td><td><big>FITS, JPEG, PNG, TIFF, XISF (uncompressed)</big></td><td><big>FITS,&nbsp;PNG, TIFF (<a href="https://astro-tiff.sourceforge.io/">ASTRO-TIFF</a>), PPM, PGM,&nbsp;raw formats, XISF (uncompressed)</big></td><td><big>FITS,&nbsp;PFM,XISF (uncompressed)</big></td></tr><tr><td style="font-weight: bold;"><big>Export</big></td><td><big>FITS, JPEG, PNG, TIFF</big></td><td><big>FITS,&nbsp;PNG,&nbsp;TIFF (<a href="https://astro-tiff.sourceforge.io/">ASTRO-TIFF</a>),&nbsp; PPM, PGM</big></td><td><big>FITS,&nbsp;TIFF (<a href="https://astro-tiff.sourceforge.io/">ASTRO-TIFF</a>), PFM</big></td></tr></tbody></table><big><br><br>
        &nbsp;&nbsp;<img style="width: 1416px; height: 756px;" alt="" src="astap_stacking.jpg"><br>
        <br>
        <br>
        All the program settings and file selections will be save
          by
          leaving the program or click on the &nbsp;Stack check marked images &nbsp; button.<br><br><a href="astap.htm#index">Back to index</a><br><br><br><a name="stack_menu"></a><big><span style="font-weight: bold; text-decoration: underline;">The stack menu:</span></big></big>
          
        
        
        
        <big><span style="font-weight: bold; text-decoration: underline;"><br>
          <br>
        </span><img style="width: 1835px; height: 622px;" alt="" src="astap_stack_menu.png"><br>
        <br>
        For a generic description how to stack see <a href="astap.htm#operation">Program operation, stacking
            astronomical images</a><br><br><span style="text-decoration: underline; font-weight: bold;"><a name="lights_tab"></a>Lights tab</span><br>
          <br><span style="background-color: rgb(164, 164, 164);">Browse</span> button: Images, darks, flats can be added using the <span style="background-color: rgb(164, 164, 164);">Browse</span> button or can be drag dropped on the&nbsp;form.&nbsp;<br><br><span style="background-color: rgb(164, 164, 164);">Analyse and organise button</span>: Images placed in the first tab
          will
          be organised based on the FITS header keyword 
          IMAGETYP.
          So as soon you click on&nbsp;the image &nbsp;<span style="background-color: rgb(164, 164, 164);">Analyse and organise</span>
button,&nbsp;dark and flats and flat darks/bias images will be moved to
the corresponding tab. If the button is pressed also the images are
analysed for HFD, background and other details.<br><br></big><big>For LRGB stacking if a question mark in column "Filter" is displayed then filter name </big><big>in the <a href="astap.htm#stackmenu2">"Stack method tab"</a> should made the same as&nbsp;</big><big>in the flat header behind the keyword FILTER.&nbsp;</big><br><big><br><span style="font-weight: bold;">Check-mark the frames</span>. Only check-marked frames are stacked. Light&nbsp;files names containing "_stacked" will be 
          un-checked by default to
          prevent stacks by accident&nbsp;are&nbsp;re-used.
          If required, just select the file and check-mark it again.<br>
          <br>
          <span style="font-weight: bold;">Sorting</span>:
          Images can be sorted on any of the columns. For example if you
          click on
          HFD, the images will be sorted&nbsp;on HFD. You could
          then&nbsp;remove
          the images with the highest value or inspect them by double
          click on
          the file name.<br>
          <br><a name="classify"></a><span style="font-weight: bold;">Classify by:</span><br></big><ol><li><big><span style="font-weight: bold;">Light filter classification:</span> If classify by light filter is check marked&nbsp;then the stack routine will
          combine the
          available filters
          to a RGB image. If only Red + Green +Blue&nbsp;image are
          available
          they
          will be combined in a RGB image. If&nbsp;Luminance images are
          available
          it will first stack the RGB colors and then apply a
          most-common-filter
          and Gaussian blur on
          the&nbsp;RGB result. Finally&nbsp;the luminance image is
          coloured with
          the RGB result. The filter factor&nbsp;should be set typically
          near
          20.&nbsp;The filter names can be set in tab
          <a href="astap.htm#stack_menu2">alignment</a></big></li><li><big><span style="font-weight: bold;">Dark classification:</span>
The dark tab can contains multiple master darks. To select
automatically the best compatible master set the check-mark for
exposure and or temperature.&nbsp; If set the master dark with
compatible exposure duration&nbsp;and or temperature&nbsp;is automatic
selected. If more then one compatible&nbsp;dark is found then the dark
with nearest date is selected.&nbsp;Master darks with
incompatible&nbsp;dimensions are ignored.&nbsp;</big></li><li><big><span style="font-weight: bold;">Flat filter classification:</span> The flat tab can contains multiple master flat made with different filters. To select
automatically the best compatible flat set the check-mark for
classify flat on filter.&nbsp;Master flats with incompatible&nbsp;dimensions are ignored.&nbsp;</big></li><li><big><span style="font-weight: bold;">Object classification:</span> Several
          image series of different objects can be stacked in one run. If the classify-by-object
          is
          check-marked, the program will stacked in groups based on the OBJECT header keyword value.</big><br></li></ol><table style="text-align: left; width: 100px;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td>Classification-during-stacking</td><td>Object</td><td>Filters equal?</td><td>Dates equal?</td><td>Exposures equal?</td><td>Gains equal?</td><td>Temperatures equal?</td></tr><tr><td>Light</td><td>&#10004;</td><td>&#10004;</td><td colspan="1" rowspan="3">use nearest</td><td colspan="1" rowspan="2">&#10004;</td><td colspan="1" rowspan="2">&#10004;</td><td colspan="1" rowspan="2">&#10004;</td></tr><tr><td>Dark</td><td></td><td></td></tr><tr><td>Flat</td><td></td><td>&#10004;</td><td colspan="1" rowspan="2">warning&nbsp; (results-tab)</td><td colspan="1" rowspan="2">warning&nbsp; (results-tab)</td><td colspan="1" rowspan="2">warning&nbsp; (results-tab)</td></tr><tr><td>Flat-dark</td><td></td><td></td><td></td></tr></tbody></table><big><br>Keyword modification:
The pop-up menu has option to update a keyword of multiple files if
required. If the keyword DATE-OBS is typed then the program will
request a time shift in hours. This could be used to correct a recorded
time of observation. The old DATE-OBS is&nbsp;stored be behind a new
keyword&nbsp;for recovery but that should no be necessary.<br><br><br>
          <a name="uncheck_outliers"></a> <span style="font-weight: bold; text-decoration: underline;">Lights tab, How to exclude poor images</span><br><br>Before
stacking the images can be analysed with the &nbsp;Analyse and organise
images&nbsp; button. Images can be sorted on any of the columns like 1)
HFD value, 2) Quality, 3) Star detections or 4) background value. For
example if you click on HFD, the images will be sorted&nbsp;on HFD. You
could then&nbsp;remove the images with the highest value from the list
or inspect them by double click on the file name. The poor quality
images can be renamed to *.bak in bulk by the pop-up menu to be
removed/deleted&nbsp;later. The renaming to *.bak can be undone by
pressing CTRL+Z or META+Z for the Mac.<br><br>&nbsp;<big></big></big><ul><li><big>HFD



is the image median HFD. The lower the value the better. The HFD value is depended on focus quality and
guiding precision.&nbsp;Note that low values could be result of streaks as a result of loss of
tracking.&nbsp;</big></li><li><big>Quality of the image. The higher the better. Based on the number
of star detections divided by HFD. Depending on sky transparency of the
sky and focus. Note that loss of tracking result both in a low HFD and
low star count so a low quality factor..</big></li><li><big>Star
level. The higher the better. Depending on transparency of the sky and
focus. Note that a high values indicate&nbsp;satellite tracks.</big></li><li><big>Background.
Depending on sky darkness and transparency. The lower the better. A
higher value means in most cases a cloud was blocking the sky.</big></li><li><big>Sharpness.
The lower the better.Measures the&nbsp;change between dark and bright
pixels. The measurement is very sensitive to satellite tracks. Could be
used to detect satellite track when compared with HFD value. Could also
be used to sort images of the Moon and Sun on sharpness.(but they&nbsp;can't
be stacked) For correct sharpness measurement of OSC images
either the FITS header should contain the keyword BAYERPAT or
check-mark "Convert OSC to colour" in&nbsp;tab "Stack method". </big></li></ul><big><span style="font-weight: bold;"></span> To uncheck/untick
          poor images can als be done automatically. First check mark the option "After analyse
          untick worst
          images". Then press button&nbsp;<big><span style="background-color: rgb(153, 153, 153);">&nbsp;<small>Analyse and organise images&nbsp;</small></span><small><span style="background-color: rgb(153, 153, 153);"></span></small></big>. The column quality of the images will
          be
          analysed statistacally and outliers can be removed using either a&nbsp;<a href="https://en.wikipedia.org/wiki/Standard_deviation">
            standard deviation</a> &nbsp;represented by the Greek lower case sigma &#963; letter or a percentage.&nbsp;<br>
          <br>
          For a normal distribution you could expect the following:<br>
          <br>
        
        </big><big>
          </big><big>
            </big><big>
              </big><big>
              </big><big>
            </big><big>
            </big><big>
              </big><big>
              </big><big>
            </big><big>
            </big><big>
              </big><big>
              </big><big>
            </big><big>
            </big><big>
              </big><big>
              </big><big>
            </big><big>
            </big><big>
              </big><big>
              </big><big>
            </big><big>
            </big><big>
              </big><big>
              </big><big>
            </big><big>
          </big><big>
        </big><table style="width: 368px; height: 172px; text-align: left; margin-left: auto; margin-right: auto;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td style="background-color: silver;"><big><span style="font-weight: bold;">Confidence interval</span></big></td><td style="font-weight: bold; background-color: silver;"><big>Proportion
                within</big></td></tr><tr><td><big>1<i>&#963;</i></big></td><td><big>68%</big></td></tr><tr><td><big><span class="nowrap">1.5<span style="font-style: italic;"></span></span><i>&#963;</i></big></td><td><big>87%</big></td></tr><tr><td><big>2<i>&#963;</i></big></td><td><big>95 %</big></td></tr><tr><td><big>2.5<i>&#963;</i></big></td><td><big>98.8%</big></td></tr><tr><td><big>3<i>&#963;</i></big></td><td><big>99.7%</big></td></tr></tbody></table><big>
        <br><span style="font-weight: bold;"></span><span style="font-weight: bold;"><span style="text-decoration: underline;"><a name="satellite_tracks"></a></span>Lights tab, satellite tracks<br></span><br>The stack method "sigma clip average" should normally remove any satellite tracks. If&nbsp;after
stacking with "sigma clip average" there are still satellite tracks
visible, you could lower in&nbsp;<big>tab <a href="stack_menu2">"Stack Method</a>". </big>the sigma factor from 2.5 to a lower value maybe 2 or even 1.5&nbsp;. An other way is the blink/scroll&nbsp; through the
images with the &nbsp;<span style="background-color: rgb(153, 153, 153);"> &gt;&gt; &nbsp;</span>
button. As soon you see an abnormal bright track on the image stop the
blinking by esc and inspect visually the image(s)&nbsp; involved by
double click on the row. Remove any poor image&nbsp;by using right
mouse button pop-up menu "rename to *.bak"<br><br>If the&nbsp;&nbsp; <span style="background-color: rgb(153, 153, 153);">&nbsp;<big><span style="font-weight: bold;">+&nbsp;</span></big></span>&nbsp; option is used then additionally&nbsp;the number of <a href="astap.htm#streak_filter2">detected satellite streaks</a> will reported in a column. Frames with very bright tracks could be removed<br><br><br><a name="config_column"></a><span style="font-weight: bold;"><br>Configurable column</span><br><br>The&nbsp;last
column in tab lights can report any image header value. To configure
set in the pop-up menu the header keyword to read. This configurable
option can be used to report e.g
the measured SQM, TILT as written by the <a href="#batch_processing">batch processing menu</a> of the viewer.&nbsp; <br><big><br><br><a style="font-weight: bold; text-decoration: underline;" name="darks_tab"></a><span style="font-weight: bold; text-decoration: underline;">Darks tab:</span></big></big><big><big><span style="font-weight: bold;"><br><br><img style="width: 1763px; height: 633px;" alt="" src="astap_darks_tab.png"><br></span><br></big><span style="background-color: rgb(161, 161, 161);">Browse</span> button: use this button to add&nbsp; frames to the list. Frames&nbsp;can also be drag dropped on the&nbsp;form.<br><br><span style="background-color: rgb(164, 164, 164);">Replace check-marked by one or more master darks:</span>
This will replace the individual&nbsp;check-marked frames&nbsp;by a
single master dark. The existing master darks will not be effected. <br><br><span style="text-decoration: underline;">Classify during creation</span><br>If&nbsp;the
list&nbsp;contains frames with&nbsp;different exposure durations&nbsp;and the option&nbsp;"<a href="astap.htm#classify">classify on</a>"
exposure time is check-marked then for each exposure
duration a different&nbsp;master dark will be created. Same applies for
gain
and temperature. If not classify check- marks are set then all loaded
individual dark frames will be combined in one master dark and values
are averaged. </big><big>To automate making a master flat for each observation
night you could &nbsp;use the </big><big><span style="text-decoration: underline;">Classify by date for master creation</span>
check mark at the top of the tab. This will create master flats for
each exposure night from the frame loaded. </big><br><big><br></big><table style="text-align: left; width: 100px;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td>Dark-classification-during-master-creation</td><td>filter</td><td>date</td><td>exposure</td><td>gain</td><td>temperature</td></tr><tr><td>Dark</td><td>&#10004;</td><td>&#10004;</td><td>&#10004;</td><td>&#10004;</td><td>&#10004;</td></tr></tbody></table><br><big><span style="text-decoration: underline;">Classify&nbsp;during stacking</span><br></big><big>The
intention is
to keep all master darks here loaded and check-marked. Master dark selection on light
exposure, gain and temperature can be fully&nbsp;&nbsp;automatic by setting the <a href="astap.htm#classify">"classify on</a>" check-marks. </big><big>
If &nbsp;two master darks only differ in date then the frame with the date closest to
the&nbsp;light will be selected. Closest date selection is intended for DSLR
users without sensor temperature control. It is not required for users
with temperature controlled cameras where it assumed dark frame do not
change in time.&nbsp; </big><big><br></big><br><table style="text-align: left; width: 100px;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td>Classification-during-stacking</td><td>Object</td><td>Filters equal?</td><td>Dates equal?</td><td>Exposures equal?</td><td>Gains equal?</td><td>Temperatures equal?</td></tr><tr><td>Light</td><td>&#10004;</td><td colspan="1" rowspan="1">&#10004;</td><td colspan="1" rowspan="3">use nearest</td><td colspan="1" rowspan="2">&#10004;</td><td colspan="1" rowspan="2">&#10004;</td><td colspan="1" rowspan="2">&#10004;</td></tr><tr><td>Dark</td><td></td><td rowspan="1"></td></tr><tr><td>Flat</td><td></td><td>&#10004;</td><td colspan="1" rowspan="2">warning (results-tab)</td><td colspan="1" rowspan="2">warning (results-tab)</td><td colspan="1" rowspan="2">warning (result-tab)</td></tr><tr><td>Flat-dark</td><td></td><td></td><td></td></tr></tbody></table><big><br><span style="text-decoration: underline;">Compatibility column.</span> <br>This
column indicates why the selected darks are not compatible with the
light frames. Compatibility issues can be frame width,&nbsp; frame
height, sensor gain, sensor temperature, exposure duration. All can be
overridden by classify check-mark except for frame width and frame
height.<br><span style="text-decoration: underline;"></span></big><big><br></big><big><br></big><a href="astap.htm#index">Back to index</a><big><br><big><span style="font-weight: bold;"><br></span><a style="font-weight: bold; text-decoration: underline;" name="flats_tab"></a><span style="font-weight: bold; text-decoration: underline;">Flats tab:</span></big></big><big><big><span style="font-weight: bold;"><br><img style="width: 1764px; height: 634px;" alt="" src="astap_flats_tab.png"><br><br></span><span style="background-color: rgb(164, 164, 164);">Browse</span></big> button: use this button to add&nbsp; frames to the list. Frames&nbsp;can also be drag dropped on the&nbsp;form.<br><br><span style="background-color: rgb(164, 164, 164);">Replace check-marked by&nbsp;master flat:</span>
This
button will combine the individual&nbsp;check-marked frames to a
single master
flat using the flat-darks loaded in the flat darks tab. So the
flat-dark tab should be filled with frames prior pressing this button.
The existing master flats will not be effected. All individual
frame&nbsp;will be combined in a master flat with flat-darks included.
The flat-dark tab will be cleared after the operation. </big><big>&nbsp;</big><big>The user should only combine flat frames and flat-darks with the
same gain, temperature and preferable exposure time. If the values are
different then this will be recorded in the FITS header behind keyword
ISSUES and&nbsp;later reported in the <a href="astap.htm#results">results-tab</a></big><br><big><br><span style="text-decoration: underline;">Classify during creation </span><br>If&nbsp;the
list&nbsp;contains frames made with different filters&nbsp;and the
option "classify on" flat&nbsp;filter&nbsp;is check-marked then for
each filter a different&nbsp;master flat will be created.&nbsp;</big><big>To automate making a master flat for each observation night you could &nbsp;use the </big><big><span style="text-decoration: underline;">Classify by date for master creation</span>
check mark at the top of the tab. This will create master flats for
each exposure night from the frame loaded. &nbsp;Flat-darks are not sorted
on date because it is assumed they are stable. If you </big><big>make
several flat with different exposure duration (and different filters)
you could link them to&nbsp;flat-darks with the same exposure
using&nbsp;the
option "classify by exposure during master creation.<br><br></big><table style="text-align: left; width: 100px;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td>Classification-during-master-creation</td><td>&nbsp;Filter</td><td>Date</td><td>Exposure</td><td>Gain</td><td>Temperature</td></tr><tr><td>Flat</td><td>&#10004;</td><td>&#10004;</td><td colspan="1" rowspan="2">&#10004;</td><td colspan="1" rowspan="2"></td><td colspan="1" rowspan="2"></td></tr><tr><td>Flat-dark</td><td></td><td></td></tr></tbody></table><big><br></big><big><br><span style="text-decoration: underline;">Classify during stacking</span><br></big><big>The intention is
to keep all master flats here loaded and check-marked. Flat selection on flat filter is&nbsp;automatic by setting the&nbsp;<a href="astap.htm#classify">classify on "flat filter</a>" check-mark. For LRGB stacking if a question mark in column "filter" is displayed then filter name </big><big>in the <a href="#stackmenu2">"Stack method tab"</a> should made the same as&nbsp;</big><big>in the flat header behind the keyword FILTER.&nbsp;</big><big>If &nbsp;two master flats only differ in date then the frame with the date closest to
the&nbsp;light will be selected. </big><big>This to ensure that the dust particles pattern
matches. <br></big><br><table style="text-align: left; width: 100px;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td>Classification-during-stacking</td><td>Object</td><td>Filters equal?</td><td>Dates equal?</td><td>Exposures equal?</td><td>Gains equal?</td><td>Temperatures equal?</td></tr><tr><td>Light</td><td>&#10004;</td><td>&#10004;</td><td colspan="1" rowspan="3">use nearest</td><td colspan="1" rowspan="2">&#10004;</td><td colspan="1" rowspan="2">&#10004;</td><td colspan="1" rowspan="2">&#10004;</td></tr><tr><td>Dark</td><td></td><td></td></tr><tr><td>Flat</td><td></td><td>&#10004;</td><td colspan="1" rowspan="2">warning&nbsp; (results-tab)</td><td colspan="1" rowspan="2">warning&nbsp; (results-tab)</td><td colspan="1" rowspan="2">warning&nbsp; (results-tab)</td></tr><tr><td>Flat-dark</td><td></td><td></td><td></td></tr></tbody></table><big><br></big><big><br><span style="text-decoration: underline;">Calibration column</span><br>This
column will indicate&nbsp;if the flat is calibrated with a dark-flat by
the letter B (bias). &nbsp;Use of bias frames are not recommend since
modern sensors behaviour can change in the first exposure seconds.&nbsp;<br><br></big><big><span style="text-decoration: underline;">Compatibility column.</span>
&nbsp;<br>This column indicates why the selected flats are not compatible with
the light frames. Compatibility issues can be frame width,&nbsp; frame
height, sensor gain, sensor temperature, exposure duration. All can be
overridden by classify check-mark except for frame width and frame
height.<br><br></big><big><br><a href="astap.htm#index">Back to index</a><br><br><big><span style="font-weight: bold;"><br></span><a style="font-weight: bold; text-decoration: underline;" name="flat_darks"></a><span style="font-weight: bold; text-decoration: underline;">Flat darks tab:</span></big></big><big><big><span style="font-weight: bold;"><br><img style="width: 1726px; height: 623px;" alt="" src="astap_flat_darks_tab.png"><br></span><br></big><span style="background-color: rgb(164, 164, 164);">Browse button:</span> &nbsp;use this button to add&nbsp; frames to the list. Frames&nbsp;can also be drag dropped on the&nbsp;form.<br><br>After&nbsp;master flat(s) are created&nbsp;the&nbsp;flat-darks tab will be cleared.<br><br></big><big><br><br><a href="astap.htm#index">Back to index</a><br><br><br><big><a name="results"></a><span style="font-weight: bold; text-decoration: underline;">Results tab.</span></big>
        </big><p align="left"><big>The
            stack results are reported in the results tab. By a double
            click
            they&nbsp;can be viewed&nbsp;the viewer. The number of files
            and
            exposure&nbsp;times are given. With the pop-up menu it is
            possible
            to
            copy the image file path to the clipboard for use in a file
            explorer. <br>
          <span style="text-decoration: underline;"><span style="font-weight: bold;"></span></span>&nbsp;<br>
          <a href="astap.htm#index"><img style="border: 0px solid ; width: 1590px; height: 635px;" alt="" src="astap_stack_menu4.png"></a></big></p><p align="left"><big><span style="text-decoration: underline;">Calibration column</span>
&nbsp;</big></p><p align="left"><big>This
column will indicate&nbsp;if the stack was calibrated with a dark (D),
Flat (F) and&nbsp;flat-dark (B). &nbsp;The S stand for stacked. So
ideally it indicates DFBS. Calibration stauts is stored behind keyword
CALSTAT.</big></p><p align="left"><big><span style="text-decoration: underline;"></span></big></p><p align="left"><big><span style="text-decoration: underline;">Issues column</span></big></p><p align="left"><big>
Possible&nbsp;dark frame issues are D_temperature, D_exposure, D_gain.
This indicates that the dark sensor temperature, exposure duration and
sensor gain are different then the light frame values.&nbsp;</big><big>Ideally
light and dark frames should have been taken with the same sensor
temperature, exposure duration and sensor gain settings. &nbsp;</big></p><p align="left"><big>Possible minor flat frame issues are </big><big>FD_temperature, FD_exposure, FD_gain.&nbsp;&nbsp;</big><big>This
indicates that the flat-dark sensor temperature, exposure duration and
sensor gain are different then the light frame values.</big><big>&nbsp;</big><big>Ideally
flat and flat-dark frames should have been taken&nbsp;with the same
sensor temperature, exposure duration and sensor gain settings. &nbsp;</big></p><p align="left"><big>Issues between the darks and lights are more important due to the low light conditions for lights.</big></p><p align="left"><big>These issues are stored in the FITS header behind keyword ISSUES.</big></p><big>
        <big>
          </big><a href="astap.htm#index">Back to index</a></big><big><br><big><br>
          <span style="font-weight: bold;"></span><big><br>
        </big><a style="font-weight: bold; text-decoration: underline;" name="stack_menu2"></a><span style="font-weight: bold; text-decoration: underline;">Stack method tab</span></big></big>
      </div>
      <div style="text-align: left;"><big><img style="width: 1505px; height: 578px;" alt="" src="astap_stack_menu2.png"><br><big><br>
          <span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></big><big><span style="font-weight: bold;"></span><small>The best stack option is "Sigma
          clip
          average". For only
          2 or 3 images or when you are in a hurry or for testing "average"will do.<br>&nbsp;&nbsp;&nbsp;&nbsp; <br></small></big></big>
        <table style="text-align: left; width: 1528px; height: 411px;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td><big>Stack method</big></td><td><big><span style="font-weight: bold;">Stacking</span></big></td><td><big>Description</big></td><td style="font-weight: bold;">Option &nbsp;<span>&#963;-factor</span></td></tr><tr><td><big>Average Stacking</big></td><td><span style="font-size: 125%; line-height: 1em;">&#10004;</span></td><td><big>For fast stacking. Satellite tracks will not be removed.</big></td><td><span style="font-size: 125%; line-height: 1em;">&#10004;</span></td></tr><tr><td><big>Sigma clip average</big></td><td><span style="font-size: 125%; line-height: 1em;">&#10004;</span></td><td><big>Stacking, satellite tracks will be removed. Reduce the &#963; factor for more aggressive filtering of the satellite tracks.</big></td><td></td></tr><tr><td><big>Astrometric image stitching mode</big></td><td><big>Mosaic</big></td><td><big>This will stitch astrometric tiles. Prior to this stack the images
to tiles and check for clean edges. If not use the "Crop each image
function". For flat background apply artificial flat in tab pixel math 1
in advance if required.&nbsp; Adapt the mosaic canvas height and width if
required, default is 2.</big></td><td></td></tr><tr><td><big>Calibration and alignment of the files only</big></td><td></td><td><big>Darks and flats will be applied. The images will be aligned to the reference image.</big></td><td></td></tr><tr><td><big>Calibration of the files only</big></td><td></td><td><big>Darks and flats will be applied.</big></td><td></td></tr><tr><td><big>Average stacking, skip LRGB&nbsp; combine</big></td><td><span style="font-size: 125%; line-height: 1em;">&#10004;</span></td><td><big>Satellite tracks will not be removed. Stacks based on filter will not be combined to RGB.</big></td><td></td></tr><tr><td><big>Sigma clip average, skip LRGB combine</big></td><td><span style="font-size: 125%; line-height: 1em;">&#10004;</span></td><td><big>Satellite tracks will be removed. Reduce the &#963; factor for more
aggressive filtering of satellite tracks. Stacks based on filter will
not be combined to RGB.</big></td><td></td></tr></tbody></table><big><br>There are two modes of stacking:<br></big><ul><li><big>1)
Stacking of image of a grayscale camera or&nbsp;raw&nbsp;images of a
DSLR camera. &nbsp;Stacking in either grayscale of colour&nbsp;goes
fully automatic. The program will detect the type of images. Stacking
in colour can be forced if the BAYERPAT keyword is not found in the
FITS header.</big></li><li><big>2) Stacking of (L)RGB images made with seperate filters. This mode is activated if option Classify by "Light filter" is checked.</big></li></ul><big><br><br>Options:<br><br><span style="font-weight: bold;">&#963;&nbsp;factor:</span>
This is a factor used by the sigma clip average stacking method to
remove outliers like satellite streaks from the stack. For the series
lights the<a href="https://en.wikipedia.org/wiki/Standard_deviation"> standard deviation</a> (&#963;)
is calculated for each pixel and any pixel which is outsider is
removed. A typical value of 2 will result in skipping about 4.4% of
the&nbsp;pixels. If satellite tracks are not removed you could reduce
this
factor and more of the satellite streaks will be removed. You could
also use the satellite streaks filter. Note that method sigma clip
average filtering works better for more images. Try to acquire at least
ten images but twenty or thirty images works better.<br><br><br><span style="font-weight: bold;">Auto levels:</span>
&nbsp;This is an option to white balance the final colour result. The
stars will be average white and the background sky will be gray.<br><br><span style="font-weight: bold;">Normalise OSC flat:</span> &nbsp;This
option should normally be switched off. Only if the light source used for
making the flats was very reddish or blueish, you could uses this option
to equalise the red, green and blue level. Binning is not recommended for
flats since individual pixel sensitive&nbsp;differences&nbsp;are
compensated by the flat.<br><br><span style="font-weight: bold;">Colour smooth:</span>
&nbsp;This is an option to smooth the de-mosaic artifacts for all
pixels above the noise level. The colours are smoothed while preserving
the luminance signal. The same function is available in tab pixel math
1.&nbsp;<br><br></big><big><span style="font-weight: bold;">Star colour smooth:</span> &nbsp;This is an
option to smooth the de-mosaic artifacts of the brighest and medium stars. The colours are smoothed while
preserving the luminance signal.&nbsp;</big><big>The same function is available in tab pixel math 1.&nbsp;</big><br><br><big><br><span style="font-weight: bold;">Raw conversion</span>. &nbsp;The program used to convert the RAW file to FITS. It is described <a href="astap.htm#raw_conversion">here</a><br><br><br><br>
          The program settings will be saved automatically if your
          either exit the
          program or start a stack.<br><br><a name="gray"></a><br><span style="font-weight: bold; text-decoration: underline;">Stack method tab,&nbsp;
            stacking grayscale images:</span><br><br>There are no special settings for grayscale images. Classify on "Light images" should be unchecked.<br><br><br><a name="osc_menu"></a><br><span style="font-weight: bold; text-decoration: underline;">Stack method tab,&nbsp;
            stacking raw one shot colour images (OSC):
          </span>&nbsp; <br><br>Classify on "Light images" should be unchecked.<br>RAW
          images of &nbsp;DSLR cameras /One shot color
          cameras are monochrome and have to be converted
          into colour images (after
          applying darks and flats). This
          converson is
          called <a href="https://en.wikipedia.org/wiki/Demosaicing">demosaic</a>
          or debayer.  First set Bayer
          pattern
          correctly by loading a raw image (grayscale) in the viewer and
          try one
          of the bayer patterns till the image colours match in viewer.
          If
          not hit CNTRL-Z to undo and try a different Bayer pattern. <br><br>
          There are several methods to convert (demosaic/debayer ) the
          raw
          image&nbsp; to colour:<br></big>
        
        
          
        
        <div style="margin-left: 40px;"><big>
          </big><ul><big>
            </big><li><big><span style="font-weight: bold;">AstroC</span>,
                  colour for saturated stars,
                as bilinear method but for saturated stars the program
                tries
                reconstruct the star colour. Select the range which
                matches with the value of brightest stars.</big></li><big>
            </big><li><big><span style="font-weight: bold;">AstroM</span>,
                  white stars,
                as bilinear method but if there is an unbalance between
                the 4 red, 4
                blue or 2 green pixels it uses luminance only. Effective
                for unsampled
                images and stacks of a few images only. Star colour is
                lossed if
                undersampled but star will become white.</big></li><big>
            </big><li><big><span style="font-weight: bold;">AstroSimple</span> , each
R,G, G, B pixel colour information is used in a&nbsp;2x2 pixel range. Simple but very effective for
astro images. Works best for a little oversampled images. Stars have very few artifact if any.&nbsp;</big></li><big>
            </big><li><big><span style="font-weight: bold;">Bilinear</span>, a basic demosaic method using the colour information from a 3x3 pixel range.</big></li></ul><div style="text-align: right;"><big>&nbsp;&nbsp;&nbsp; &nbsp;<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width: 0pt;" src="https://i.creativecommons.org/l/by/4.0/88x31.png"> </a><span style="font-weight: bold;">AstroSimple</span> is  Han Kleijn,
www.hnsky.org,&nbsp;2020. and&nbsp;licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative
Commons Attribution 4.0 International License</a>.<br>&nbsp;which
permits unrestricted use, distribution, and reproduction
in any medium, provided the original work is properly cited.&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; </big></div><big>
          What to select:<br>
        </big></div>
        <ul style="margin-left: 40px;"><big>
          </big><li><big>In general de-mosaiced OSC astro images are
suffering
              from colour artifacts due to the small size of stars and
              pixel saturation. If the pixels iluminated by a star are
              saturated, the
              red, green and blue values will have the same maximum
              value and the
              star centre will appear white. In most case this can be
              avoid by taking
              short exposures of 60 seconds or shorter.</big></li><big>
          </big><li><big>Best results are achieved with de-mosaic methods AstroC and Simple.&nbsp;</big></li><big>
          </big><li><big>In most cases the option "Auto level and colour smooth"
              is required for the correct colour balance and colour
              smooth. First the
              three colour channels are adjusted to make the background
              colour
              neutral and the stars average white. Secondly the bright
              stars are
              smoothed. Both actions can be done manual in the tab <a href="astap.htm#pixel_math">pixel
              math</a>, option
              "colour correction"
              and "smart colur
                smoothing"<br>
            </big></li><big>
          </big><li><big>If the images are under-sampled and&nbsp;the
              star colour is random after stacking, use&nbsp;AstroM, white stars. Stars will be
              whiter. Star colour will be lost.&nbsp;</big></li><big>
        </big></ul><big><a name="astrosimple"></a><br>The principle of the AstroSimple demosaic method:<br><br></big><div style="text-align: center;"><big><img style="width: 1309px; height: 715px;" alt="The ASTAP demosaic method Simple" src="astap_simple.png"></big></div>
        <big><big><span style="font-weight: bold;"></span></big><br><big><br>
          <span style="font-weight: bold;"><a name="raw_conversion"></a> </span></big><span style="font-weight: bold; text-decoration: underline;">Stack method tab, RAW conversion of OSC images (one shot
            colour images):</span>
To import raw files from a digital camera, ASTAP can either use
LibRaw or DCRAW for conversion. You can select it in tab "Stack
method". LibRaw has some advantages since the conversion program


convert directly to FITS and exposure time, date of exposure and
demosaic pattern are written to the FITS header.<br><br>The are two option for LibRaw. <br><br></big><ul><li><big>LibRaw (full active area)</big></li><li><big>LibRaw &nbsp;(Cropped active area)</big></li></ul><big><br>The
default value is "LibRaw
(full active area). This will extract all active sensor data (e.g. 5202
x3464 pixels) equal A+C&nbsp;below. If you select "LibRaw
&nbsp;(Cropped active area)" you get for a little less area (e.g. 5184
x 3456) equals C below. &nbsp;<br><br>Note that for stacking all images, light, darks, flats, and flat-darks should be of the same dimensions!<br><br>The full area M +A+C (e.g 5360 x 3516) could be extracted using
the included&nbsp;command-line utility unprocessed_raw using the -F option but has no purpose in ASTAP.<big><br> </big><a href="http://www.barrypearson.co.uk/articles/dng/specification.htm#areas"><br></a></big><ul style="font-style: italic;"><li><big><strong>A + C</strong>: &nbsp;&nbsp;The <strong>A</strong>ctive Area, which is the largest area from which a useful image can be formed. </big></li><li><big><strong>C</strong>: &nbsp; The <strong>C</strong>rop Area, which is the subset of the <strong>A</strong>ctive Area which many raw converters convert into a useful image. The main reason why <strong>C</strong> is smaller than <strong>A</strong>
 is to provide some extra pixels all around for a raw converter's 
demosaicing algorithm to use. </big></li><li><big><strong>M&nbsp;</strong>:<strong> &nbsp;M</strong>asked Area,&nbsp;used by some cameras, especially Canons used a dark.</big></li></ul><div style="text-align: center;"><big><big><img style="width: 703px; height: 446px;" alt="" src="astap_image_active_area.png"><br></big></big></div><big><big><br></big>For
stacking of &nbsp;OSC images it is best to start with raw images. The
raw colour images look mono, but the program will convert them to
colour later in the stacking process. There are four different Bayer
patterns. The demosaic pattern can be set in the&nbsp;tab "stack
method".
Try auto or&nbsp;empirical which will result in the correct colours. A
terrestrial image could help find the correct demosaic settings. Load a
raw image in the viewer and in tab "Stack method" test conversion with
button "Test pattern". Try auto&nbsp;or the four demosaic patterns. If
the colours are not correct, just hit undo button or type CTRL-Z to
recover and try an other demosaic setting.<br><br>Power down option after
            completion:&nbsp;
          If stacking takes a long time you could activate this option
          and the
          program will be power-down the computer after completion. <br><br>
        &nbsp; Clear &nbsp;, button to



        remove all files from the list.<br></big>
          
          
        <p align="left"><big><span style="background-color: rgb(164, 164, 164);">&nbsp; &nbsp; ||&nbsp;&nbsp;&nbsp; &nbsp;</span> , button to
          stop&nbsp;blinking cycle.</big></p>
        <p align="left"><big><span style="background-color: rgb(164, 164, 164);">&nbsp; &nbsp;&#11208; &nbsp; &nbsp;</span>&nbsp;&nbsp; or&nbsp;&nbsp; <span style="background-color: rgb(164, 164, 164);">&nbsp; &nbsp;&#11207;&nbsp; &nbsp; </span>, to
          start a continuous un-aligned blinking cycle. This is
          intended to find
          visually outlier images where guiding has briefly failed.</big></p>
        <big><br><a href="astap.htm#index">Back to index</a><br><br><br><a style="font-weight: bold; text-decoration: underline;" name="lrgb"></a><span style="font-weight: bold; text-decoration: underline;">Stack method tab, (L)RGB stacking:</span></big><big><br><br>Activating&nbsp;(L)RGB mode: <br><img style="width: 1505px; height: 578px;" alt="" src="astap_stack_menu2_lrgb.png"><big><br></big><br>
The filter names should match the filter names in the FITS headers.
This is the case if in <a href="#lights_tab">tab Lights</a> the filter column is displaying red,
green, blue or gray icon. If there is no match the icon will be a
question &nbsp;mark.<br><br><br><br><a name="mosaic"></a><span style="text-decoration: underline; font-weight: bold;">Stack method tab, Image stiching method (Mosaic)</span><br><br>Astrometric
image stiching is&nbsp;possible with the internal astrometric solver. The reference of each pixel is the
astronomical position. So stacking is not done against a reference
image but against&nbsp;an position array set by the first image.
If if image stitching is selected the <a href="astap.htm#add_sip">SIP</a> option in tab <a href="#alignment_menu">alignment</a> will be activated. This will allow for correction of optical distortions.<br>&nbsp;.<br><br>Here a suggested work method:<br></big>
        
          
          
        
            
          
          
        
        
        <ol><big>
          </big><li><big>Stack the tiles
              separately using method "SIGMA-CLIP-average" and use for the
              alignment
              the internal STAR alignment&nbsp;method.
              &nbsp;Inspect the resulting tiles and crop them if
              required. You
              can
              also crop them later automatically with "Mosaic skip
              outside pixels"
              Do this for each color separately if you have separate
              files.</big></li><li><big>In tab&nbsp; "stack method" select option "IMAGE STICHING METHOD" and
              select
              astrometic alignment using either the internal solver.</big></li><li><big>In
tab "stack method" check-mark the option&nbsp;"equalise background". &nbsp;If the input
images have poor borders, set option crop images larger then 0%.</big></li><li><big>Select the files. Most likely the files names contain "_stacked, so you have the check-mark the files after selection.<br></big></li><big>
          </big><li><big>Click on the button&nbsp; &nbsp;<span style="background-color: rgb(164, 164, 164);">Stack check marked images|&nbsp;</span>&nbsp; </big></li><big>
          </big><li><big>Crop the stacked result
              using the image crop option in the viewer mouse pop-up menu.</big></li><li><big>Adjusted the stretch
              range and save
              as JPEG, 90% quality.</big></li><big>
        </big></ol><big><br>Possible error message: <span style="font-style: italic;">&nbsp;Abort!! Too many missing tiles. Field is 11.7x1.3. Coverage only 14.5%.</span><br>This
could happens if you have by accident an image from a different series
in the collection. The program tries to adapt the canvas to include the
outlier but it will be too empthy.&nbsp; Check the positions of the
images to stitch and remove any outlier. <br>Here an example mosaic x 4 of M31 made with ASTAP:<br><br><img style="width: 1000px; height: 758px;" alt="" src="astap_mosaic%20x%204.jpg"><br><br><br><br>
        Here an
        example of a mosaic build of DSS images:<br><img style="width: 947px; height: 847px;" alt="" src="astap_mosaic.png"><br>
        The size can be reduced by a crop function (right mouse button)
        later.
        Making the oversize too large could result in memory overload.<br><br><br><br>If
you have&nbsp; DSLR/OSC sensor and using a monochrome filter like
H-alpha, you can split the raw&nbsp;the images in seperate R, G, G,
B&nbsp; image using the&nbsp;viewer&nbsp;Tools, <a href="astap.htm#batch_processing">Batch processing</a>, Raw colour seperation menu. In case of H-alpha use only the
          R=red image for future processing. <br><br><a href="astap.htm#index"></a><br><br><a style="font-weight: bold; text-decoration: underline;" name="alignment_menu"></a><span style="font-weight: bold; text-decoration: underline;">The
              alignment menu tab:</span><br><br>For
          alignment there are four options, internal star alignment,
          &nbsp;native astrometric solver, <a href="#manual_alignment">manual alignment</a> or <a href="#ephemeris_alignment">ephemeris alignment</a>. For mosaic building you have to use
          the
          internal astrometric solver.<br><br><br><br>
        &nbsp;<a name="internal_alignment"></a><span style="font-weight: bold; text-decoration: underline;">Internal star alignment</span><br><br><img style="width: 1443px; height: 578px;" alt="" src="astap_stack_menu3.png"><br><br>This
          internal star matching alignment is the best and fastest
          option to
          stack images. It is not
          suitable for mosaics. No settings, fully automatics alignment
          for shift
          in x, y, flipped or any rotation using the stars in the image.
          It will
          work&nbsp;for images of different size/camera's with some
          limitations.<br><br>
          The
          program combines four close star detections into an irregular 2D
          tetrahedron or
          kite like figure&nbsp;(and
          compares the six irregular tetrahedron dimensions&nbsp;with
          irregular
          tetrahedrons
          of the first/reference image. It
          selects at least the three&nbsp;best matches and uses the centre
          position
          of the irregular tetrahedrons in a least square fitting
          routine for
          alignment.&nbsp; The four star detections are called a quad. The six geometric distances are used to construct a <a href="astap_astrometric_solving.htm">hash code</a>.<br><br>
          There is only three&nbsp;settings relevant but normally you
          don't
          have to change them.<br></big>
        
        
        
        
        
        
        
        
        
        
        
        
              
            
        
            
          
          
          
          
        
        <ul><big>
          </big><li><big><span style="font-weight: bold;">Hash code tolerance</span> &nbsp;Quads matching tolerance. Default setting 0.007. Leave this at 0.007 or 0.005 unless you
              have
              severe
              optical distortion.&nbsp;If you have too many false detections then set this
              lower.</big></li><big>
          </big><li><big><span style="font-weight: bold;">Maximum
                number of stars</span>.&nbsp;Number of star detections&nbsp;used to build quads. Default setting 500. In some cases like for images&nbsp;with a lot of
hot pixels you could set it lower to avoid false detections.</big></li><li><big><span style="font-weight: bold;">Ignore stars less then [HFD].</span>
Setting for stack alignment to filter out hot pixels out of the star
detection. Default value 0.8. Single hot pixels have a HFD of&nbsp;
less then 0.8. {&nbsp;2*(0.5/PI())^0.5=0.798 }<br></big></li><big>
        </big></ul>
        <big><br>
The following image shows the selected quads. The six geometric
distances between the four star detections form an irregular
tetrahedron and will be used as a hash code:<br><img style="width: 1392px; height: 1040px;" alt="" src="astap_quads.jpg"><br><br>
          The matching process is described here <a href="astap_astrometric_solving.htm">Background
          info,&nbsp;how
          does the ASTAP astrometric solving works internally</a><br><br><br><a style="font-weight: bold; text-decoration: underline;" name="astrometric_alignment"></a><span style="font-weight: bold; text-decoration: underline;">Alignment tab, astrometric alignment.</span></big>
          
          
        
        
          <br style="font-family: Arial;"><br style="font-family: Arial;"><img style="width: 1499px; height: 666px; font-family: Arial;" alt="" src="astap_stack_menu3_astro.png"><br style="font-family: Arial;"> <br style="font-family: Arial;">
        <big><span style="font-weight: bold;">Internal
            astrometric solver (plate solver). </span>This works with
          the
          same four star quad detection as for the Star alignment option.
          The found quads
          are compared with
          the&nbsp;star database (to be installed in the program
          directory). In most&nbsp;cases the star alignment is prefered above the astrometric alignment.<br><br>It
          has the following settings both applicable for the astrometric solving and astrometric alignment:</big><br style="font-family: Arial;">
          <br style="font-family: Arial;"><a name="add_sip"></a><big><span style="font-weight: bold; text-decoration: underline;">Tab astrometric alignment and solver settings:</span><br><br></big>
        
        <ul><big>
          </big><li><big><span style="font-weight: bold;">Field height:</span>
&nbsp;This is the square size of the star field in degrees used for
detection and will be set automatically for most FITS files.&nbsp;It
should equal to the image height in degrees. If unknown, you could try
initaly the option "auto".</big></li><big>
          </big><li><big><span style="font-weight: bold;">Radius search:</span>
              Search radius in degrees. If there is no match, the
              program will
              move&nbsp;the search field
              around in a&nbsp;square spiral and increasing the distance
              form the
              initial position up to the radius specified. &nbsp;A
              radius of 30
              degrees could be searched in a&nbsp;minute.</big></li><li><big><span style="font-weight: bold;">Ignore star less then ["]</span> &nbsp;Any star with a HFD below this values will be ignored. This will filter out hot pixels. Default setting 1.5".</big></li><li><big><span style="font-weight: bold;">Star database used:</span>&nbsp; If you select "Auto" the following logic will be used:<br></big><div style="margin-left: 40px; font-family: monospace;"><big>FOV&gt;20 &nbsp;==&gt; if exist W08<br>ELSE<br>FOV&gt;6&nbsp; &nbsp;==&gt; if exist G05<br>ELSE<br>FOV&lt;0.5 ==&gt; if exist D80<br>ELSE<br>==&gt; if exist V50, D50, D20, D05, D80, G05</big></div></li><big>
          </big><li><big><span style="font-weight: bold;">Downsample:</span>
&nbsp;For large images&nbsp;the down sampling will speed up the solving
and increase the signal noise ration of the stars. Default position is
0 equals auto. Any image with a height dimension above 2500 pixels will
be binned 2x2. Also colours are combined to monochromatic so this
option is beneficial for colour images. Avoid too much binning.
Resulting height&nbsp;should be 960 pixels or higher.</big></li><li><big><span style="font-weight: bold;">Maximum number of stars to use:</span>
              &nbsp;Number of star detections&nbsp;used to build quads. Default
setting&nbsp;500. &nbsp;If the database density is not sufficient the
maximum number of stars will be reduced automatically.</big></li><big>
          </big><li><big><span style="font-weight: bold;">Hash code&nbsp;tolerance:</span>
              &nbsp;Quads matching tolerance. Default setting 0.007. Leave this at 0.007 or 0.005 unless you
              have
              severe
              optical distortion.&nbsp;If you have too many false detections then set this
              lower.</big></li><li><big><a style="font-weight: bold;" href="#sip">SIP</a><span style="font-weight: bold;">&nbsp;coefficients:</span>&nbsp; Using this option the solver will add 3th order <a href="astap.htm#sip">SIP</a> polynomial coefficients to the header to cope with image distortion.&nbsp;</big></li><li><big><span style="font-weight: bold;">Use triples.</span> Experimental option for images with a low star count only. Default unchecked.<br></big></li><li><big><span style="font-weight: bold;">Slow.
             </span> This will force a 50% overlap between search fields. Default unchecked. Use
              this in rare cases where&nbsp;solving fails and still many star are detected. I applied this will slow down blind
              solving.</big></li><li><big><span style="font-weight: bold;">Calibrate prior to solving.</span>&nbsp; If
your image is full of hot pixels and soling is less reliable you could
try this option. The image will be calibrated with a dark prior to
solving removing the hot pixels. Select in the darks tab, a dark or
darks with similar exposure duration as the lights you trying to solve.
If your select several darks with&nbsp; different exposure length,
check-mark the option classify, "Dark exposure time".&nbsp;</big></li><li><big><span style="font-weight: bold;">Check pattern filter.</span> This
will remove the check pattern from raw OSC images. Use this only for
images with small dimensions like 1920x1080. For&nbsp; large dimension
the binning will work better.<br></big></li><big>
        </big></ul>
        <big>The internal plate solver works best with raw
            unstretched and
            sharp images of sufficient resolution where stars can be
            very faint.
            Exposures 5 to 300 seconds. Heavily stretched or photo
            shopped images
            are problematic.&nbsp;<br><br>
          For those are interested: &nbsp;<a href="astap_astrometric_solving.htm">Background
info,&nbsp;how
does
              the ASTAP astrometric solving works internally</a><br><br style="font-family: Arial;"></big>
          
          
        <br style="font-family: Arial;">
        <big><br><a href="manual_alignment" name="manual_alignment"></a><span style="font-weight: bold; text-decoration: underline;">Alignment tab, manual alignment.</span><br><br><span style="font-weight: bold;">Manual alignment</span><br><br>This
          option allows alignment of the images based on a single star,
          asteroid
          or comet. If this option is activated, the list of images in
          the image
          tab turns red. Double click on each image in the list and
          click on the
          star/comet of asteroid to be used as reference. This object is
          then
          marked with a little purple circle. The position&nbsp;will be
          auto
          centered. (and
          the X,Y position will be added to the list) A poor lock is
          indicated by
          a square. If so try again till it is a circle. If all images
          in
          the list
          are turned green, so contain a value, then click on the&nbsp;&nbsp;
            Stack button &nbsp;. <br><br><span style="font-weight: bold;">Options</span>:<br></big>
        
            
          <div style="margin-left: 40px;"><ul><li><big>Star centering</big></li><li><big>Comet centering</big></li><li><big>No alignment</big></li></ul></div>
          <big><br><br>
          For objects which are moving in the sky, select the stack
          option
          "average" and not option "sigma clip".<br><br>For manual alignment there is a option in the pop-up menu of tab light to select the next alignment stars automatically:<br><br></big><ul><li><big>Select an alignment star in the first image.</big></li><li><big>Select all images in <a href="#lights_tab">tab lights</a>.</big></li><li><big>Select in the pop-up menu of <a href="#lights_tab">tab lights</a> "Auto alignment star for selected images"</big></li><li><big>If
it stops halfway, then is doesn't lock on that image star halfway.
Select manually in that image the same star and try again or continue
with next images.</big></li></ul>
    
    
    <div style="margin-left: 40px;"><big><br></big></div><br style="font-family: Arial;"><img style="width: 1036px; height: 591px; font-family: Arial;" alt="" src="astap_manual_alignment.png"><br style="font-family: Arial;"><br><big><a name="ephemeris_alignment"></a><span style="font-weight: bold; text-decoration: underline;">Alignment tab, ephemeris alignment</span><br><br>Rather
then manual selecting the reference point&nbsp;it is also possible to use the
ephemeris of an asteroid or comet. To align by ephemerides go through the follow steps:<br><br><span style="font-weight: bold;">Preperation:</span>&nbsp; &nbsp;<br></big><ul><li><big>Configure and test the viewer&nbsp;<a href="#asteroid_annotation">asteroid annotation menu</a> shortcut CTRL+Q</big></li></ul><big><span style="font-weight: bold;">Stacking</span>:<br></big><ul><li><big>Select&nbsp;ephemeris alignment</big></li><li><big>Browse for all the images in the image tab and add if available the dark, flats.</big></li><li><big>Press the button  &nbsp; Analyse the selected file in tab images &nbsp;.</big></li><li><big>Select from the&nbsp;combobox the asteroid or comet to align on. See screenshot below.</big></li><li><big>Hit the  &nbsp;Stack check marked images&nbsp;&nbsp; button.&nbsp;</big></li><li><big>After the stacking is finished, it is possible to annotate the result. &nbsp;</big></li></ul><big><br>Only the solar object&nbsp;selected will be sharp. The stars will form trails<span style="font-family: Arial;"> </span></big><br style="font-family: Arial;"><big><br></big><img style="width: 1505px; height: 615px;" alt="" src="astap_ephemeris_alignment.png"><br>
      </div>
      <p align="left"><a href="astap.htm#index">Back
          to index</a></p>
      <p align="left"></p>
      <p align="left"><big><a name="blink"></a><big><span style="text-decoration: underline;">Blink tab</span></big><br>
        </big><big><span style="text-decoration: underline;"><span style="font-weight: bold;"></span></span></big></p>
      <p align="left"><big>
          This tab allows to blink images to show movement and to export to video</big></p><p align="left"><big>With the blink pop-up menu it is also possible to</big><big>
"track and stack" selected images aligned on a specific solar object
for a better
signal to noise ratio. The object velocity so movement is neutralised
by the stacking algorithm. In the final image positions and accurate
date and time of these objects can be retrieved from the stacked image
using the viewer pop-up menu&nbsp; <a href="#mpc1992line">"Mpc1992 report line</a>".</big></p><p align="left"><big></big></p><p align="left"><big>Button functionality:</big></p><p align="left"><big>Blink comparator. This
option allows rapidly cycle (blinking) through the images taken of the
same area of the sky at different times. This will allow the user to
spot easier moving objects. &nbsp;While blinking the result can be
demosaiced (slow) if the "auto demosaic" option in the viewer is
activated.</big></p>
      <p align="left"><big><span style="font-weight: bold; background-color: rgb(153, 153, 153);"><big>&nbsp; &nbsp;&nbsp; ||</big>&nbsp;&nbsp; &nbsp; </span>, button stops the blink
        cycle. &nbsp;</big></p>
      <p align="left"><big><span style="background-color: rgb(153, 153, 153); font-weight: bold;">&nbsp; &nbsp;&nbsp;&#11208;<big>|</big> &nbsp;&nbsp; </span>, button starts one blink cycle.</big></p>
      
      <p align="left"><big><span style="font-weight: bold; background-color: rgb(153, 153, 153);">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-weight: bold; background-color: rgb(153, 153, 153);">&#11208; &nbsp; &nbsp; </span>,
        starts a continuous blink cycle.</big></p><p align="left"><big><span style="background-color: rgb(153, 153, 153);">&nbsp;<span style="font-weight: bold;">&nbsp; &nbsp;&#11207; &nbsp; &nbsp;</span> </span>, continuous blinking backwards.</big></p><p align="left"><big><span style="font-weight: bold; background-color: silver;">&#9745;&nbsp;Align images</span>.
        With this option check-marked,the images will be aligned using
        star
        alignment.&nbsp; The alignment will be refreshed after pressing
        "clear
        alignment"</big></p><p align="left"><big><span style="font-weight: bold; background-color: silver;">&#9745; Time stamp</span>.
With this option a time stamp from the header will be written to the
bottom of the image. If the displayed image is saved as FITS, this time
stamp will be written to the saved image.&nbsp; </big></p>
      
      <p align="left"><big><span style="background-color: rgb(153, 153, 153); font-weight: bold;">&nbsp; Clear</span>, button to
        remove all files from the list.</big></p>
      
      <p align="left"><big><span style="font-weight: bold; background-color: rgb(153, 153, 153);">Export video</span>
&nbsp; This button will export the blink result to an uncompressed .y4m
video file (YUV4MPEG2). For OSC images, activate in the viewer&nbsp;
the "auto demosaic" option. The menu will ask for a video file name and
desired frame rates per seconds. Contrast will be as set in viewer.
Compression can be achieved in
an external program like VLC or leave it to YouTube.&nbsp; If
time-stamp is check marked then the time stamp will be&nbsp;written to
the video.<br><br><span style="font-weight: bold; background-color: rgb(153, 153, 153);">Export aligned</span>&nbsp;This
        button allow the creation of aligned FITS images.&nbsp;If&nbsp;
        blinking with alignment works well, stop blinking and hit this
        button&nbsp; All images will be copied aligned&nbsp;to new files
        ending
        _aligned.fit.&nbsp;Alignment will be done against the first
        image in
        the list <span style="font-weight: bold;">after alphabetic sorting</span>. If time-stamp is check marked then the time stamp will be&nbsp;written to the aligned images.&nbsp;</big></p><p align="left"><big>To select a different reference image for alignment do the following, <span style="background-color: rgb(153, 153, 153); font-weight: bold;">&nbsp; Analyse &nbsp;</span>,&nbsp; &nbsp;<span style="background-color: rgb(153, 153, 153); font-weight: bold;">&nbsp; Clear alignment&nbsp;</span>,&nbsp; click on the image to be reference to give it a blue marking, then click on <span style="font-weight: bold; background-color: rgb(153, 153, 153);">&nbsp; &nbsp;&nbsp;&nbsp;</span><span style="font-weight: bold;"></span><span style="font-weight: bold; background-color: rgb(153, 153, 153);">&#11208;&nbsp; &nbsp;&nbsp;</span></big></p><p align="left"><big><span style="background-color: rgb(153, 153, 153); font-weight: bold;">&nbsp; (Re)annotate (&amp;solve) </span>,
&nbsp;This reannotate the images with e.g. the minor planets and
comets. Use this if the annotation is wrong due to a old MPC file.</big></p><p align="left"><span style="font-family: monospace;"></span></p><p align="left"><big><a name="trackandstack"></a><span style="text-decoration: underline;">Track and Stack function</span></big><br></p><p align="left"><big>This
pop-up menu of the blink tab allows to track and stack all annotated
minor planets and
comets in separate stack image of 299x299 pixels for easy
identification. The Track and Stack will improve the signal to
noise ratio since all flux will be concentrated at one spot.. &nbsp;The
minor planet will be stacked to a single position
and the star will form streaks. This goes fully automatic based on the
MPC database. &nbsp;The number of minor planet annotations is set in
the viewer menu " <a href="astap.htm#asteroid_annotation">asteroid and comet annotation</a>" shortcut ctrl+R.&nbsp;</big></p><p align="left"><big>Track
and Stack will work for OSC/DSLR images (v2024.03.08) It will
produce&nbsp;stacks in colour. If you apply the bin 2x2 button prior to
track and stack then the result will be a mono stack. This mono stack
could be a little more astrometric correct.</big></p><p align="left"><big><img style="width: 1413px; height: 880px;" alt="" src="astap_track_and_stack.png"></big></p><p align="left"><big></big></p><p align="left"><a href="https://youtu.be/uvTJXuj4nCU"><big>"Track and stack" </big></a><big><a href="https://youtu.be/uvTJXuj4nCU">demonstration</a> on Youtube</big><big><span style="text-decoration: underline;"></span></big></p><p align="left"><big>Usage:</big><br></p><ol style="text-align: left;"><li><big>Load the images in the tab blink.</big></li><li><big>Display one image and check the <a href="astap.htm#asteroid_annotation">asteroid and comet annotation</a>
(ctrl+R). Set in this menu the limiting number of minor planets and or
limiting magnitudes correctly to show only minor planets within reach
of your telescope and camera. If your MPCORB database is to new (+100
days) or to old (-100 days) all the annotations will end with the
remark "&#9888;obsolete". </big></li><li><big>Select the group of images you want to track-and-stack and release the
right mouse button to get the pop-up menu and select "Track and Stack
all selected files for all annotations. &nbsp;Assume 10 minor planets
are annotated due to the settting in the viewer <a href="astap.htm#asteroid_annotation">asteroid and comet
annotation</a>
menu (shortcut ctrl+R) Then all images will be solved,
annotated and stacked in ten seperate images. For each minor planet one
dedicated tracked stack will be created using the calculated velocity
of that minor planet. So the
minor planet will be star like shape independed of the movement and the
stars will form streaks. The new stacks will be added in the list
before the
selected files. Faint minor planets will stay invisible but for some
thay will&nbsp;get enough signal to noise ratio to be visible in the
stacked image.</big></li><li><big>Double click on one of the ten stacks,&nbsp;move the mouse pointer to the
minor planet&nbsp;of interest and select the&nbsp;viewer pop-up menu, "<a href="astap.htm#mpc1992line">MPC1992 report line</a>".&nbsp;</big></li><li><big>Optional, you could paste the&nbsp;report line to the&nbsp;</big><big><a href="https://minorplanetcenter.net/cgi-bin/checkmp.cgi">MPC checker page</a> for confirmation.</big></li></ol><div style="text-align: left;"><big>Note the alignment is based on the annotation. If the annotation are wrong use (due to a old MPC file) use the <big><span style="background-color: rgb(153, 153, 153); font-weight: bold;">&nbsp; (Re)annotate (&amp;solve)</span> </big>button to refresh.</big></div><div style="text-align: left;"><big>A
normal stack compared with Track and Stack. For the 60 x 120 seconds
stack the minor planets are vague streaks. The obsolete remark
indicates the MPCORB database is obsolete. That why the minor planets
are out of the center of the annotation:</big></div><div style="text-align: left;"><img style="width: 715px; height: 351px;" alt="" src="astap_track_stack_demo1jpg.jpg"></div><big><br></big><div style="text-align: left;"><big>It is database driven and the maximum magnitude and number of objects can be set. For this go to the viewer menu <a href="astap.htm#asteroid_annotation">asteroid and comet
annotation</a>&nbsp;(shortcut ctrl+R) and set the maximum number of object MPC object to process and or the limiting magnitude.</big></div><big><br></big><div style="text-align: left;"><big>Note
that the MPC is&nbsp;typically only interested in observations of
objects fainter then magnitude 21. &nbsp;You can check if observations
are required on this <a href="https://minorplanetcenter.net/cgi-bin/checkmp.cgi">MPC checker page</a>.
&nbsp; To observe objects fainter then magnitude 21 you will need a
very dark sky and a "fast" imaging system.&nbsp;There will be only a
few hobbyist who have such a setup and location.</big></div><p align="left"><a href="astap.htm#index">Back
          to index</a><big><span style="font-weight: bold; background-color: rgb(153, 153, 153);"><span style="font-family: monospace;"></span></span></big></p><p align="left"><big><a name="photometry"></a><big><span style="text-decoration: underline;">Photometry tab</span></big></big></p><p align="left"><img style="width: 1840px; height: 809px;" alt="" src="astap_photometry4.png"><big><big><span style="text-decoration: underline;"></span></big></big></p>
      <p align="left"><big>This
tab allows aperture photometry of one&nbsp;object (Var), a check star
and one additional star (3) in a series of
images.&nbsp;The&nbsp;buttons work the same as in the blink tab. It
also&nbsp;</big><big>detects automatically the four
        most&nbsp;variable objects.</big></p><p align="left"><big>For a positional&nbsp;and photometric report of all stars in the image see the viewer pop-up menu <a href="#positional_and_photometric_report">Star info to clipboard.</a></big></p><p align="left"><big></big></p><p align="left"><big>There are &nbsp;two method for generating a photometric rappport:</big></p><p align="left"><big>1) Manually.&nbsp; By placing manually a marker on the Var and Check star. See below</big></p><p align="left"><big>2) Automatic, by setting the check mark the option <a href="#measure_all">"measure all annotations"</a>. </big></p><p align="left"><big><a href="#positional_and_photometric_report"></a></big></p><p align="left"><big>For a manual photometric measurement do the following:</big></p><div style="text-align: left;"><big>1) Load the lights in the photometry tab.&nbsp;</big><big> Assure that a master dark and a master light are available in the
respective tabs. Or load new darks, new flat and new flat-darks in the
respective tabs.</big><br><big>2) Calibrate the lights by selecting all files (ctrl+A) and select in the pop-up menu calibrate.</big><br><big>3) Extract the green channel if you have raw, OSC (DSLR) images. </big><big>Select all files in the photometry tab and with the pop-up menu
select "Extract green channel".&nbsp;Images will be converted to new
images with
filename ending "_cal_TG.fit".&nbsp;</big><br><big>4)&nbsp;Click
        on&nbsp;<span style="background-color: rgb(153, 153, 153); font-weight: bold;">&nbsp; &nbsp; &nbsp;&#11208;<big>|</big> &nbsp; &nbsp;&nbsp;</span>&nbsp;or&nbsp; &nbsp;<span style="font-weight: bold; background-color: rgb(153, 153, 153);">&nbsp; &nbsp;&nbsp;&nbsp;</span><span style="font-weight: bold;"></span><span style="font-weight: bold; background-color: rgb(153, 153, 153);">&#11208;&nbsp; &nbsp;&nbsp;</span><span style="font-weight: bold; background-color: rgb(153, 153, 153);">&nbsp;</span> button to cycle trough the images&nbsp;&nbsp;The
        program
        will
        do the following: <br></big><div style="margin-left: 40px;"><big>Cycle 1, Find
          an astrometric solution for all selected images and write the
          solution
          to the FITS file header. </big><br><big>Cycle
2. In a second cycle, the program will identify stars in the image and
measure the&nbsp;star flux against the V50 star database. The mean
flux/magnitude factor excluding outliers will be used later to measure
the magnitude of any object in the image series. So prior to this
install and select the V50,&nbsp; Johnson-V version of the star Gaia
database provided. Or use the online database At the end of cycle 2, it
will mark the&nbsp;four most variable stars with a yellow circle. </big><br><big>Click&nbsp;on up to three stars. Violet circles labeled <span style="font-weight: bold;">Var, Check </span>and<span style="font-weight: bold;"> 3</span> will mark
          the stars. If you click twice on a stars the labels will rotate between the stars. The measured
          magnitudes of each image&nbsp;will be
          written to the file list. This complete list can be exported
          to a
          spreadsheet using the pop-up menu allowing the creation a
          magnitude curve
          over time.</big><br></div><big>5) &nbsp;</big><big>With&nbsp;<span style="font-weight: bold; background-color: rgb(153, 153, 153);">&nbsp;&nbsp;AAVSO report &nbsp;</span>
button an extended report can be generated.&nbsp;</big><big>As comparison star
always the Gaia stars are used, so select in ASTAP only the V50
database. You have to enter the designation of the Variable and Check
star.&nbsp;The report format is according the <a href="https://www.aavso.org/aavso-extended-file-format">AAVSO Extended file format</a> or BAA style . &nbsp;</big><big>The sizable also shows a magnitude curve. &nbsp;</big><big>he&nbsp;curve area has a
pop-up menu&nbsp;to&nbsp;save it to file or&nbsp;copy it to the
clipboard.</big></div><big><br></big>
      <div style="text-align: left;"><big>Notes:<br></big><big>A) <span style="font-weight: bold;">Define Bayer pattern:</span>
The green sensitive pixels of a DSLR camera have a very similar response as a
Johnson-V filter and can be reported as filter TG. So to use the green
pixels only, it is required to extract the green sensitive pixels from the raw.
The images should NOT be converted to colour by the de-mosaic routine.
To allow to extract the green pixel it is required&nbsp;to define the
correct de-mosaic pattern in ASTAP. Load a raw image in ASTAP and in
tab "Stack method" check-mark temporary option "convert OSC images to
colour". Set Bayer pattern to Auto or one of the other patterns and
test the conversion to colour with button "Test pattern". This is best
done with a terestial image to be sure. If the correct pattern is
select and the colour produced are correct then unselect the
option&nbsp;"convert OSC images to colour".</big><br><big><br></big><big>B)<span style="font-weight: bold;"> Star Database V50. </span>Check if V50 star database is selected in tab "Alignment". if it is not available download the V50 and select it.</big><br><big><br>C) For maximum accuracy it is better to&nbsp;calibrate the
        images first with
        darks,&nbsp; flats &amp; flat darks. This can be
        done&nbsp;using&nbsp;
        the "calibration only"option in tab "stack method" and then
        executing
        the regular stack procedure. <br><br></big><big>D) The measured star flux is compared and calibrated with the
        star database.
        For most cases
        you should&nbsp;install the&nbsp;V50 star database&nbsp;containing the Johnson-V
        magnitudes.&nbsp;After stopping the cycle it is possible to measure
        any
        object using the mouse pointer.<br><br></big>
        <div style="margin-left: 40px;">Note:
ASTAP uses for calibration&nbsp; up to 1000 stars from the Gaia
database.&nbsp; So all stars it can find and recognise&nbsp; in the
image with an&nbsp; SNR&gt;30.&nbsp; So the Gaia database should be the
V50 which contains the calculated Johnson-V magnitudes. The three stars
are just measured against the Gaia Johnson-V database. Only two are
required for the report. The you just need to select the variable star
and a check star. The third star (3) is just a bonus.<big><br><br></big>From the up to 1000 calibration stars any outlier star is removed
if it deviates more then 1.5 sigma from the median factor
(Gaia_star_magn - log(flux). For the remaining stars the factors
are averaged and used for flux calibration&nbsp;of the
variable and check star.. So it is a different setup then usual but there is never lack of calibration stars. <br><p>Calculation:<br>VMAG = ( VMAGINS - CMAGINS) + CREFMAG<br>equals<br>VMAG =&nbsp; VMAGINS&nbsp; + (CREFMAG- CMAGINS)</p>
    
    
    <p>For a 200 Gaia stars ensemble:<br>VMAG =&nbsp; VMAGINS&nbsp; + mean[ (CREFMAG1- CMAGINS1), (CREFMAG2-
      CMAGINS2),&nbsp;(CREFMAG2- CMAGINS2). . . . . . (CREFMAG200-
      CMAGINS200)]&nbsp;&nbsp;<br>Prior to the mean calculation the outliers of (CREFMAGx-
      CMAGINSx) values are removed above 1.5 sigma. Sigma is calculated
      from the "median absolute deviation"<span style="text-decoration: underline;">.</span><br>
    </p>
    
    
    
    <p>Same for the reported KMAG:<br>KMAG=&nbsp; KMAGINS&nbsp; + mean[ (CREFMAG1- CMAGINS1),&nbsp;(CREFMAG2-
      CMAGINS2), (CREFMAG2- CMAGINS2)......(CREFMAG200- CMAGINS200)]<br></p></div>
        <big><br>E) Alignment
        of the images is done using the astrometric (plate) solution.&nbsp;The
        astrometric
        solution is written to the original file header. You
        can refresh the&nbsp;photometric and astrometric calibration
        using the dedicated buttons for this<span style="background-color: rgb(153, 153, 153);"></span><span style="background-color: rgb(153, 153, 153);"></span>.<br><br>F) The list contains three dates:<br></big>
        
        <ul><big>
          </big><li><big><span style="font-weight: bold;">Date/time (start</span>)
            in YYYY-MM-DDTHH:MM:SS. This is date &amp; time from the
            header key
            word DATE-OBS. This is normally the universal time at the
            start of the
            exposure.</big></li><big>
          </big><li><big><span style="font-weight: bold;">JD (mid exposure)</span>
            This is the Julian Day of the exposure midpoint. This time
            is
            calculated from the key word DATE-OBS and half of the
            exposure time is
            added.</big></li><big>
          </big><li><big><span style="font-weight: bold;">HJD (helio</span>) <a href="https://en.wikipedia.org/wiki/Heliocentric_Julian_Day">Heliocentric
              Julian Day</a>
            at the exposure midpoint expressed in UTC. This is the event
            time as
            seen from the Sun center compensation the maximum  500
            seconds time
            difference depending on the positions of the Earth, the
            object outside
            the Solar system and Sun. For plotting purposes only the
            fraction is displayed.</big></li><big>
        </big></ul><big>
        To convert the Julian Day to a date and time in the
        spreadsheet, subtract&nbsp;the Julian Day by -2415018.5
        and format as date or time.<br><br>
For a series of images, the standard deviation of the measured star
magnitudes&nbsp;is typical better then 0.02 magnitudes. The standard
deviation of the Check star is used for error estimate if more then 4
images are selected. else an estimate based on the Variable SNR values
is used. The star flux values should be below saturation (65500)
&nbsp;but reasonable high.<br><br>G) Note that it is beneficial to de-focus an image a little to
        prevent
        pixel saturation and spread the flux measurement over more
        pixels. It also allows&nbsp;longer exposure times. However
        the image should reasonable focused to allow solving.</big>
        
         </div>
      <p align="left"><img style="width: 1891px; height: 845px;" alt="" src="astap_photometry.png"><br>
      </p>
      <p align="left"><big><br></big></p><p align="left"><big>The photometry pop-up menu:</big></p><p align="left"><big><img style="width: 1839px; height: 652px;" alt="" src="astap_photometry5.png"></big></p><p style="font-weight: bold; text-decoration: underline;" align="left"><big>Pop-up menu of photometry tab:</big></p><p align="left"><big><span style="font-weight: bold;">Change header keywords of selected files</span>:&nbsp;The pop-up menu has option to update a keyword of multiple files if
required. If the keyword DATE-OBS is typed then the program will
request a time shift in hours. This could be used to correct a recorded
time of observation. The old DATE-OBS is&nbsp;stored be behind a new
keyword&nbsp;for recovery but that should no be necessary.</big></p><br><div style="text-align: left;"><big><span style="font-weight: bold;">Calibrate:</span>
For maximum accuracy it is better to calibrate the images&nbsp;with
darks and flats &amp; flat-darks. </big><big>First assure that the correct "<span style="font-style: italic;">master dark</span>" is loaded in the darks tab and "<span style="font-style: italic;">master flat corrected with flat-darks</span>" is in the flat tab. If not load the darks in the dark tab,&nbsp;flats in the
flat tab and&nbsp;flat-darks in the flat-darks tab</big><big>.
Then in the photometry&nbsp;tab select all files to calibrate and
activate with the right mouse button the option "calibrate selected
files". <br><br></big><big><span style="font-weight: bold;">Extract green&nbsp;pixels.</span>
&nbsp;Select all files in the photometry tab and with the pop-up menu
select "Extract green channel".&nbsp;Images will be converted to new
images with
filename ending "_cal_TG.fit". &nbsp;The RGB pattern should be correct. Check prior in tab </big><big><a href="astap.htm#stack_menu2">stack
                  method</a></big><big>
with the "test pattern" button if the default debayer pattern
&nbsp;"auto" results in the correct result. This works best with
terrestrial images. Else select a manual de-Bayer pattern.<br></big><big><span style="font-weight: bold;"></span></big><br><big><span style="font-weight: bold;">Astrometric solutions&nbsp;</span>.
If the images are not solved yet, press button "Refresh astrometric
solutions" This is required to identify the stars for photometric
calibration against the V50 star database. If no solution are found,
check the image "Field of view (height)" in degrees in tab "alignment"
and check initial &#945;,&#948;positon in the viewer. If solving fails, got through the <a href="conditions">check list</a> for solving.<br><br></big><big><span style="font-weight: bold;"></span></big><br></div><big><br></big><p align="left"><big>
        Here an example of an exoplanet transit measured using the photometry tab:</big></p>
      <p align="left"><img style="width: 906px; height: 317px;" alt="" src="astap_transit.png"></p>
      <p align="left"></p>
      <p align="left">A demonstration is available at&nbsp;YouTube:</p>
      <p style="margin-left: 40px;" align="left"><a href="https://www.youtube.com/watch?v=4orWemJYzMw&amp;feature=youtu.be">Measure
          variable stars</a></p>
      <br>
      <p align="left"><big><a name="transformation"></a><span style="font-weight: bold;">Transformation</span></big></p><p align="left"><big>Transformation will only work for images from:</big></p><ul style="text-align: left;"><li><big>A mono camera using a Johnson-V filter.</big></li><li><big>Green channel called extract (TG) of &nbsp;a raw image from a DSLR/OSC camera.</big></li></ul><p align="left"><big></big></p><p align="left"><big>The photometry tab has on the far right a button a button&nbsp;</big><big><span style="background-color: rgb(153, 153, 153);">Transformation (auto)&nbsp; </span>.
This button works on the image in the viewer and tries find the
"observation difference from the standard caused by the colour
difference between the variable and comparison star".</big></p><p align="left"><big>If the colour of the variable is the same as the

comparison star, the delta magnitude does not require a correction. But
if the comparison start is bluer or redder could cause a magnitude
offset from the standard. This offset often&nbsp;called the slope needs to
measured to achieve maximum accuracy. Ideally the slope is none.</big></p><p align="left"><big>After
pressing this button ASTAP will measure the magnitude of &nbsp;hundreds of
stars in the viewer image and compare them with the corresponding Johnson-V and
Johnson-B magnitudes calculated from the online Gaia database. The mean
slope caused by B-V &nbsp;value will be calculated.</big></p><p align="left"><img style="width: 1529px; height: 133px;" alt="" src="astap_photometry7.png"></p><br><div style="text-align: left;"><big>It will report the slope as follows:</big></div><p align="left">18:54:26&nbsp;
Slope is -0.295. Calculated required absolute transformation
correction&nbsp; &#8710; V = 0.259 + -0.295*(B-V). Standard deviation of
measured magnitude vs Gaia transformed for stars with SNR&gt;40 and
without B-V correction is 0.352<br></p><p align="left"><big></big></p><p align="left"><big>The slope (-0.295) will be added the the AAVSO report menu. The&nbsp;</big><big>B-V
difference between the Var (target) and Check star has to be entered
manually. This will correct the measured variable magnitude of the Var
(target) star with a value</big></p><p align="left"><big>&nbsp;</big><span title="Greek-language text"><span lang="el"> Vreported = Vorg + slope *&nbsp;</span></span><span title="Greek-language text"><span lang="el">&#916;(B-V)</span></span></p><p align="left"><big><br></big></p><p align="left">Note
it is also possible to calculate the slope manually using the viewer
pop-up menu "Star info to clipboard". &nbsp;This will menu will report
all the measured star magnitudes and the transformed Gaia Johnson-V and
Johnson-b mangitudes.&nbsp;</p><p align="left">Example of the manual calculation of the slope using "Open Office spreadsheet":</p><p align="left"><img style="width: 548px; height: 539px;" alt="" src="astap_photometry6.png"><big> </big></p><p align="left"><a name="measure_all"></a><big><span style="font-weight: bold;">Automatic photometry. Measure all stars with annotations</span></big><br></p><p align="left"><img style="width: 1704px; height: 455px;" alt="" src="astap_photometry9.png"></p><div style="text-align: left;"><big>If
the check-mark "measure all annotated" in tab photmetry is set, then
the magnitude of all annotated variables and check stars will be
measured </big><big>by clicking on the&nbsp;</big><big><span style="background-color: rgb(153, 153, 153); font-weight: bold;">&nbsp; &nbsp; &nbsp;&#11208;<big>|</big> &nbsp; &nbsp;</span> </big><big>
button </big><big>.&nbsp;The data will
be reported in new columns to the right side of the&nbsp;photometry tab. The positions are taken from&nbsp;the&nbsp;</big><big>AAVSO VSX or VSP database.&nbsp;</big><big>&nbsp;</big></div><p style="text-align: left;"><big>Once
measured&nbsp;any of the measured Var and Check stars can be selected in the
comboboxes of the AAVSO report window.Alternatively you could&nbsp;copy all data
to a spreadsheet by ctrl-A (select all
rows) and ctrl+C (copy ) and paste it into a spreadsheet for further
processing.</big></p><p align="left"></p><p align="left"><big>Below an example of the available variables in one image:<span style="font-weight: bold;"></span></big></p><p align="left"><img style="width: 1389px; height: 669px;" alt="" src="astap_photometry10.png"><big><span style="font-weight: bold;"></span></big></p><br><div style="text-align: left;"><a href="astap.htm#index">Back
          to index</a></div><p align="left"></p><p align="left"><big><span style="font-weight: bold;"><a name="asteroid_magnitude"></a>Measuring the magnitude of asteroids</span></big></p><p align="left"><big>It is possible to measure the magnitudes of moving minor planets/asteroids.&nbsp;To
make it run you first have to add asteroid annotations to all files. Go
to the viewer menu Tools, <a href="astap.htm#batch_processing">Batch processing</a> and execute menu "Add asteroid and comet
annotation" for all files. The asteroids will be added as annotations in the FITS header.</big></p><p align="left"><big>Then in tab photometry, select all files,
click on the first file to plot. If the asteroid is not visible, switch on in the viewer pull down menu, "<a href="astap.htm#viewmenu">View</a>",
"Annotations visible". Then click on the asteroid to place
the Var purple marker on the asteroid. This should generate a log
measurement "Lock on ...." Then&nbsp;click on two reference stars to
place the purple markers Check and 3. Then click on the&nbsp;</big><big>&nbsp;<span style="background-color: rgb(153, 153, 153); font-weight: bold;">&nbsp; &nbsp; &nbsp;&#11208;<big>|</big> &nbsp; &nbsp;</span> button</big><big> to cycle once through the images. The columns for the magnitudes should be filled slowy.&nbsp;</big></p><p align="left"><big>Finally presss on the AAVSO button for a report.&nbsp;</big></p><br><p align="left"></p><div style="text-align: left;"><big>When the asteroid moves, only the annulus will folllow. The pink circle will be stationary:</big></div><p align="left"><img style="width: 646px; height: 688px;" alt="" src="astap_photometry8.png"></p><div style="text-align: left;"><span style="font-family: Arial;"></span><br><a href="astap.htm#index">Back
          to index</a></div><p style="text-align: left;"></p><div style="text-align: left;"><span style="text-decoration: underline;"></span><br><span style="text-decoration: underline;"></span><big><a name="inspector_tab"></a><span style="text-decoration: underline;">Inspector tab.<br><br></span></big><big>This
tab is intended to measure accurately the tilt and curvature of your
telescope &amp; camera setup. It's done by calculating the best focus
position for each image area. To do this it requires a series of images
taken at several focuser positions.The routine will calculate from
these images the best focus point of each&nbsp;area. It will measure
the median HFD values of each image and area and build a table HFD as
function of the focuser position. Form this data, curve fitting will
give the transfer fucntion and the best focus position expressed in
focuser steps. The focus point differences between the image areas will
indicate the tilt of each area. The&nbsp;difference between the centrum
and outer areas focus point will indicate the curvature.<br></big><big><span style="text-decoration: underline;"><br><img style="width: 1869px; height: 964px;" alt="" src="astap_inspector_tab1.png"><br></span><br></big><p><big>
	The usage is as follows:
</big></p>

<ul><li><big>
		Prepare a series of short exposure images with different focuser 
positions and a lot of stars. Exposure time a few seconds. Move for each
 image the focuser a small fixed step but only in one way to prevent backlash 
problems. Images with stars having an hfd above 20 will not be 
analysed correctly.
	</big></li><li><big>
		Browse with ASTAP inspector tab&nbsp;to the images.
	</big></li><li><big>
		Press&nbsp;curve fitting.</big></li><li><big>The difference between the focus point of each image area will be reported in focuser steps.</big></li></ul><big><span style="text-decoration: underline;"></span></big><br><big>The reported hfd values can be selected and copied for further analysis in a spreadsheet.<br><br><br>The image areas "HFD center" 2B (purple) and "HFD out" (any star at more then 75% from center)&nbsp;are as followed defined:<br><br><img style="width: 514px; height: 389px;" alt="" src="astap_hfd_areas.png"><br><br></big><br><big>In addition the HFD values of the other eight areas are reported.</big><br><br><br><br><big><span style="text-decoration: underline;"></span></big><a href="astap.htm#index">Back
          to index</a></div><p style="text-align: left;"></p><p align="left"><br><span style="text-decoration: underline;"></span><big><a name="mount_tab"></a><span style="text-decoration: underline;">Mount analyse tab.<br></span></big></p><p align="left"><big>This
tab is intended to study:</big></p><ol style="text-align: left;"><li><big>Mount&nbsp;pointing accuracy</big></li><li><big>Polar alignment error</big></li><li><big> Pier stability. &nbsp;</big></li></ol><p align="left"><big style="font-weight: bold;"></big></p><p align="left"><big style="font-weight: bold;">Mount&nbsp;pointing accuracy</big><big><span style="font-weight: bold;">:</span>
take several images at different location in the sky. Load the images
in the tab.&nbsp;Click on the button to add the
astrometric solutions. Click on the button analyse.&nbsp;</big><big>To analyse the result in a spreadsheet, select all
rows (ctrl+A), copy (ctrl+C) and paste them into a spreadsheet for further
analysis.</big><br><br></p><big style="font-weight: bold;"></big><div style="text-align: left;"><big style="font-weight: bold;">Polar alignment error</big><big><span style="font-weight: bold;">:</span>
take two&nbsp;images at different locations in the sky. Load the images
in the tab.&nbsp;Click on the button "calculate polar error". Polar error will be reported in the log.</big></div><p align="left"><big><span style="font-weight: bold;"> Pier stability:</span>&nbsp;<span style="font-weight: normal;">Stop tracking of the mount and take images for several hours from&nbsp;a fixed position of the sky.&nbsp;</span></big><big>&nbsp;Click on the button to add the
astrometric solutions. Click on the button analyse. </big><big><span style="font-weight: normal;">When the stability is perfect the azimuth (A Jnow []) and altitude (h</span></big><big><span style="font-weight: normal;"> Jnow []) </span></big><big><span style="font-weight: normal;">should be stable within one arcsecond or less. Perfect stability is likely only to be achieved by a telescope mounted </span></big><big><span style="font-weight: normal;">directly </span></big><big><span style="font-weight: normal;">to a stable pier or wall. </span></big><big>To analyse the result in a spreadsheet, select all
rows (ctrl+A), copy (ctrl+C) and paste them into a spreadsheet for further
analysis.</big></p><p align="left"><big></big></p><p align="left"><big>The images shall be of FITS or Astro-TIFF format with the mount </big><big>&#945;, &#948;&nbsp;</big><big>position in the header. This is normal the case. Keywords required RA, DEC or OBJCTRA, OBJCTDEC.&nbsp;</big></p><p align="left"><big>The solution can be written either in the original FITS file or in a separate .wcss file.</big><br></p><p align="left"><big><img style="width: 2217px; height: 721px;" alt="" src="astap_mount_tab.png"></big></p><p align="left">1) &nbsp;Image central position in equinox J2000</p><p align="left">2) Mount position in equinox J2000</p><p align="left">3) Difference between mount and image position in arc seconds.</p><p align="left">4)
&nbsp;Image apparent central position in equinox Jnow. The position is
corrected for annual aberration and nutation but not for refraction.</p><p align="left">5)
Mount apparent position in equinox Jnow.&nbsp;The position is corrected
for annual aberration and nutation but not for refraction.</p><p align="left">6) Altitude of the image central position.&nbsp;The position is corrected for annual aberration and nutation and refraction.</p><p align="left">7) Azimuth of the image central position. The position is corrected for annual aberration and nutation and refraction.</p><p align="left">8) Rotation of the image for Jnow. So the angle relative to a vector pointing to the Jnow celestial pole.</p><p align="left">9) Focuser or ambient temperature. Used for the refraction calculation.</p><p align="left">10)
Atmospheric pressure in hPa/mBar used for refraction calculation. FITS
header keyword &nbsp;shall be PRESSURE or AOCBAROM. For any different keyword,
rename them to PRESSURE using the pop-up menu. </p><a href="astap.htm#index"></a><p align="left"><a href="astap.htm#index">Back
          to index</a></p><p align="left"></p><p align="left"><a href="astap.htm#index"></a></p>
      <div style="text-align: left;">
      <big><a name="live_stacking"></a><span style="text-decoration: underline;">Live stacking tab.<br><br></span></big>All file(s) in the specified directory will be stacked live. If it is finished 
it will wait for new file(s). If a file is detected which is 0.2
away from the previous files a new stack will be started 
automatically. You can save the stack results from the viewer menu .<br>
<br>To identify  files which are processed , they are renamed to the 
extension *.fts. You can rename them back with the button at the bottom.<br><br><big><span style="text-decoration: underline;"><img style="width: 1499px; height: 723px;" alt="" src="astap_live_stacking1.png"><br><br></span>Note there is no rejection of poor images. All images are added with equal influence:<br><br>Assuming the images are A,B,C,D, E... then<br><br>Simple serial stacking:<br><br>result1:=A<br>result2:=(result1+B )/2<br>result3:=(result2*2+C)/3<br>result4:=(result3*3+D)/4<br>result5:=(result4*4+E)/5<span style="text-decoration: underline;"><br><br><br></span></big><a href="astap.htm#index">Back
          to index</a><br><big><span style="text-decoration: underline;"></span></big></div>
      <p align="left"></p><p align="left"><big><a name="monitoring"></a><span style="text-decoration: underline;">Monitoring</span> &nbsp;</big></p><p align="left"><big>With this tab it is possible&nbsp;to monitor a specific directory for any new file.&nbsp;Any
new file will be loaded in the viewer. After loading an optional action
like "Tilt &amp; HFD measurement" and "Solve image" can be executed. You could use this tab
for monitoring&nbsp;the tilt adjustment&nbsp;progress or focus drift while taking images.&nbsp;</big></p><p align="left"><big>The
action "Solve image" could be a useful option for users with a basic
mount without encoders and a camera mounted on the&nbsp;telescope. An
acquisition program like CCDCiel, Nina or APT can take continuous
images with an exposure time of a few seconds. The saved images will be
automatically loaded in the ASTAP viewer and solved. If a target or a
position is specified the following information will be displayed.</big></p><p align="left"><img style="width: 1351px; height: 719px;" alt="" src="astap_monitoring.png"></p><p align="left"><big>The
sensor and arrow indicators are orientated for the azimuth &amp;
altitude. So up/down are in altitude. Left, right are in azimuth.</big></p><p align="left"><big></big></p><p align="left"><big>In the ASTAP viewer the user
could select under menu View an additional &#945;,&nbsp;&#948; grid or constellations overlay.<br><br></big></p><br><p align="left"><a href="astap.htm#index">Back
          to index</a><br><big><span style="text-decoration: underline;"></span></big>
      </p><p align="left"><big><br></big></p><p align="left"><big><a name="pixel_math"></a><span style="text-decoration: underline;">Pixel math1 tab.</span><br>
        </big><big><span style="text-decoration: underline;"><span style="font-weight: bold;"></span></span></big></p>
      <p align="left">&nbsp;Several options including
        background equalising.</p><p align="left"><img style="width: 1551px; height: 636px;" alt="" src="astap_pixelmath1.png"></p>
      <p align="left"><big><a name="background"></a><span style="font-weight: bold;">Background
          equalization tool:</span></big><br>
        </p><p align="left"><big>Powerful tool to remove a gradient. Follow steps 1 to 6. &nbsp;</big></p><p align="left"><big>For
step 2) pull a rectangle around deepsky objects/bright star&nbsp; and
select mouse pop-up menu "Remove deepsky object (Oval shape) This will
remove the object allowing to create a smooth background. This
background will be subtracted from the orginal image.</big></p><p align="left"><big>Step 6) will save the image with&nbsp;a new file name ending with "equalised" . The same as 1) and needs to be overwritten.</big><br></p><p align="left">
      </p>
      <p align="left"><a href="astap.htm#index">Back
          to index</a></p><p align="left"></p><p align="left"><big><a name="pixel_math2"></a><span style="text-decoration: underline; font-weight: bold;">Pixel math2 tab.</span></big></p><p align="left"><img style="width: 1551px; height: 636px;" alt="" src="astap_pixelmath2.png"><big><span style="text-decoration: underline; font-weight: bold;"></span></big></p><p align="left"><big><span style="text-decoration: underline; font-weight: bold;"></span>
        </big><big><span style="text-decoration: underline;"><span style="font-weight: bold;"></span></span></big></p><div style="text-align: left;"><span style="font-weight: bold; text-decoration: underline;"><a name="streak_filter2"></a><big>Pixel math 2, streak filter</big></span><big><br><br>This
is the test area for&nbsp;"satellite streak detection"&nbsp;It will be
used in <a href="#lights_tab">tab lights</a> for "Analyse and organise images +" to display the
number of satellite streaks in each image. &nbsp;It has three settings:<br><br><span style="font-weight: bold;">Gaussian blur:</span> This is a blur which is applied for contour tracing. Typically set at 1.<br><br><span style="font-weight: bold;">&#963; factor:</span>
This is the sensitivity factor of the&nbsp;detection. The pixels which
are this factor above the background noise are seen as signal. A
typical value is 2. A lower value will make it&nbsp;more sensitive.
Higher value is less sensitive.<br><br><span style="font-weight: bold;">Detection grid</span>:
This is the distance between the grid lines, Grid lines are used to
minimise the number of pixels to&nbsp;test.&nbsp;&nbsp;Each streak will
pass a horizontal or vertical grid line and full line detection will
follow. By testing the grid only the detection routine will be faster.
Typical setting is 200 or 400 pixels grid spacing.</big><br><br></div><p align="left"><img style="width: 1225px; height: 592px;" alt="" src="streak_detection1.png"></p><p align="left"></p><p align="left"></p><p align="left"><a href="astap.htm#index">Back
          to index</a></p>
      <div style="text-align: left;"></div>
      <p align="left"><big style="font-weight: bold;"><a name="export_data"></a>Export
          FITS data to a spreadsheet</big><span style="font-weight: bold;">:<br>
          <big><br></big>
        </span><big>To
        analyse the relation between the HFD value, focuser position,
        temperature and altitude it is possible to copy the data from a
        FITS&nbsp;image list to the operating system clipboard.<br><br>
        Just
        select a number of images, click on the <span style="background-color: rgb(153, 153, 153);"><big> &nbsp;Analyse</big>&nbsp;&nbsp;</span> button. Then
        select all
        relevant files and copy the data with right mouse button. Then
        copy the
        data into a spreadsheet for analysis.</big>
        <br>
        <br>
        <img style="width: 1905px; height: 605px;" alt="" src="astap_export_data.png"><br>
        <br>
        <br>
        <br><big>
        Here and example of the result in a spreadheet:</big><span style="font-weight: bold;"><br>
          <img style="width: 1050px; height: 818px;" alt="" src="astap_focus_trend.png"><br>
          <br>
        </span><a href="astap.htm#index">Back
          to index</a><a href="astap.htm#index"><br>
        </a></p>
      <br>
      <p style="font-weight: bold; text-decoration: underline;" align="left"><big><big><a name="viewer"></a>Viewer:</big></big></p>
      <div style="text-align: left;"><img style="width: 1416px; height: 756px;" alt="" src="astap_stacking.jpg"><br><br><big>The
reported noise indicated by letter &#963; is in ADU. The value can be
reported in electrons (e-) by setting the option in the status bar
pop-up menu. See other <a href="#otherpopup">pop-up menus</a>.<br><br><br></big><big><span style="font-weight: bold; text-decoration: underline;"><a name="viewer_angle"></a>Viewer,&nbsp; reported angle<br><br></span>If
the image the image&nbsp;is solved then the orientation will be
reported by a north-east indicator. </big><big>The
reported angle is between the north arrow and&nbsp;the Y axis
counterclockwise (rotate east from north) except when the image is
flipped. For flipped images it is clockwise (rotate east of north).
&nbsp;So for both flipped and unflipped images it is the angle
reported&nbsp;between Y-axis and north arrow in the direction north to
east.<br><br></big><big>A flipped image doesn't represent nature. The
flipping (either horizontal or vertical)&nbsp;is caused by the camera
system and will change the position of the north arrow.</big><big>
Nature has not changed so to report the correct angle the
image&nbsp;has to be unflipped&nbsp;first. You can either unflip it
vertical or horizontal but ASTAP is standard unflipping horizontal.<br></big><big><br>The same angle is reported in the header as keyword CROTA2. &nbsp;</big><big>So the angle for flipped images is reported as if the image is "unflipped horizontal".</big><br><br>Header values:<br><big><br><img style="width: 592px; height: 270px;" alt="" src="astap_angle_reporting.png"><br></big><big><span style="font-weight: bold; text-decoration: underline;"></span></big><br>Note
about the header: Old style solution keyword CDELT2 is always kept
positive and if not the solution is flipped by negating both CDELT2,
CDELT2 and shifting the angle 180 degrees. So if the image is flipped
the solution&nbsp;is reporting "flipped horizontal" and not an
equivalent "flipped vertical". The old style solution is in principle
replaced by CD keywords.<br><br>To get a rotation angle for a flipped image,&nbsp; programmers could do the following:<br><br><span style="font-family: Courier New,Courier,monospace;">if CDELT1*CDELT2&gt;0 then </span><br style="font-family: Courier New,Courier,monospace;"><span style="font-family: Courier New,Courier,monospace;">&nbsp; &nbsp;rotation:=-CROTA2 //flipped image</span><br style="font-family: Courier New,Courier,monospace;"><span style="font-family: Courier New,Courier,monospace;">&nbsp;else</span><br style="font-family: Courier New,Courier,monospace;"><span style="font-family: Courier New,Courier,monospace;">&nbsp;&nbsp; rotation:=CROTA2</span><br><br>or<br><br><span style="font-family: Courier New,Courier,monospace;">if&nbsp;CD1_1*CD2_2 - CD1_2*CD2_1&gt;0 then </span><br style="font-family: Courier New,Courier,monospace;"><span style="font-family: Courier New,Courier,monospace;">&nbsp; &nbsp;rotation:=-CROTA2 //flipped image</span><br style="font-family: Courier New,Courier,monospace;"><span style="font-family: Courier New,Courier,monospace;">&nbsp;else</span><br style="font-family: Courier New,Courier,monospace;"><span style="font-family: Courier New,Courier,monospace;">&nbsp;&nbsp; rotation:=CROTA2<br></span><br>or<span style="font-family: Courier New,Courier,monospace;"><br><br>if (cd1_1*cd2_2-cd1_2*cd2_1)&gt;=0 then sign:=+1 else sign:=-1;<br></span><span style="font-family: Courier New,Courier,monospace;">rotation</span><span style="font-family: Courier New,Courier,monospace;">:= -arctan2(cd2_1,sign*cd1_1)*180/pi;//arctan2 returns arctangent of (y/x)<br><br></span><br>Rotation of camera is reported as follows:<br><br><img style="width: 1225px; height: 621px;" alt="" src="astap_angle_reporting2.png"><br><br><br><big><br></big>
        <a href="astap.htm#index">Back to index</a><br><br><br>
        <span style="font-weight: bold;"></span></div>
      <div style="text-align: left;"><big><span style="font-weight: bold; text-decoration: underline;"><a name="viewer_filemenu"></a>Viewer,&nbsp; file menu</span><br><br>If
          the program is associated with&nbsp;FITS image files or any
          other
          format, it
          will show the image as soon you click image file. Only one
          instance of
          ASTAP will be allowed. After clicking on the second image it
          will be
          show in the first instance of ASTAP. If you want to open a
          second
          instance, just start ASTAP. If the program is started without
          parameters, you can open more instances.<br><br>Images can be loaded from the file menu or can be drag dropped on the main form.<br>
          <br>
          Besides
          all FITS formats, the viewer support most image formats in
          8/24 bit of
          16/48 bit format. It can export to any FITS format and 16/48
          bit PNG
          and TIFF formats.<br></big><big>ASTAP
can display images and tables of MEF, multi-extension FITS. The images
of MEF can be saved as a single image. The MEF tables can copied into
the clipboard and paste to a spreadsheet. (v</big><big>0.9.446) </big><br><big><br>
          <br>
        </big>This
ASTAP version can import&nbsp;raw images from almost any digital
camera, For this ASTAP executes a modified&nbsp;Libraw tool&nbsp;
"unprocessed_raw" which is included with the ASTAP for most editions.
This special version export directly to FITS including date&amp;time,
Bayer pattern and active areas of the sensor only.&nbsp; If
"unprocessed_raw" is not included it can be installed in Linux by the
"sudo apt-get install libraw-bin" command.&nbsp; <br><br><table style="text-align: left; width: 914px; height: 172px;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td>File formats ASTAP</td><td style="font-weight: bold;">8 bit</td><td style="font-weight: bold;">16 bit</td><td style="font-weight: bold;">32 bit</td></tr><tr><td><span style="font-weight: bold;">Import</span></td><td>FITS, JPEG, PNG, TIFF</td><td>FITS,&nbsp;PNG, TIFF, PPM, PGM,&nbsp;raw formats</td><td>FITS,&nbsp;PFM</td></tr><tr><td><span style="font-weight: bold;">Export</span></td><td>FITS, JPEG, PNG, TIFF</td><td>FITS,&nbsp;PNG, TIFF (<a href="astro-tiff.htm">ASTRO_TIFF</a>), PPM, PGM</td><td>FITS,&nbsp;TIFF, PFM</td></tr></tbody></table><br>
        <big><br>
          <a name="viewer_preview"></a>The
viewer has a preview function. After opening select "Preview FITS
files". The preview is displayed in the ASTAP viewer. Use the arrow key
to move up or down or just click on the image. The current zoom and
position is maintained so you could study the corner of a series images
on image quality.<br>
          <br>
          The file open menu with preview selected:<br>
        </big><big><img style="width: 1233px; height: 692px;" alt="" src="astap_preview.png"><br>
          <br>
        </big><a href="astap.htm#index">Back to index</a><br><br>
        <div style="text-align: left;">
          <p align="left"><span style="font-family: Arial;"><span style="font-weight: bold; text-decoration: underline;"><a name="thumbnail"></a></span></span><span style="font-family: Arial;"><span style="text-decoration: underline;"></span></span><big style="text-decoration: underline;"><span style="font-weight: bold;">Viewer,&nbsp; file menu, </span></big><big style="font-weight: bold; text-decoration: underline;">thumbnail
                viewer for
                FITS files</big></p>
          <br>
          ASTAP&nbsp;has
          a FITS thumbnail viewer (ctrl-T). This could be useful to
          browse your
          FITS files. By clicking on the thumbnail it will be opened in
          the
          viewer. With a right mouse button click some options are
          available as
          changing directory, copy, move, rename or rename to *.bak. <br>
          <br>
          The
          thumbnail size is depending on the form size. Make it larger,
          the
          thumbnails will follow. Thumbnails are organized in 3*X. So
          the
          thumbnails are pretty big by purpose. The images are fully
          loaded in
          memory so it will consume some memory and time. So don't try
          get
          thumbnails of 400 images.<br>
          <br>
          <img style="width: 590px; height: 522px;" alt="" src="astap_thumbnails.jpg"><br>
          <br>
          <br>
          <a href="astap.htm#index">Back to index</a></div>
        <br>
        <big><br>
          ASTAP viewer screen shot:</big><br>
        <img style="width: 1464px; height: 740px;" alt="" src="astap_viewer.jpg"><br>
        <br><br><br><big style="font-weight: bold;"><big>Viewer menu Tools:<br><br></big></big>
        <br>
        <span style="font-weight: bold;"><a name="viewer_solve"></a><big style="text-decoration: underline;">Viewer, tools, Astrometric
solving
            the image in the viewer</big><br>
          <br>
          &nbsp;&nbsp; <br>
        </span><big>With
          the&nbsp;</big><span style="background-color: rgb(153, 153, 153);"><big> &nbsp;Solve|</big>&nbsp;&nbsp;</span><big> button it is possible to find an astrometric
          solution of the
          image loaded. For this&nbsp;the estimated celestial center
          position
        </big><span class="st"><big><big><em style="font-weight: bold;">&#945;</em><span style="font-weight: bold;">,&nbsp;&#948;</span></big></big>
        </span><big>should
          be available. This position is normally retrieved from the
          FITS header.
          Secondly the estimated image height in degrees should be
          specified in
          the stack menu, <a href="#alignment_menu">tab alignment</a>.
          &nbsp;In the same tab alignment you can specify the search
          radius
          and down sampling. For successful solving see <a href="#conditions">conditions
            required for solving</a>. <br>
          <br>
          For solving JPG, PNG or RAW files it is possible to add the


          object
          position as center position using the deep sky database.
          Double click
          on the</big><span class="comment-copy"></span><span class="st"><big><big> &#948; </big></big></span><big>position in
          viewer and enter the object name. The position will be
          retrieved from
          the database.&nbsp;This position will be used as a start point


          for
          the solver. <br>
          <br>
          <img style="width: 814px; height: 267px;" alt="" src="astap_retrieve_position.png"></big><br>
        <br>
        <a href="astap.htm#index">Back to index</a><br><br>
        <br>
        <big><span style="text-decoration: underline;"></span></big><a href="astap.htm#index"></a><br><br><p style="font-weight: bold;" align="left"><big><a name="batch_processing"></a></big><big style="font-weight: bold;"><span style="text-decoration: underline;">Viewer, Tools, Batch processing</span></big><big>:</big></p>
      <p align="left"><big>With the batch routine
          several&nbsp;FITS image
          can be
          "astrometric solved" or converted. This conversion is not required for ASTAP. Automatic conversion
        is
        integrated in the menus.</big></p><img style="width: 942px; height: 593px;" alt="" src="astap_batch_processing1.png"><br><br><big>The functions "<span style="font-weight: bold;">Batch solve FITS &amp; TIFF</span>" images and "<span style="font-weight: bold;">Batch measure tilt and store to header keyword TILT</span>" allow adding new values to the header. The can be reported in<a href="#lights_tab"> tab lights</a> by setting the&nbsp;<a href="#config_column">configurable last column</a> to the desired header keyword. Once the images <a href="#lights_tab">tab Lights</a> are analysed then the data can be selected &amp; copied and pasted to a spreadsheet for further use.</big><br><br><br><br><br>
        <a href="astap.htm#index">Back
          to index</a><br><br>
        <br>
        <big style="text-decoration: underline;"><span style="font-weight: bold;"><a name="inspector"></a>Viewer, tools, Image inspection<br><br><img style="width: 665px; height: 302px;" alt="" src="astap_image_inspection.png"><br></span></big>
        <br>
        T<big>his
menu is direct accessibly by F5. The tilt button can be activated by
F4.&nbsp; It will show default an octagon based on the median HFD
values of the stars in nine areas of the image. This will visualise any
problem in the imaging system like</big><big>&nbsp;sensor tilt and curvature</big><big>. There are some other inspection options available like roundness (F3) and aberration inspector (F6).<br><br>
        The
        image used for testing should&nbsp;be a single raw image
        with&nbsp;sufficient stars and not containing&nbsp;a disturbing
        large
        and bright deep sky object. &nbsp;The exposure length should be
        long

        enough to image many stars but not too long avoiding star
        saturation.<br><br>
        The routine will detect and annotate the stars with their measured HFD
        value and
        plot a tilt indicator in the image. A star rich image containing a few hunderd stars or more gives the best accuracy.
        </big>
        
        <p><big>The following will be reported:
        </big></p>
        <ul><li><big>Image <strong>median hfd</strong> which is an
            excellent indicator of the quality of focusing. The lower
            the value the
            better the focusing, the sharper the stars are. The value is
            also
            depending on the astronomical seeing and the quality of the
            optics. If the image is solved it will also be indicated in arc seconds. </big></li><li><big><strong>Sensor tilt</strong> as the
            HFD difference between the best and worst corner
            median
            values. In addition as an graphical indication it draws an
            trapezium in
            the image based on the four median values.<br>
There can be some variation in images of the same series. Any tilt
equal or less then 10% of the range is a good value. Any tilt equal or
more then 20% of the range indicates a tilt problem.&nbsp;&nbsp; </big></li><li><big><strong>Off-axis abberation</strong>
as the delta between the HFD value in the center and in the outer areas
of the image. The stars in the outer area are normally a little larger,
oval or comet shaped due to the optics or curvature giving an higher
HFD value. The lower this value the better the optics. This value could
&nbsp;be a help to adjust the optimal distance between the field
flattener and the camera. This measurement is only a valid if the focus
for the center area is perfect. A more advanced measuring
method&nbsp;is available in <a href="astap.htm#inspector_tab">tab CCD Inspector</a>.</big></li></ul><big></big><big></big>
        <a name="curvature"></a><br><big>It is possible to automate the loading and tilt measurement using tab&nbsp;<a href="astap.htm#monitoring">monitoring</a>&nbsp; <br><br></big><big>An
irregular octagon figure is displayed using the median HFD value of
eight areas. If your optics is good and there is hardly any tilt or
curvature the figure will form a square:. The yellow values indicate
the median HFD values of nine square areas:</big><br><br><big>The figure of a good optical system:</big><br>
        <img src="astap_ccd_inspector.jpg" alt="" style="width: 878px; height: 666px;"><br><br><br><big>A system suffering from severe curvature:<br><img style="width: 880px; height: 666px;" alt="" src="astap_ccd_inspector2.jpg"><br></big><big><br>A system with severe tilt:<br><img style="width: 879px; height: 665px;" alt="" src="astap_ccd_inspector3.jpg"><br></big><br><big>It is possible to automate the loading and tilt measurement using tab&nbsp;<a href="astap.htm#monitoring">monitoring</a>&nbsp; <br><br></big><br><big>CCD inspector c</big><big>alculation method explained:<br><br></big><div style="margin-left: 40px;"><big>HFD<sub>out</sub> =&nbsp;median HFD value of all stars&nbsp;75% or more distance from center. </big><big>(100% is the distance to&nbsp;a corner.)</big><br><big><br></big><big>HFD<sub>center</sub> =&nbsp;&nbsp;median(HFD<sub>area 2B</sub>)<br><br>The OFF axis aberration = HFD_out - HFD_center</big><br></div><br><br><big>The tilt is calculated as follows:<br><br></big><big></big><br><div style="margin-left: 40px;"><big>HFD<sub>best</sub> = min(HFD<sub>area 1A</sub>, HFD<sub>area 3A</sub>, </big><big>HFD<sub>area 1C</sub>, HFD<sub>area 3C</sub>)</big><br><br><big>HFD<sub>worst</sub> = max(HFD<sub>area 1A</sub>, HFD<sub>area 3A</sub>, </big><big>HFD<sub>area 1C</sub>, HFD<sub>area 3C</sub>)</big><br><br><big>Tilt [HFD] = </big><big>HFD<sub>worst</sub></big><big>&nbsp;- HFD<sub>best </sub></big><big>&nbsp; &nbsp; &nbsp; (of the corners) <br>Tilt [%] = 100% * (</big><big>HFD<sub>worst </sub></big><big>&nbsp;- HFD<sub>best </sub></big><big>) / HFD<sub>median</sub></big><big> &nbsp;&nbsp; (note that the percentage scale is more dependent on focus)</big><br></div><br><p><big>The tilt scale is defined as follows:</big></p>

<p style="margin-left: 40px;"><big>None (0 to 5% tilt)</big></p>
<p style="margin-left: 40px;"><big>Almost none (5 to 10% tilt)</big></p>
<p style="margin-left: 40px;"><big>Mild (10 to 15% tilt)</big></p>
<p style="margin-left: 40px;"><big>Moderate (15 to 20% tilt)</big></p>
<div style="margin-left: 40px;"><big>Severe (20 to 30% tilt)<br><br>Extreme (&gt;30% tilt) <br></big></div><big><br><br></big><big><img style="width: 514px; height: 389px;" alt="" src="astap_hfd_areas.png"><br><br></big><big><br></big><big><span style="text-decoration: underline;">Triangle:</span> The triangle based tilt indication </big><big>is intended for adjusting your tilt adapter with three adjustment screws.
First solve an image, then flip the image in the viewer such that north
is up and east is left (northern hemisphere). Then apply the adjustable three corner&nbsp;angle such
that the orientation of the adapter screw matches with the three
corners show. You can click on the tilt button without refresh.<br></big><br><big>The triangle based tilt indication is based on the following three areas:<br><br><img style="width: 257px; height: 219px;" alt="" src="astap_3point_tilt_calculation.png"><br><br></big><big><br>The
triangle option measures in an circular area with a diameter
equals the image height. This&nbsp;area is split in three equal 120 degrees segments.
The center is excluded.<br></big><br><big>It is possible to automate the loading and tilt measurement using <a href="#live_stacking">live stacking</a><br><br>For the triangle the off-axis aberration calculation is as follows:<br><br></big><div style="margin-left: 40px;"><big>HFD_out =&nbsp;median HFD value of all stars 75%&nbsp;or more from center. (100% is the distance to&nbsp;a corner.)</big><br><br><big>HFD_center =&nbsp;&nbsp;</big><big>median HFD value of all stars within 25%&nbsp;from center. </big><br><br><big>The OFF axis aberration = HFD_out - HFD_center</big><br></div><big><br>The tilt calculation:<br><br></big><div style="margin-left: 40px;"><big>Best HFD value = min(HFD area 1, HFD area 2, </big><big>HFD area 3)</big><br><br><big>Worst HFD value = max(HFD area 1, HFD area 2, </big><big>HFD area 3)</big><br><br><big>Tilt = </big><big>"Worst_HFD value" minus&nbsp;"</big><big>Best HFD value" </big><br></div><big><br><br>The
diameters of the areas 1,2 and 3 are equal to the distance to the
longest side of the image.&nbsp;The triangle option is less sensitive
then the octagon method but the areas are symmetrical so the
orientation can be adapted without changing the sensitivity.<br><br><br><br></big>
<p><big>Normally the tilt indication uses stars with a signal to noise ratio 
(SNR) of 30 or higher. For extra stars is will reduce the minimum SNR to
 10. Then the HFD values will be a little less accurate. Extra stars is 
intended for short exposure only where there are not enough stars with a
 SNR of 30 or higher.</big></p><big><br><br><a name="inspector_export"></a>Data export<br><br><img style="width: 665px; height: 302px;" alt="" src="astap_image_inspection.png"><br><br>If
the option "data to clipboard"&nbsp;is checked then all available data
is copied to the clipboard. If the image is solved the &#945;</big><big>, &#948; positions will be included.&nbsp; If the photometric calibration is applied it will include the star magnitudes.<br><br>An example of the data copied to the clipboard:<br></big><pre><big>fitsX&nbsp;&nbsp;&nbsp; fitsY&nbsp; HFD&nbsp;&nbsp;&nbsp; RA[]&nbsp;&nbsp;&nbsp;    DEC[]&nbsp;&nbsp;   &nbsp;ADU&nbsp;&nbsp;&nbsp;  Magnitude</big></pre><pre><big>1877.70&nbsp;&nbsp;17.97&nbsp; 3.843&nbsp; 274.093663&nbsp; -14.400684&nbsp;&nbsp;229858&nbsp;&nbsp;13.424</big></pre><pre><big> 267.96&nbsp;&nbsp;19.45&nbsp; 3.472&nbsp; 275.332120&nbsp;&nbsp;-14.498080&nbsp;&nbsp;141018&nbsp;&nbsp;13.955</big></pre><pre><big>1172.71&nbsp;&nbsp;18.24&nbsp; 3.040&nbsp; 274.635894&nbsp;&nbsp;-14.444421&nbsp; &nbsp;71522&nbsp;&nbsp;14.692</big></pre><pre><big>2161.77&nbsp;&nbsp;18.96&nbsp; 3.548&nbsp; 273.875327&nbsp;&nbsp;-14.381897&nbsp;&nbsp;167485&nbsp;&nbsp;13.768</big></pre><pre><big> 222.94&nbsp;&nbsp;19.92&nbsp; 3.075&nbsp; 275.366797&nbsp;&nbsp;-14.500390&nbsp;&nbsp;218724&nbsp;&nbsp;13.478</big></pre><pre><big> 785.63&nbsp;&nbsp;21.10&nbsp; 3.047&nbsp; 274.933882&nbsp;&nbsp;-14.465880&nbsp;&nbsp;169184&nbsp;&nbsp;13.757</big></pre><pre><big>1392.94&nbsp;&nbsp;22.41&nbsp; 3.522&nbsp; 274.466757&nbsp;&nbsp;-14.427718&nbsp;&nbsp;135043&nbsp;&nbsp;14.002</big></pre><pre><big>2065.31&nbsp;&nbsp;22.09&nbsp; 3.350&nbsp; 273.949687&nbsp;&nbsp;-14.385719&nbsp;&nbsp; 87597&nbsp;&nbsp;14.472</big></pre><pre></pre><big><br></big><a href="astap.htm#index">Back to index</a><br><br>
        <br><big><span style="text-decoration: underline;"><a name="hfd_2d_contour"></a>HFD 2D contour.</span>
<br><br>The star half flux diameters (HFD's) are displayed in a 2D contour.
Dark areas indicate a lower and better HFD value.&nbsp;This will
quickly visualise&nbsp;sensor tilt or other problems.&nbsp;To avoid
false indications by outliers the HFD values are filtered by taking the
median HFD value of the three closest stars and&nbsp; allocate the
result to all three stars. The HFD values are indicated numerical. They
grey levels have no direct linea relation with the HFD.</big><br><img style="width: 1200px; height: 960px;" alt="" src="astap_ccd_inspector3.png"><br><br><br><big><br><span style="text-decoration: underline;"><a name="hfd_diagram"></a>HFD
diagram</span>. </big><br><br><big>The star HFD values can also be represented by areas of constant HFD.
It is in principle a Voronoi diagram, but by&nbsp; taking the median
value of each three closest stars and allocate the median to the three
stars it looks a little different.White areas indicate a star with an
high HFD value. Darker areas indicate a lower value. The grey level is
the HFD * 100.</big><br>
        <img style="width: 1200px; height: 960px;" alt="" src="astap_ccd_inspector2.png"><br><br><big><span style="text-decoration: underline;"><a name="hfd_values"></a>HFD values</span> <br><br>This tool will only indicate the median filtered HFD values next to the
stars. The same values as in the 2D countour and HFD diagram. To avoid
false indications by outliers the HFD values are filtered by taking the
median HFD value of the three closest stars and&nbsp; allocate the
result to all three stars. <br><br></big><big><span style="text-decoration: underline;"><a name="unroundness"></a>Unroundness</span> <br><br>This
tool measured the unroundness of the imaged stars. The values are&nbsp;the aspect ratio of an ellipse. <br><br>Measuring
principle: The star is split in two by a line. The average distance of
the pixels&nbsp;to the split is measured. Then the split line is
rotated one degrees and again the average pixel distance to the split
line is measured. This continues till the line has made a&nbsp;180
degrees rotation. &nbsp;The aspect ratio is the highest distance value
found divided by the lowest distant value. The orientation is the
position where the lowest distance is found en the star is the longest.<br></big><big><br></big><p align="left">&nbsp;<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width: 0pt;" src="https://i.creativecommons.org/l/by/4.0/88x31.png"> </a>This unroundness measuring principle&nbsp;is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative
Commons Attribution 4.0 International License</a>.&nbsp;<em></em></p><br><br><span style="text-decoration: underline;"><big><a name="median_background_values"></a>Median background values</big><br><br></span><big>This
tools writes&nbsp;the median background values as numerical values in
the image. Stars will be ignored but nebula will influence the background measurement..<br><br><img style="width: 878px; height: 664px;" alt="" src="astap_median_background_values.jpg"><br></big><span style="text-decoration: underline;"></span><br><br><br><big><span style="text-decoration: underline;"><a name="show_distortion"></a>Show distortion<br><br></span>This
tools shows the difference between the Gaia star positions and the
centroids of the imaged stars assuming a linear solution. A difference
is indicated with a line 50 x larger then the actual difference in
pixels.&nbsp;A scale is show at the left bottom. Also the&nbsp; median
astrometric error in arc seconds for the center 50% square (height/2 *
height/2) is reported. This indicates the error to expect for
astrometric measurements. Note the database resolution is </big><span class="comment-copy">
0.077" &nbsp;in&nbsp;</span><span class="st"><big><big><em>&#945;&nbsp;</em></big></big></span><span class="comment-copy">and 0.039" in&nbsp;</span><span class="st"><big><big>&#948;.<br><br></big></big></span><big>If
<a href="#sip">the SIP</a> polynome as measuring mode in the viewer is selected then the distortion will be corrected. </big><span class="st"><big><big><br><br></big></big></span><big><span style="text-decoration: underline;"></span></big><a href="astap.htm#index">Back
            to index</a><br><br><big><span style="text-decoration: underline;"><br><a name="aberration_inspector"></a>Aberration Inspector<br><br></span>This
tool creates a 3x3 mosaic of the images center, the corners and
borders. This allows an easy&nbsp;comparison of the star shape at the
different sections of the image. </big><br><big><span style="text-decoration: underline;"><br></span><span style="text-decoration: underline; font-weight: bold;"><img style="width: 758px; height: 758px;" alt="" src="astap_aberration_inspector.jpg"><br></span></big><br><a href="astap.htm#index">Back to index</a><br><br><br><br><big style="text-decoration: underline;"><span style="font-weight: bold;"><a name="photometry_calibration"></a>Viewer, Tools, Calibrate Photometry.<br></span><br></big><big>With
this option the relation between flux and magnitude is measured. The
image should be solved in advance to be able to calibrate the star flux
with star database magnitudes.  After the calibration is applied, the star
magnitude at the mouse cursor is displayed. In the log&nbsp;an estimate for the limiting magnitude for point sources is
reported for a detection limit of SNR &#8805;7.&nbsp; The accuracy is
better then ,0.5 magnitudes. The aperture used for star flux measurement can be adapted in stack menu tab "<a href="astap.htm/#photometry">photometry</a>".</big> <br><br><big>For stretched images the reported (limiting) magnitude will be less reliable. Use </big><big>the pop-up menu option "<a href="astap.htm#online_query">online query</a>" to request the magnitude of the point sources.</big><br><br><br><big><br></big><big style="text-decoration: underline;"><span style="font-weight: bold;"><a name="sqm"></a>Viewer, Tools, SQM report based on an image<br><br><img style="width: 598px; height: 604px;" alt="" src="astap_sqm.png"><br><br></span></big><big>With
this option the&nbsp;&nbsp;SQM = sky background value relative to the
stars is measured and expressed in magnitude per square arc
second.&nbsp;</big><big>
The image should be solved in advance to be able to calibrate the measured star
flux with star database magnitudes. The reported SQM value will be equal to
a value reported by an
Unihedron SQM-L meter. &nbsp;A</big><big>tmospheric extinction of the stars</big><big> at lower altitudes will be compensated.<br><br>Some background information:<br><br>http://www.lightpollution.it/download/sqmreport.pdf<br><br>At
zenith&nbsp;the measured star flux and sky background flux are defined
as comparable and star light extinction is zeroed by subtracting 0.28
magnitudes from the calculated zenith extinction. So at zenith&nbsp;the
SQM brightness values are comparable to deepsky object brightness and
can be expressed in magn/arcsec. At lower altitudes the measured star flux is less and compensated by a predicted
extinction (0.2811*airmass, airmass according <a href="https://en.wikipedia.org/wiki/Air_mass_%28astronomy%29">Pickering</a>).<br><br>Pre-conditions<br>1) Image is astrometrical solved for star flux-calibration against the star database magnitudes.<br>2) The background value is larger then pedestal value or mean dark value. If not expose longer.<br>3) Apply on single unprocessed raw images only.<br>4) Providing dark image(s) in tab darks (ctrl+A) or entering a pedestal value&nbsp; (mean value of a dark) <br>&nbsp;&nbsp;&nbsp;&nbsp; increases the accuracy. If possible provide also a flat(s) in tab flats.<br>5) DSLR/OSC raw images require 2x2 binning. For DSLR images this is done automatically.<br>6) Most of the image is free of deepsky nebula.<br>7) The calculated altitude is correct. The altitude will be used for an atmospheric<br>&nbsp;&nbsp;&nbsp; extinction correction of the star light.<br>8) No&nbsp;</big><big>filter is used except a UV/IR block filter. <small>(</small></big><small>Note
the standard database is based on the Gaia blue magnitudes (400-700 nm)
which matches the passband of a typical camera.&nbsp;In case
the&nbsp;V50 ph</small><small>otometry </small><small>database is selected, a matching Johnson-V filter should used.)</small><big><br><br></big><big><br><span style="font-weight: bold;">Differences between Unihedron and ASTAP measurements:<br><br></span></big><ul><li><big>The
Unihedron is an absolute measurement of the sky glow. The ASTAP
measurement is a relative to star light measurement. In case of poor
sky transparency ASTAP will report lower SQM values due to the
higher&nbsp;</big><big>extinction</big><big> of star light. </big></li><li><big>It
is expected that the ASTAP measurement will be less sensitive to
Milky&nbsp;Way light since it measured the background and not the total
sky glow.</big></li><li><big>The Unihedron measurement will be less sensitive to the blue part of the spectrum.</big></li></ul><big><span style="font-weight: bold;"></span><br><br><br></big><big><br></big><span style="font-weight: bold;"><a name="star_annotation"></a> </span><big style="text-decoration: underline;"><span style="font-weight: bold;">Viewer, Tools,&nbsp;Magnitude (measured) annotation.<br><br></span></big><big>With
this option the stars are annotated with the estimated magnitude.&nbsp;</big><big> The image should be solved in advance to be able to calibrate the star flux with star database magnitudes.</big><big><br></big><br><big>If the
        Johnson-V version of the star database (V50) is used, the results
        match very
        accurate with AAVSO charts as demonstrated below. Camera was an
        ASI1600
        with only an UV-IR block filter:</big><br>
        <br>
        <img style="width: 1189px; height: 568px;" alt="" src="astap_photometry_m31.jpg"><br>
        <br><big>
For best accuracy the image should be monochrome and&nbsp;the Gaia
Johnson-V star databases V50 should have been installed and selected.
The image should have taken with a Johnson-V filter or none
(clear). Saturated stars will be ignored since it is not possible to
measure then accurately.<br><br><img style="width: 884px; height: 218px;" alt="" src="astap_limiting_magnitude.png"><br><br>In
the left bottom corner of the image an estimate for the limiting
magnitude for point sources is reported using a detection limit SNR &#8805;
7. Below this value detection of point source detection becomes unreliable.</big><big> The accuracy is better then ,0.5 magnitudes. The image should not be stretched. The aperture used for
star flux measurement can be adapted in stack menu tab
"<a href="astap.htm#photometry">photometry</a>".&nbsp;Results can be validated by requesting the Gaia BP magnitude magnitude
of the faintest stars in the image&nbsp;</big><big>using the </big><big>pop-up menu option "<a href="astap.htm#online_query">online query</a>".</big><big><br><br>For stretched images the reported limiting magnitude will be less reliable. Use </big><big>the pop-up menu option "<a href="astap.htm#online_query">online query</a>" to request the magnitude of the faintest sources.</big><br><big><br></big>
        <br>
        <a href="astap.htm#index">Back to index</a><br><br><br><big style="text-decoration: underline;"><span style="font-weight: bold;">Viewer, Tools, Star (database) magnitude.<br><br></span></big><big>With
this option the stars are annotated with the star database magnitude</big>. This can be done best with&nbsp;V50 containing the calculated Johnson-V magnitudes.<br>
        <br>For a G-database the indicated magnitude
is Gaia blue. For a V-database the indicated magnitude is Johnson-V&nbsp; and
the following the difference between Gaia&nbsp;blue and red,&nbsp; positive for
reddish objects. All in 1/10 of a magnitude.<br><br>
        Below,
        the image is 1) solved, 2) auto calibrated (using the V16)
        &nbsp;
        The
        cursor is at a star and based on the flux of all know stars, the
        star
        Johnson-V magnitude is estimated to be 16.1. The stars are
        marked with
        the Johnson-V magnitude and &nbsp;Bp-Rp color indication. <br><br>
        See&nbsp;also&nbsp;<a href="astap.htm#blink">blink and photometry</a><br>
        <br>
        <img style="width: 761px; height: 967px;" alt="" src="astap_star_annotations.jpg"><br>
        <br>
        <a href="astap.htm#blink"></a><br><a href="astap.htm#index">Back to index</a><br><br><br><big style="text-decoration: underline;"><span style="font-weight: bold;">Viewer, Tools, Unknown star annotation</span></big><big><span style="font-weight: bold;"></span> (nova detection)</big><big style="text-decoration: underline;"><span style="font-weight: bold;"><br><br></span></big><big>Any
unknown object or a star with an abnormal magnitude is identified. This
option is intended to&nbsp;mark nova and minor planets using the star
database. Any star like object missing or with one magnitude brighter
then the online Gaia database is annotated. The Gaia online database
goes down to about magnitude 21. So the algorithm will detected any new
object to about 21-1 is magnitude 20. The image should be solved in
advance.<br><br>Downloading the Gaia database could be slow. Especially for field-of-view larger then two degrees.<br><br>Nova
inside small galaxies boundaries could avoid star detection. Very small
galaxies could also be detected as missing in the Gaia star database

for the obvious reasons. &nbsp;<br><br>At the moment there is no batch
routine for this tool but could be considered. (Including export to
.csv files for further processing).<br><br><br></big><big style="text-decoration: underline;"><span style="font-weight: bold;">Viewer, Tools, Variable star annotation</span></big><br><big><br>Variable star are annotated using the variable_stars.csv database.<br><br><br></big><br><span style="font-weight: bold;"><a name="asteroid_annotation"></a></span><big style="text-decoration: underline;"><span style="font-weight: bold;">Viewer, Tools, </span></big><span style="font-weight: bold;"><big style="text-decoration: underline;">Asteroid and comet annotation</big><br>
          <br></span>This
option will annotate asteroids using&nbsp;the orbital elements taken
from the MPCORB.DAT file and for comets the ComeEls.txt from the <a href="https://www.minorplanetcenter.net/data">Minor Planet Center</a>.<br><br><span style="font-weight: bold;">
        </span>Usage:<br><br>- Solve an image.<br>- Go to to the viewer "Tools" menu, "Asteroid annotation".<br>- First time download the full <a href="https://minorplanetcenter.net/iau/MPCORB.html">MPCORB.DAT</a> from the minor planet center. Link is available from the blue down arrow. Set the path to MPCORB.DAT correct.<br>- Set the limiting magnitude and maximum number of asteroids to read.<br>- Press the button&nbsp;<span style="background-color: rgb(153, 153, 153);"><big> &nbsp;Asteroid &amp; comet annotation</big>&nbsp;&nbsp;</span>&nbsp;.<br><br>Remarks:<br><br>Renew the MPCORB.DAT and CometEls.txt&nbsp; files every few months.<br><br>The
observation date and time are extracted from the FITS header (date-obs,
date-avg) or for other files the file date is taken. &nbsp;If date
average is not available it will be calculated from the exposure time
and date-obs from the FITS header.<br><br>The
latitude and longitude of the observation location are also taken from
the header. If not available enter them manually or leave them at 0.<br><br>For MPC1992 style reporting &nbsp;the option "Add as annotation to the FITS header" should be set.<br><br><img style="width: 598px; height: 447px;" alt="" src="astap_asteroid_annotation.png"><br>
        <br>
        <br>
        <a href="astap.htm#index">Back to index</a><br><big style="text-decoration: underline;"><br></big>
        
        <span style="font-weight: bold; text-decoration: underline;"><a name="deep_sky_annotation"></a></span><big style="text-decoration: underline;"><span style="font-weight: bold;">Viewer, Tools,</span></big><span style="font-weight: bold; text-decoration: underline;"><big> Deep
            sky
            annotations</big>&nbsp;&nbsp;</span><br>
        <br>
        If the image is solved, it is possible to add deep sky
        annotations. See
        pull-down menu TOOLS:<br>
        <br>
        <img style="width: 759px; height: 963px;" alt="" src="astap_annotations.jpg"><br>
        <br>
        <a href="astap.htm#index">Back to index</a><br>
        <br>
        <span style="font-weight: bold;"></span><a href="astap.htm#index"></a><a href="astap.htm#index"></a>
<br>
        <span style="font-weight: bold;"><a name="viewmenu"></a>View
          menu</span><br>
        <br>
        This menu has the following options:<br>
        <ul>
          <li>Image clean up Ctrl+space</li>
          <li>Center lost windows Ctrl+F12 &nbsp;Use this if you have
            multiple screens and once window is out of site for some
            reasons.</li>
          <li>Flip horizontal Ctrl+H</li>
          <li>Flip vertical Ctrl+H</li>
          <li>Zoom out &nbsp;PgUp</li>
          <li>Zoom in &nbsp; &nbsp; PgDn</li>
        </ul><br><img style="width: 398px; height: 459px;" alt="" src="astap_view1.png"><br>
        <a href="astap.htm#index">Back to index</a><br><br><a href="astap.htm#index"></a></div>
      <br><br><p align="left"><br><big style="font-weight: bold;"><span style="text-decoration: underline;"><a name="fits_tables"></a>FITS tables<br><br></span></big>The
viewer has limited support for displaying FITS binary and ASCII tables.
It can read and write binary tables and read ASCII tables only. They
are displayed in the memo. Values are separated by a tab #9 and can be
selected and copied to a spreadsheet. It can display only one table and
will display the first table only. The file can be saved again but all
binary values will be all written as 4 byte float.<big style="font-weight: bold;"><span style="text-decoration: underline;"><br><br></span></big>
        <a href="astap.htm#index">Back to index</a></p><div style="text-align: left;"><br>
        <big style="font-weight: bold;"><big><span style="text-decoration: underline;"></span></big></big></div>
      <div style="text-align: left;"><br>
        <big style="font-weight: bold;"><big><span style="text-decoration: underline;"><a name="viewer_popup"></a>Viewer
pop-up
              menu:</span></big></big><br>
        <br>
        <span style="font-weight: bold;"></span><img style="width: 745px; height: 844px;" alt="" src="astap_viewer_popup.png"><br>
        <br>
        <span style="font-weight: bold;">Add annotation, </span>&nbsp;free
text label at a x,y position. It can be connected via a line by first
holding the right mouse button and moving the mouse away. See sample
above.&nbsp; Persistent by annotation keyword in the FITS header. The
annotation can be switched off in pulldown menu "View". Remove by
removing the annotation line in the header. &nbsp;If a @ is added to
the text, the annotation is written persistent in the image data. So
the image will be permanently altered after saving. Adding two or more
@ will increase the font size.<br>
        <span style="font-weight: bold;"><br></span><span style="font-weight: bold;"></span><span style="font-weight: bold;">Add marker, </span>rectangle
marker at x,y position. Draw the rectangle first by holding the right
mouse button down and moving the mouse away. See sample above. The
Persistent by annotation keyword in the FITS header. The annotation can
be switched off in
pulldown menu "View". Remove by removing the annotation line in the
header.<br>
        <br>
        <span style="font-weight: bold;"></span><span style="font-weight: bold;">Add object position</span>,
        Enabled after astrometric solve. Will add the&nbsp;&#945;,&nbsp;&#948; at

        the
        mouse position. Orange if a lock is possible, see above sample, red if not. Not persistent after image clean up.<br>
        <br>
        <span style="font-weight: bold;"></span><span style="font-weight: bold;">Add marker at &nbsp;&#945;,&nbsp;
          &#948;&nbsp;position</span>,
will place a yellow square at the specified &#945;,&nbsp; &#948; position.&nbsp; See above sample for orange star. Enabled after
astrometric solve.&nbsp;Persistent. Position will be
        saved with "save settings". If a C is typed, the marker is placed at the center.<br>
        <br>
        <span style="font-weight: bold;"></span><span style="font-weight: bold;">Measure total magnitude within
          shape</span>,
Enabled after astrometric solve. Shape is either a rectangle or a
ellipse is SHIFT or CNTRL is pressed. The program will measure the flux
and try to estimate the magnitude. Hold the right mouse down and pull a
rectangle around the deep sky object,&nbsp;release mouse
button&nbsp;and then select this menu. &nbsp;If the image is taken with
a Johnson-V filter then also V50 Johnson-V star databases should be
used. All other local database used for flux calibration are based on
Gaia Bp. If more then 3% of the pixels is saturated a warning will be
given.<br>
        <br>
        <img style="width: 703px; height: 740px;" alt="" src="astap_measure_magnitude1.jpg"><br>
        <br>
        A demonstration is available at YouTube: &nbsp;<a href="https://youtu.be/wfFWmtj9Oes">Photometry in the viewer</a><br>
        <br>
        The measuring principle is as follows:









<ol><li>Use the star database to measure the MEDIAN relation between&nbsp;flux of the detected stars 
and star magnitude from the database. (That's why solving is required 


and best result are achieved with the V50 Johnson-V star 
databases based on Gaia DR3)&nbsp;</li><li>Measure
the MEDIAN background 1 to 10 pixels wide outside the rectangle box.
This median measurement will ignore stars in the field.</li><li>Measure the MEAN&nbsp; flux inside the box.</li><li>Calculate the magnitude for the "inside&nbsp;mean flux" minus "median outside box flux" using the relation found for the stars.</li></ol>



<p>&nbsp;You could argue that a Johnson-V filter or green channel is required 
for the image but in practice the error is limited depending on the 
spectrum.</p><br><span style="font-weight: bold;"><a name="mpc1992line"></a></span><span style="font-weight: bold;"></span><span style="font-weight: bold;">MPC1992 report line.</span>
This menu will report the position of a minor planet at the mouse
cursor to both the clipboard and the standard log. If the object is
within an annotation the report will include the object abbreviation.
To include abbreviations the annotations have to be added prior to
using the MPC1992 report line. See viewer menu "<a href="#asteroid_annotation">Asteroids &amp; comets annotation</a>" shortcut
ctrl+R.<br><br>Usage: Place the mouse pointer on an minor planet spot and select
this menu. The minor planet name, position and magnitude will be
both reported in the clpboard and the log.&nbsp;This works best in combination
with the <a href="#trackandstack">track and stack menu</a> of the <a href="astap.htm#blink">blink tab</a><small>. <big>&nbsp; The &nbsp;reported line can be&nbsp;pasted directly in the online&nbsp; <a href="https://minorplanetcenter.net/cgi-bin/checkmp.cgi">MPC checker. </a>No
need to enter the date and position. Just paste the single line of 80
characters long. A MPC1992 report could be assembled manually with these lines to a full
report. A report should contain typically three observations of one object in a single night.:</big><br><br></small><p style="margin-left: 40px;" align="left"><big>A MPC1992 template&nbsp; for reporting asteroid/minor-planet positions to&nbsp;the <a href="https://www.minorplanetcenter.net/iau/info/OpticalObs.html">Minor planet Center</a></big></p><p style="margin-left: 40px;" align="left"><big><span style="font-family: monospace;">COD XXX</span><br style="font-family: monospace;"><span style="font-family: monospace;">CON Optional contact name. Additional contact details may then follow.</span><br style="font-family: monospace;"><span style="font-family: monospace;">OBS Observer name(s), no programs</span><br style="font-family: monospace;"><span style="font-family: monospace;">MEA Measurers name(s), no programs</span><br style="font-family: monospace;"><span style="font-family: monospace;">TEL 0.2-m f/4 reflector + CCD</span><br style="font-family: monospace;"><span style="font-family: monospace;">COM Long. 01 30 00 E, Lat. 53 00 00 N, Alt 10m, Google Earth</span><br style="font-family: monospace;"><span style="font-family: monospace;">NET Gaia3</span><br style="font-family: monospace;"><span style="font-family: monospace;">63343&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
B2018 09 10.54372 22 57 15.97 -07 38
51.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
19.76B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XXX</span><br style="font-family: monospace;"><span style="font-family: monospace;">38826&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
B2018 09 10.54372 22 56 42.42 -07 50
37.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
18.19B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XXX</span></big></p><p style="margin-left: 40px;" align="left"><span style="font-weight: bold;">....</span><big><span style="font-family: monospace;"></span></big></p><p style="margin-left: 40px;" align="left"><span style="font-family: monospace;"></span><span style="font-family: monospace;"><br></span></p><p align="left"><span style="font-family: monospace;"><span style="font-family: monospace;"></span></span><span style="font-weight: bold;">Show statistics</span>.
This menu will generate a statistics report of the image.<br></p><br><span style="font-weight: bold;"><a name="positional_and_photometric_report"></a>Star info to clipboard</span>.
This will generate a positional and&nbsp;photometric report of all
detectable stars in the selected&nbsp;window and place it in
the&nbsp;clipboard. From there the information&nbsp; can be copied to
your favorite program/spreadsheet. This menu will only be available if
the image is solved. (press&nbsp;&#931; button). The magnitudes value are
absolute calibrate values based on the the selected reference database.<br><br>The report in the clipboard will look like this:<br><p>Example of an ASTAP report:</p>
<span style="font-family: 'courier new',courier,monospace;"><span style="font-family: 'courier new',courier,monospace;">Limiting magnitude is 18.1&nbsp;&nbsp; (18.1&lt; m &lt;18.1, SNR=7, aperture &#8960;1.5)<br>
Passband filter used: CV<br>
Passband database=BP</span><br>
fitsX fitsY HFD &#945;[] &#948;[] ADU SNR Magn_measured | Gaia-V Gaia-B Gaia-R Gaia-SG Gaia-SR Gaia-SI Gaia-G Gaia-BP Gaia-RP<br>
3755.45 2692.99 3.604 23.747631 30.448624 31952 118 14.797 | 14.620 15.480 14.134 15.003 14.347 14.103 14.380 14.828 13.766<br>
3826.88 2702.46 3.386 23.778321 30.445076 6398 30 16.544 | 16.377 17.496 15.773 16.887 16.008 15.663 16.035 16.618 15.321<br>
3803.23 2709.42 3.958 23.768154 30.442512 27335 110 14.967 | 14.793 15.309 14.473 14.987 14.662 14.548 14.668 14.949 14.225<br>
3787.76 2712.94 3.378 23.761501 30.441217 8257 34 16.267 | 16.232 16.877 15.846 16.502 16.045 15.881 16.065 16.407 15.549<br><br><br></span><br>The
reference database, aperture and annulus&nbsp;can be selected in tab
photometry.&nbsp;For measuring the absolute magnitudes&nbsp;it will use
the reference magnitudes of either a local star database (e.g. the D50,
Gaia BP or the Johnson-V in the V50) or the&nbsp;online Gaia catalog
from Vizier. About six&nbsp;photometric transformations are available
for the Johnson V, B, R and Sloan magnitudes according the
transformation as documented in the Gaia documentation. The online Gaia
reference data is retrieved from Vizier and can retrieval be slow. The
magnitude transformation is done locally.<br><img style="width: 1840px; height: 354px;" alt="" src="astap_star_info_to_clipboard1.png"><br><span style="font-family: 'courier new',courier,monospace;"></span><br><br>
        <br>
        <span style="font-weight: bold;">Copy image (selection) to the clipboard,</span>
copies the displayed image or a selection of the image to the
clipboard. The orientation is depending on the selection direction..
So the image can be flipped both vertical and horizontal depending on the selection direction..<br><br><span style="font-weight: bold;">Copy position to clipboard,</span>
        Enabled after astrometric solve. Copies the&nbsp;&#945;,&nbsp; &#948;
        position to the clipboard.<br><br>
        <span style="font-weight: bold;">Copy position to clipboard
          in&nbsp;</span><span style="font-weight: bold;" class="symbol"></span><span style="font-weight: bold;"> ,</span> Enabled after astrometric
        solve. Copies the&nbsp;&#945;,&nbsp; &#948; position in degrees to the
        clipboard.<br>
        <span style="font-weight: bold;"><br><a name="online_query"></a><br><img style="width: 769px; height: 898px;" alt="" src="astap_online_query.png"><br>Online query. </span>Query
the Simbad database, Hyperleda, Ned or Gaia online database for all
objects within the
selected rectangle. Or request an AAVSO map for the selected rectangle.
&nbsp;The annotation requests will annotate the objects in the image.
The browser requests will&nbsp;activate the default web browser and
list the object found&nbsp;in a table with information and further
links. For a Gaia query it is better to place the cursor directly on
the star rather then pull a rectangle. <br>
        <br>
        <span style="font-weight: bold;"></span>Local adjustments<br>
        <div style="margin-left: 40px;"><span style="font-weight: bold;">Local colour smooth</span><br><br style="font-weight: bold;"><span style="font-weight: bold;">Local remove colour</span>.<br><br><span style="font-weight: bold;">Local Gaussian blur.</span><br><br><span style="font-weight: bold;">Local equalise tool.</span><br><br><span style="font-weight: bold;">Brighten a small area based on
          the corner values.</span><br><span style="font-weight: bold;"></span></div>
        
        
        
        
        
        
        
        <span style="font-weight: bold;"><br>Gradient removal tool<br><br></span>To&nbsp;remove
a linear gradient caused by&nbsp;light pollution or&nbsp;twilight. The
routine need two empty areas 40x40 pixels in the image to measure the
gradient. The area may contain stars but no deepsky object. The area
are selected by pressing the right mouse button(first area) and while
holding the mouse button move to the second area in the direction of
the gradient. Then select in the pop-up menu "Gradient removal tool".
Try to maximise the distance ideally the full image range. <br><br><img style="width: 763px; height: 765px;" alt="" src="astap_gradient_removal.jpg"><br><br><br><span style="font-weight: bold;">Dark spot removal tool.&nbsp;</span>
Tool to remove dark round spot by dust in the optical system, Hold to
SHIFT or CTRL button and press the right mouse button to
encircle.accurately the dark spot. Release the right mouse button and
select the "dark spot removal tool". For a demonstration see this <a href="https://www.youtube.com/watch?v=3YYOfdnJZsY">Youtube video</a>.<br><span style="font-weight: bold;"><br>Copy paste tool.&nbsp;</span> Powerful
touch-up tool &nbsp;for cosmetic corrections. Small sections of the
image can be copied as pasted on hot pixels or artifacts. Select the
good part by holding the right mouse button and pulling a rectangle
with the mouse and move the copied part to the part to be touched up.. &nbsp;<span style="font-weight: bold;"> </span>The selection is default an rectangle. When either SHIFT or CNTRL is pressed the selection will be an circle/ellipse.<br><br><span style="font-weight: bold;"><br>Set area.&nbsp; </span>Set an area for the colour replacement tool in tab pixel math 1.<br><br><span style="font-weight: bold;"><br>Remove deep sky &nbsp;object.</span>
        Removes an deep sky object as part of the <a href="astap.htm#pixel_math">pixel math</a> tab routine
        "equalise background tool". &nbsp;Hold the right mouse down and
        pull a
        rectangle or ellipse around the deep sky object,&nbsp;release mouse
        button&nbsp;and then and then select this menu. When either SHIFT or CNTRL is pressed the selection will be an ellipse.<br>
<br><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span>
        <br>
        <span style="font-weight: bold;">Remove borders</span>. This
        menu allows to remove parts of the image near de borders.<br>
        <br><br>
        <span style="font-weight: bold;">Crop fits image.</span>
        This allows the crop the image. Hold the right mouse down and
        pull a
        rectangle,&nbsp;release mouse button&nbsp;and then and the
        select this
        menu<br>
        <br>
        <p align="left"><a href="astap.htm#index">Back
            to index</a></p><p align="left"></p><p align="left"><a href="astap.htm#index"><big style="font-weight: bold;"><big><span style="text-decoration: underline;"></span></big></big></a><big style="font-weight: bold;"><big><a name="otherpopup"></a>Other pop-up
              menus:</big></big></p><p align="left">Search for an object position:<a href="astap.htm#index"><big style="font-weight: bold;"><big><span style="text-decoration: underline;"></span></big></big></a></p>
        <img style="width: 441px; height: 264px;" alt="" src="astap_popupmenu_radec.png"><br><br>Copy histogram values to clipboard. You can paste them then in a spreadsheet.<br><img style="width: 456px; height: 252px;" alt="" src="astap_popupmenu_histogram.png"><br><br>Fits header editor<br><img style="width: 1142px; height: 266px;" alt="" src="astap_popupmenu_header.png"><br><br><br>Status bar. You can select to display:<br>&nbsp;<br>- A different unit for the position.<br>- The HFD and FWHM in arc seconds. <br>- Noise reported in electrons.<br><img style="width: 747px; height: 473px;" alt="" src="astap_popupmenu_statusbar.png"><br><br><br><a href="astap.htm#index">Back
            to index</a><br><hr style="width: 100%; height: 2px;"><br>
      </div>
      <p align="left"><span style="font-family: Arial;"><span style="font-weight: bold; text-decoration: underline;"><a name="command_line"></a></span></span><span style="font-family: Arial;"><span style="font-weight: bold; text-decoration: underline;">Usage
            as astrometric solver and command
            line options</span>: </span></p>
      <div style="text-align: left;"><big>For command line parameters see :&nbsp;<a href="astap.htm#astap_command_line">astap_command_line</a></big></div>
      <p align="left"><big><span style="text-decoration: underline;">For
            images in the viewer:</span></big></p>
      <p align="left"><big>The simplest
          way to solve an image is just to load an image in the viewer


          and hit
          the&nbsp;</big><big>solve button. Some settings are available in the&nbsp;</big><span style="background-color: rgb(153, 153, 153);"></span><span style="background-color: rgb(153, 153, 153);"> &nbsp;&#8721; &nbsp;</span><big> menu
          under
          tab alignment.&nbsp;</big></p>
      <ul style="text-align: left;">
        <li><big><strong>Diameter
              field</strong>:
            &nbsp;This is the square size of the star
            field in degrees used for detection and will be set
            automatically for
            most FITS files.&nbsp;It should be in range with&nbsp;the
            image
            diameter.</big></li>
        <li><big><strong>Radius search</strong>:
            Search radius in degrees. If there is no match, the program
            will
            move&nbsp;the search field
            around in a&nbsp;square spiral and increasing the distance
            form the
            initial position up to the radius specified. &nbsp;A radius
            of 30
            degrees could be searched in a few minutes.</big></li>
        <li><big><strong>Maximum number of stars to use</strong>:
            &nbsp;No need to change it. This could be set between 100
            and 1000. Default 500.</big></li>
        <li><big><strong>Hash code&nbsp;tolerance</strong>:
            &nbsp;No need to change it. Leave this at 0.007 unless you
            have
            severe
            optical distortion.&nbsp;</big></li>
        <li><big><strong>Downsampling</strong>:
            &nbsp;For large image with a height above 3000 pixels
            select&nbsp;downsampling factor 2 or to
            speed up the solving and increase the signal noise ratio of
            the stars.
            Also colours are combined to monochromatic so this option is
            beneficial
            for DSLR images</big></li>
      </ul>
      <br>
      <p align="left"><big>The
          solution will be added to the fits header and center of the
          image will
          be
          displayed in the log of the&nbsp;</big><span style="background-color: rgb(153, 153, 153);"> &#8721; &nbsp;</span><big>&nbsp;menu</big><big>.
          Click on the save button to save the FITS
          file with the solution. With the solution, the status bar will
          show
          the&nbsp;astronomical position of the mouse pointer.</big></p>
      <div style="text-align: left;"><big><span style="text-decoration: underline;"><a name="conditions"></a><span style="font-weight: bold;">Conditions required
              for&nbsp;solving:<br></span></span><br>Quick checklist for solving:
<br></big><div style="margin-left: 40px;"><ol><li><big>An approximate celestial position is specified (for a spiral search). This position should be displayed in the left top of the
viewer menu. (unless you do a 180 degrees search)</big></li><li><big>
Correct image height in degrees specified within preferable 5% accuracy. This
height (width x height) should be displayed in the status bar of the viewer and in tab
alignment under "Field of view (height)" (Check focal length, sensor
size settings or try FOV=auto once)" You can set/force a "Field of view (height)" in tab Alignment.</big></li><li><big>At least 30
stars are visible. For small field-of-view (&lt;0.6) and away from
the Milky-Way-plane expose longer up to 30 seconds and install the D20 or&nbsp;D50
star database.</big></li><li><big>
The stars are reasonable round&nbsp;and the camera is in focus.</big></li><li><big>
Image dimensions at least 1280x960 pixels. For smaller dimensions solving is still possible if the image&nbsp;quality is good.
</big></li><li><big>
Image is not stretched, very saturated or heavily photo-shopped.</big></li><li><big>Try&nbsp;<a href="astap.htm#solvable">test if an image is blind solvable.</a></big></li></ol></div>If
you still have problems with solving, you could send me a link to
the&nbsp;file involved (FITS is preferred) and if I have time I
could&nbsp;have a look. Upload it e.g. to <a href="http://nova.astrometry.net/">http://nova.astrometry.net</a>&nbsp;and
share the link. For privacy reasons, prior to uploading you
could&nbsp;remove your latitude/longitude information from the header
using the viewer "Tools", "Batch processing", "Remove longitude
latitude information" menu.<br><br><big><span style="text-decoration: underline;"><span style="font-weight: bold;"></span></span>
          The
          internal
          astrometric solver works best with raw unstretched and
          sharp images of sufficient resolution where stars can be very
          faint.
          Heavily stretched, saturated, out-of-focus or photo shopped
          images are
          problematic.&nbsp;It requires
          minimum about 30 stars in the image to solve. Images
          containing of a
          few hundred
          stars stars
          are ideal. For star rich images, the program will reduce the
          detection
          limit to
          limit the number of stars. This will only work for unstretched
          images
          where brighter stars have a greater intensity then fainter
          stars. <span style="font-weight: bold;">So ASTAP requires
            three star
            dimensions&nbsp;for solving. The star x, y coordinates and
            star
            intensity.</span>&nbsp;Oval stars due to tracking errors or
          severe optical distortion will be
          ignored and solving could fail.<br>
          <br>
          Check list for successful solving with ASTAP:<br>
        </big>
        <ol>
          <li>An approximate  &#945; and &#948;
            celestial position is specified (for a spiral search).&nbsp;For FITS file
            this position is
            normally read from the FITS file header and set
            automatically. The position can also be passed by the <a href="#astap_command_line">command-line</a> from your favorite imaging program. In case
            you view an&nbsp;JPEG, TIFF image the approximate&nbsp; position can be entered by a&nbsp;double click
            on&nbsp;&#945;
            input to search for a know deep sky object position from the
            database.</li>
          <li>
Correct image height in degrees specified within preferable 5% accuracy.&nbsp; See&nbsp;<span style="background-color: rgb(153, 153, 153);"></span><a href="astap.htm#internal_alignment"><span style="background-color: rgb(153, 153, 153);"></span></a><span style="background-color: rgb(153, 153, 153);"></span><span style="background-color: rgb(153, 153, 153);">&nbsp;</span><a href="#solvable"><span style="background-color: rgb(153, 153, 153);">&#8721;</span></a><span style="background-color: rgb(153, 153, 153);">&nbsp;</span> window, tab alignment,
            group-box&nbsp;astrometric
            settings, "Field of
            view (height)". For FITS images this is normally automatic
            calculated from info in the file header. In cause of doubt you could try&nbsp;"Field of
            view (height)"=AUTO</li><li>At least 30 stars&nbsp;are visible in the image. They can
be very faint, barely visible in the noise.&nbsp;For large
field-of-view (&gt;1) expose 5 to 10 seconds but for
small&nbsp;field-of-view (&lt;0.5) expose longer up to 60 seconds and use the D50 star
database.</li>
          <li>The visible stars are reasonable round&nbsp;and the camera is in focus. You
            could
            verify the star
            detection
            by the <a href="ccd_inspector">CCD inspector</a> or&nbsp;by&nbsp; the <span style="background-color: rgb(153, 153, 153);">&nbsp;Test button to show quads&nbsp;</span>&nbsp;in the&nbsp;<span style="background-color: rgb(153, 153, 153);"></span><span style="background-color: rgb(153, 153, 153);">&nbsp;</span><a href="astap.htm#internal_alignment"><span style="background-color: rgb(153, 153, 153);"></span></a><span style="background-color: rgb(153, 153, 153);"></span><span style="background-color: rgb(153, 153, 153);"></span><span style="background-color: rgb(153, 153, 153);"></span><a href="astap.htm#solvable"><span style="background-color: rgb(153, 153, 153);">&#8721;</span></a><span style="background-color: rgb(153, 153, 153);">&nbsp;</span> window, tab alignment). Most
            stars
            should be
            detected.</li><li>
Image dimensions at least 1280x960 pixels. Set downsample at 0 (=auto) and the program will select a downsampling factor
automatically.&nbsp;Image
height in pixels&nbsp;after ASTAP dowsampling should be somewhere
between 1000 and 3000 pixels.&nbsp;ASI120MC camera image are problemetic to solve. </li>
          <li>Image is not stretched, very saturated or heavily photo-shopped.&nbsp;The
            total exposure time could be hours (stacked) as long it is possible to
            separate
            the
            brightest stars from the faint&nbsp;by intensity.</li><li>Search
            radius should be set large enough.&nbsp;See&nbsp;<span style="background-color: rgb(153, 153, 153);"></span><a href="astap.htm#internal_alignment"><span style="background-color: rgb(153, 153, 153);"></span></a><span style="background-color: rgb(153, 153, 153);"></span><a href="astap.htm#astrometric_alignment"><span style="background-color: rgb(153, 153, 153);"></span></a><span style="background-color: rgb(153, 153, 153);">&nbsp;</span><a href="astap.htm#solvable"><span style="background-color: rgb(153, 153, 153);">&#8721;</span></a><span style="background-color: rgb(153, 153, 153);">&nbsp;</span>&nbsp;window, tab
            alignment,
            group-box&nbsp;astrometric settings. &nbsp;You could set
            this
            at 30 or
            for blind solving at 180.</li>
          
          
          
          <li>Use downsample factor 0 (auto). See&nbsp;<span style="background-color: rgb(153, 153, 153);"></span><a href="astap.htm#astrometric_alignment"><span style="background-color: rgb(153, 153, 153);"></span></a><span style="background-color: rgb(153, 153, 153);"></span><span style="background-color: rgb(153, 153, 153);"></span><span style="background-color: rgb(153, 153, 153);">&nbsp;</span><a href="astap.htm#solvable"><span style="background-color: rgb(153, 153, 153);">&#8721;</span></a><span style="background-color: rgb(153, 153, 153);">&nbsp;</span> window, tab alignment,
group-box&nbsp;astrometric settings.&nbsp;</li>
          <li>If
your image is full of hot pixels you could adjust the "Ignore stars
less then ["]"&nbsp; in tab Alignment. This is set default&nbsp;at 1.5" but
could be set higher for a long focal length.</li><li>The maximum
number of stars to use should be defined. Typical set at 500.&nbsp;See
&#8721;&nbsp;window, tab alignment.</li>
          <li>Hash
code&nbsp;tolerance should be defined. Typical set at 0.007. See tab
alignment.</li>
          <li>For
a&nbsp;field-of-view&nbsp;less then&nbsp;40 arc minutes (long focal
length) it is recommend to install the D20,&nbsp;D50 or even the D80 star database. &nbsp;See <a href="#database_usability">star database usability</a></li><li>If a global cluster fills the whole field,&nbsp;ASTAP could
struggle to solve.&nbsp;Forcing option "slow" could
&nbsp;help.</li><li>Best
input format is FITS, RAW or 16 bit PNG, TIFF. Images in 8
bit&nbsp;PNG, TIFF and especially in the JPEG format are disadvantageous for solving.</li>
        </ol><br><big><span style="text-decoration: underline;"><a name="solvable"></a><span style="font-weight: bold;">Test if an image is solvable (fully blind solving)</span></span></big><big><span style="text-decoration: underline;"><span style="font-weight: bold;">:<br></span></span></big><p><big>To test if an image is solvable follow this procedure:</big></p>

<p style="margin-left: 40px;"><big>A) Load an image in ASTAP</big></p>
<p style="margin-left: 40px;"><big>B) Check star detection by hitting button F4. Only stars should be 
annotated and not the hot pixels. If hot pixels are annotated see <span style="font-weight: bold;">E) Hot pixels seen as stars</span></big></p>
<p style="margin-left: 40px;"><big>C) Go to ASTAP settings by CTRL+A or
&#931; button. Select tab Alignment. Set ASTAP to blind solving by 1) in
screen shot. So "field of view"=auto and "radius of search area[</big><span class="ILfuVd NA6bn" lang="en"><span class="hgKElc"><span><span jscontroller="BicQqd" jsname="XtloMb">]</span></span></span></span><big>"=180</big><span class="ILfuVd NA6bn" lang="en"><span class="hgKElc"><span><span jscontroller="BicQqd" jsname="XtloMb">.</span></span></span></span></p><div style="margin-left: 40px;"><big>D) Hit the ASTAP solve button<br><br></big></div><div style="text-align: left;"><big>This 
should solve any image in a few minutes max. After solving the image 
height in degrees is reported.&nbsp;Further field of view (FOV) calculations can be done in tab
 <a href="astap.htm#fov_calculator">Pixelmath, FOV calculator</a>.<br><br></big><div style="margin-left: 40px;"><big>E) Hot pixels seen as stars</big></div></div><p><big>If
too many hot pixels are detected as stars then increase "Ignore stars
less then ["]" value marked by 2) in the screen shot. The star
annotation values shown after hitting F4 are indicating which value is
you should use. More then the hot pixels HFD values but less then the
star HFD values. Save settings by hitting the solve button.</big></p><img style="width: 1450px; height: 621px;" alt="" src="astap_blind.png"><br><br><a name="fov_calculator"></a> &nbsp;The FOV calculator in tab Pixel math 2<br><p><img style="width: 1452px; height: 621px;" alt="" src="astap_fov_calculator.png"></p><br><big style="font-family: Arial;"><a href="https://sourceforge.net/p/astap-program/discussion/"><br></a></big><big>
        </big></div>
      <hr style="width: 100%; height: 2px;"><p align="left"></p>
      <p align="left"><big style="text-decoration: underline; font-weight: bold;"><a name="astap_command_line"></a></big><big style="font-weight: bold; text-decoration: underline;">Command line usage ASTAP</big></p>
      <big><span style="font-family: Arial;"><span style="font-weight: bold;"></span></span></big>
      <p style="text-align: left;"><big>The program can be
          executed using&nbsp;command line options to solve images </big><big>astrometric
        </big><big>.&nbsp;E.g.&nbsp; ASTAP -f&nbsp;
          home/test/2.fits &nbsp;&nbsp;-r 30</big>&nbsp;</p>
      <p style="text-align: left;"><big>The program will
          accept FITS, TIFF, PNG, JPG, BMP and uncompressed&nbsp;XISF files.</big></p>
      <br>
      <table style="width: 547px; height: 745px; background-color: rgb(204, 204, 255);" border="1" cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td colspan="2" rowspan="1" style="font-weight: bold; text-decoration: underline;"><br>
            <big><big>ASTAP
astrometric
                  solver command line </big></big></td>
            
            <td><br>
            </td>
            <td><small>The FOV, RA,DEC options are intended for
                none FITS files. <br>
                Not required for FITS files having the values in the
                header.</small></td>
          </tr>
          <tr>
            <td>
              <div style="text-align: left;"><span style="font-weight: bold;">command</span></div>
            </td>
            <td> <span style="font-weight: bold;">parameter</span></td>
            <td><span style="font-weight: bold;">unit</span></td>
            <td><span style="font-weight: bold;">remarks</span></td>
          </tr>
          <tr>
            <td>-h</td>
            <td><br>
            </td>
            <td><br>
            </td>
            <td>help info</td>
          </tr>
          <tr>
            <td>-help</td>
            <td><br>
            </td>
            <td><br>
            </td>
            <td>help info</td>
          </tr>
          <tr><td></td><td></td><td></td><td style="background-color: rgb(204, 204, 255);"><big><span style="text-decoration: underline; font-weight: bold;">Solver options:</span></big></td></tr><tr>
            <td style="background-color: rgb(204, 204, 255);">-f</td>
            <td style="background-color: rgb(204, 204, 255);">file_name</td>
            <td style="background-color: rgb(204, 204, 255);"><br>
            </td>
            <td style="background-color: rgb(204, 204, 255);">File to solve astrometric.</td>
          </tr>
          <tr>
            <td style="background-color: rgb(204, 204, 255);">-r </td>
            <td style="background-color: rgb(204, 204, 255);">radius_search_field</td>
            <td style="background-color: rgb(204, 204, 255);">degrees</td>
            <td style="background-color: rgb(204, 204, 255);"> The program will search in a square spiral around the






              start position up to this radius * </td>
          </tr>
          <tr>
            <td style="background-color: rgb(204, 204, 255);">-fov </td>
            <td style="background-color: rgb(204, 204, 255);">field_height_of_image</td>
            <td style="background-color: rgb(204, 204, 255);">degrees</td>
            <td style="background-color: rgb(204, 204, 255);">Optional. Normally calculated from FITS header. Use value 0 for auto.&nbsp;
             If 0 is specified the fov found by solving it will be saved for next time.(learn mode)&nbsp; *</td>
          </tr>
          <tr>
            <td style="background-color: rgb(204, 204, 255);">-ra </td>
            <td style="background-color: rgb(204, 204, 255);">center_right_ascension </td>
            <td style="background-color: rgb(204, 204, 255);"><span style="font-weight: bold;">hours</span></td>
            <td style="background-color: rgb(204, 204, 255);">Optional start value.&nbsp;Normally calculated from
              FITS header.</td>
          </tr>
          <tr>
            <td style="background-color: rgb(204, 204, 255);">-spd </td>
            <td style="background-color: rgb(204, 204, 255);">center_south_pole_distance<br>
              (dec+90)</td>
            <td style="background-color: rgb(204, 204, 255);">degrees</td>
            <td style="background-color: rgb(204, 204, 255);">Normally calculated from FITS header *<br>
              The declination is given in south pole distance, so always
              positive.</td>
          </tr>
          <tr>
            <td style="background-color: rgb(204, 204, 255);">-z </td>
            <td style="background-color: rgb(204, 204, 255);">down_sample_factor<br>
            </td>
            <td style="background-color: rgb(204, 204, 255);">0,1,2,3,4</td>
            <td style="background-color: rgb(204, 204, 255);">Down sample prior to solving. Also called binning. A value "0" will result in auto selection downsampling. *</td>
          </tr>
          <tr>
            <td style="background-color: rgb(204, 204, 255);">-s</td>
            <td style="background-color: rgb(204, 204, 255);">max_number_of_stars</td>
            <td style="background-color: rgb(204, 204, 255);"><br>
            </td>
            <td style="background-color: rgb(204, 204, 255);">Limits the number of star used for the solution.
              Typical value 500. *</td>
          </tr>
          <tr>
            <td style="background-color: rgb(204, 204, 255);">-t</td>
            <td style="background-color: rgb(204, 204, 255);">tolerance</td>
            <td style="background-color: rgb(204, 204, 255);"><br>
            </td>
            <td style="background-color: rgb(204, 204, 255);">Tolerance used to compare&nbsp;quads. Typical value&nbsp; 0.007. *</td>
          </tr>
          <tr><td style="background-color: rgb(204, 204, 255);">-m</td><td style="background-color: rgb(204, 204, 255);">minimum star size</td><td style="background-color: rgb(204, 204, 255);">arcsec</td><td style="background-color: rgb(204, 204, 255);">This could be used to filter out hot pixels.</td></tr>
          <tr><td style="background-color: rgb(204, 204, 255);"></td><td style="background-color: rgb(204, 204, 255);"></td><td style="background-color: rgb(204, 204, 255);"></td><td style="background-color: rgb(204, 204, 255);"></td></tr><tr><td style="background-color: rgb(204, 204, 255);">-check</td><td style="background-color: rgb(204, 204, 255);">apply</td><td style="background-color: rgb(204, 204, 255);">y/n</td><td style="background-color: rgb(204, 204, 255);">Apply check pattern filter prior to solving. Use&nbsp;for raw OSC images only when binning is 1x1&nbsp;&nbsp;*</td></tr><tr><td style="background-color: rgb(204, 204, 255);">-d</td><td style="background-color: rgb(204, 204, 255);">path</td><td style="background-color: rgb(204, 204, 255);"></td><td style="background-color: rgb(204, 204, 255);">Specify a path to the star database</td></tr><tr><td style="background-color: rgb(204, 204, 255);">-D</td><td>abbreviation</td><td></td><td>Specify a star database [d80, d50, ..]</td></tr><tr><td style="background-color: rgb(204, 204, 255);">-o</td><td style="background-color: rgb(204, 204, 255);">file</td><td style="background-color: rgb(204, 204, 255);"></td><td style="background-color: rgb(204, 204, 255);">Name the output files with this base path &amp; file
              name</td></tr><tr><td>-sip</td><td>add</td><td>y/n</td><td>Add <a href="astap.htm#sip">SIP&nbsp;</a><a href="astap.htm#sip">(Simple Image Polynomial) coefficients</a>. Note the parameter is only required to deactivate SIP.</td></tr><tr><td style="background-color: rgb(204, 204, 255);">-speed</td><td style="background-color: rgb(204, 204, 255);">mode</td><td style="background-color: rgb(204, 204, 255);">slow / auto</td><td style="background-color: rgb(204, 204, 255);">"slow" is forcing the reading a larger area from the star
              database (more overlap)&nbsp; to
              improve&nbsp;detection. *</td></tr>
          <tr><td style="background-color: rgb(204, 204, 255);">-wcs</td><td style="background-color: rgb(204, 204, 255);"></td><td style="background-color: rgb(204, 204, 255);"></td><td style="background-color: rgb(204, 204, 255);">Write a .wcs file &nbsp;in&nbsp;similar format as&nbsp;Astrometry.net. Else text style</td></tr><tr><td>-update</td><td></td><td></td><td>Update the fits/tiff header with the found solution.&nbsp;Jpeg, png will be written as fits.</td></tr><tr><td>-log</td><td></td><td></td><td>Write solver log to file with extension .log</td></tr><tr><td></td><td></td><td></td><td style="background-color: rgb(153, 255, 153);"><span style="font-weight: bold; text-decoration: underline;">Analyse options</span></td></tr><tr><td style="background-color: rgb(153, 255, 153);">-analyse</td><td style="background-color: rgb(153, 255, 153);">snr_minimum</td><td style="background-color: rgb(153, 255, 153);"></td><td style="background-color: rgb(153, 255, 153);"><a href="astap.htm#analyse">Analyse</a>
only and report HFD. Windows: errorlevel is the median HFD * 100M +
number of stars used. So the HFD is trunc(errorlevel/1M)/100. <br>For Linux and macOS the info is send to stdout only.</td></tr><tr><td style="background-color: rgb(153, 255, 153);">-extract</td><td style="background-color: rgb(153, 255, 153);">snr_minimum</td><td style="background-color: rgb(153, 255, 153);"></td><td style="background-color: rgb(153, 255, 153);">As&nbsp;analyse option but additionally export info of all detectable stars to&nbsp;a .csv file. The decimal separator is&nbsp;always&nbsp;a dot.</td></tr><tr><td style="background-color: rgb(153, 255, 153);">-extract2</td><td style="background-color: rgb(153, 255, 153);">snr_minimum</td><td style="background-color: rgb(153, 255, 153);"></td><td style="background-color: rgb(153, 255, 153);">Solve image and export info of all detectable stars to&nbsp;a .csv file including<span title="Greek-language text" lang="el"> &#945;</span>,&nbsp;<span title="Greek-language text" lang="el">&#948; of each detection</span>. SIP polynomial will be used for high precision positions. The decimal separator is&nbsp;always&nbsp;a dot.<br><br>In&nbsp;versions after 2024-2-1</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td>* Defaults can be set in the program. Shortcut CTRL-A,
              tab alignment</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td style="background-color: rgb(153, 255, 255);"><span style="font-weight: bold; text-decoration: underline;">Extra options below are only for the standard GUI version of ASTAP. Not for the ASTAP_CLI version</span>.</td></tr><tr><td style="background-color: rgb(153, 255, 255);">-annotate</td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);">Produce a deep sky annotated jpeg file with same name as
              input file extended with _annotated.</td></tr><tr><td style="background-color: rgb(153, 255, 255);">-debug</td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);">Show GUI and stop prior to solving</td></tr><tr><td style="background-color: rgb(153, 255, 255);">-tofits</td><td style="background-color: rgb(153, 255, 255);">binning</td><td style="background-color: rgb(153, 255, 255);">1,2,3,4</td><td style="background-color: rgb(153, 255, 255);">Produce binned FITS file from input png/jpg</td></tr>
          
          
          
          <tr><td style="background-color: rgb(153, 255, 255);"><br></td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);"><br></td></tr><tr><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);"><big><span style="font-weight: bold; text-decoration: underline;">As analyser/stacker:</span></big></td></tr><tr><td style="background-color: rgb(153, 255, 255);">-sqm</td><td style="background-color: rgb(153, 255, 255);">pedestal</td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);">Measure the sky background value in magn/arcsec<span class="texhtml"><sup>2&nbsp; &nbsp;</sup></span> relative to the stars. The pedestal is the mean value of a dark. Also centalt and airmass are written to the header..</td></tr><tr><td style="background-color: rgb(153, 255, 255);">-focus1</td><td style="background-color: rgb(153, 255, 255);">file1.fits -focus2 file2.fits -focus3 file3.fits ................</td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);">Find
best focus point for four or more images using curve fitting. Windows:
errorlevel is focuspos*1E4 + rem.error*1E3. Linux: see stdout</td></tr><tr><td style="background-color: rgb(153, 255, 255);">-stack</td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);"></td><td style="background-color: rgb(153, 255, 255);">Start ASTAP with live stack tab visible and path selected.</td></tr>
        </tbody>
      </table>
      <font face="Courier New, Courier, monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>
      <p style="text-align: left;"><big>Commandline parameters have priority above fits header values. Front-end
          programs
          should provide access to -z and -r options. Default value for -z should be 0 (auto).</big></p><p style="text-align: left;"><br>
      </p><p style="text-align: left;"><big>Typical command
          lines</big><big><span style="font-weight: bold;">:</span></big></p>
      <p style="text-align: left; margin-left: 40px; font-family: monospace; font-weight: bold;"><big>astap.exe
          -f image.fits &nbsp;-r 50&nbsp;</big></p>
      <p style="text-align: left; margin-left: 40px; font-weight: bold; font-family: monospace;"><big>astap.exe
          -f c:\images\image.png &nbsp;-ra 23.000&nbsp; -spd 179.000
          &nbsp;-fov 1.3 &nbsp;-r
          50&nbsp;</big></p><p style="text-align: left; margin-left: 40px; font-weight: bold; font-family: monospace;"><br>
      </p>
      <p style="text-align: left;"><big>For most FITS
          files the command line
          can be short since telescope position and field of view can be
          retrieved from the FITS header. If
          a FITS file is not available, preference is a non lossless
          image format
          like .PNG or .TIFF or RAW like .CR2.&nbsp; If possible in 16
          bit or
          original 12 bit format. Not stretched or saturated, as raw as
          possible.
          For formats other then FITS the RA,DEC position and -fov
          (image HEIGHT
          in degrees !!) should be added.</big></p><p style="text-align: left;">If the&nbsp;FOV  (image height in degrees) &nbsp;is
unspecified in the command-line for RAW, PNG, TIFF files, ASTAP will
use the FOV as set in the program, stack menu, tab alignment. This
setting can be learned and updated automatically with the parameters
-fov 0. ASTAP will try all FOV between 10 degrees and&nbsp;0.3 degrees.
E.g.</p><p style="text-align: left; font-family: monospace;"><big>&nbsp; &nbsp; <span style="font-weight: bold;">astap.exe
          -f c:\images\image.png &nbsp;-ra 23.000&nbsp; -spd 179.000
          &nbsp;&nbsp;-r
          30&nbsp;</span></big><big style="font-weight: bold;">-fov 0</big></p><p style="text-align: left;"><big>After
a successful solve, the correct FOV will be stored in the ASTAP
settings. For the next solve using&nbsp;images from the same source
the&nbsp;-fov 0 parameters can be omitted and solving will be fast.</big></p><p style="text-align: left;"><big></big></p><p style="text-align: left;"><big>The
debug option allows to set some solving parameters in the GUI
(graphical user interface) and to test the commandline. In debug mode
all commandline parameters are set and the specified image is shown in
the viewer. Only the solve command has to be given manually:</big><br></p><p style="text-align: left; font-family: monospace;"><big>&nbsp; &nbsp; <span style="font-weight: bold;">astap.exe
          -f c:\images\image.png &nbsp;-ra 23.000&nbsp; -spd 179.000
          &nbsp;&nbsp;-r
          30&nbsp;</span></big><big style="font-weight: bold;">-debug</big></p><p style="text-align: left; font-family: monospace;"><big style="font-weight: bold;">or</big></p><p style="text-align: left; font-family: monospace;"><big>&nbsp; &nbsp; <span style="font-weight: bold;">astap.exe&nbsp;</span></big><big style="font-weight: bold;">-debug</big></p><span style="font-family: monospace;"><br></span>
      <big> </big><p style="text-align: left;"><big><span style="text-decoration: underline; font-weight: bold;">Command-line, output files</span></big></p><p style="text-align: left;"><big>In command line
          mode the program
          produces&nbsp;two output files at the same location as the
          input
          image. In case a solution is found it will write a .wcs file 1) containing the solved FITS header
          only.&nbsp; In any case it will write&nbsp;an INI file using the standard FITS keywords.</big></p>
      <div style="text-align: left;"> Example&nbsp;of the INI output
        file after an successful solve:</div>
      <p style="text-align: left;"><font face="Courier New, Courier,
          monospace">PLTSOLVD=T
          &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp; // T=true, F=false<br>
          CRPIX1= 1.1645000000000000E+003&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; </font><font face="Courier New, Courier,
          monospace">// X of reference
          &amp; centre
          pixel</font><br>
        <font face="Courier New, Courier, monospace"> CRPIX2=
          8.8050000000000000E+002 &nbsp; &nbsp; &nbsp; &nbsp;
          &nbsp; &nbsp; &nbsp; &nbsp;</font><font face="Courier New,
          Courier, monospace">// Y of reference
          &amp; centre pixel</font><font face="Courier New, Courier,
          monospace">
          &nbsp;<br>
          CRVAL1= 1.5463033992314939E+002&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; // RA (J2000) of the reference pixel
          [deg]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </font><br>
        <font face="Courier New, Courier, monospace"> CRVAL2=
          2.2039358425145043E+001&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; // DEC (J2000)of the reference pixel
          [deg]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </font><br>
        <font face="Courier New, Courier, monospace">
          CDELT1=-7.4798001762187193E-004&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;&nbsp;</font><font face="Courier New,
          Courier, monospace">// X pixel size [deg]</font><br>
        <font face="Courier New, Courier, monospace"> CDELT2=
          7.4845252983311850E-004&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;&nbsp;</font><font face="Courier New,
          Courier, monospace">// Y pixel size [deg]</font><br>
        <font face="Courier New, Courier, monospace">
          CROTA1=-1.1668387329628058E+000&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;&nbsp;</font><font face="Courier New,
          Courier, monospace">// Image twist of X
          axis
          [deg]</font><br>
        <font face="Courier New, Courier, monospace">
          CROTA2=-1.1900321176194073E+000 &nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; </font><font face="Courier New, Courier,
          monospace">// Image twist of Y
          axis
          [deg]</font><font face="Courier New, Courier, monospace">&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;&nbsp;</font><br>
        <font face="Courier New, Courier, monospace">
          CD1_1=-7.4781868711882519E-004&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;</font><font face="Courier New,
          Courier, monospace">// CD matrix to
          convert (x,y) to (Ra, Dec)</font><font face="Courier New,
          Courier, monospace">&nbsp;&nbsp; <br>
          CD1_2= 1.5241315209850368E-005&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp; </font><font face="Courier New,
          Courier, monospace">// CD matrix to
          convert (x,y) to (Ra, Dec)</font><font face="Courier New,
          Courier, monospace">
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp; &nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;</font><font face="Courier New,
          Courier, monospace"><br>
          CD2_1= 1.5534412042060001E-005 &nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;</font><font face="Courier New,
          Courier, monospace">// CD matrix to
          convert (x,y) to (Ra, Dec)</font><font face="Courier New,
          Courier, monospace">&nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;</font><font face="Courier New,
          Courier, monospace"><br></font><font face="Courier New,
          Courier, monospace">
          CD2_2= 7.4829732842251226E-004</font><font face="Courier New,
          Courier, monospace"> &nbsp;
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
          &nbsp; // CD matrix to
          convert (x,y) to (Ra, Dec)<br></font><font face="Courier New,
          Courier, monospace">CMDLINE=......</font><font face="Courier New,
          Courier, monospace">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
          &nbsp; // Text message containing command line used<br></font><font face="Courier New,
          Courier, monospace"></font><font face="Courier New,
          Courier, monospace">WARNING=......</font><font face="Courier New,
          Courier, monospace"> &nbsp;
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Text message containing warning(s)</font></p><div style="text-align: left;"><big><br></big></div><div style="text-align: left;"><big>The reference
          pixel is always specified for the centre of the image.&nbsp;The decimal separator is always a dot as for FITS headers.<br></big></div><big><br></big><div style="text-align: left;"><big> Example&nbsp;of the INI output
        file in case of solve failure:</big></div>
      <p style="text-align: left;"><font face="Courier New, Courier,
          monospace">PLTSOLVD=F
          &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
          &nbsp;&nbsp; // T=true, F=false<br></font><font face="Courier New,
          Courier, monospace">CMDLINE=......</font><font face="Courier New,
          Courier, monospace">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
          &nbsp; // Text message containing command line used<br></font><font face="Courier New,
          Courier, monospace">ERROR= .....</font><font face="Courier New,
          Courier, monospace"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
          &nbsp; // Text message containing any error(s). Same as exit code errors<br>WARNING= .....</font><font face="Courier New,
          Courier, monospace"> &nbsp;
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
          &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp;</font><font face="Courier New,
          Courier, monospace">Text message containing any warnings(s)</font></p>
      <p style="text-align: left;"><big>The
.wcs file contains the original FITS header with the solution added. No
data, just the header. Any warning is added to the .wcs file using the
keyword WARNING. This warning could be presented to the user for
information.</big></p><p style="text-align: left;"><big>1) Note
the wcs file is default written as text file using&nbsp;carriage return
and line feed for each line and is not conform the FITS standard.
To have .wcs file conform the&nbsp;FITS standard add the command-line
option -wcs.</big></p><p style="text-align: left;"><big><br></big></p><p style="text-align: left; text-decoration: underline; font-weight: bold;"><big>Command-line, error codes</big></p><p style="text-align: left;"><big>In
the command-line mode errors are reported&nbsp;by
an error code / errorlevel&nbsp;{%errorlevel%}. This is the same error as reported in the .ini file in case of failure.</big></p><table style="background-color: rgb(204, 204, 255); height: 257px; margin-left: 0px; width: 380px;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td style="width: 129px;"><big><span style="font-weight: bold;">Error code</span></big></td><td style="width: 233px;"><big><span style="font-weight: bold;">Description</span></big></td></tr><tr><td style="width: 129px;">0</td><td style="width: 233px;">No errors</td></tr><tr><td style="width: 129px;">1</td><td style="width: 233px;">No solution</td></tr><tr><td style="width: 129px;">2</td><td style="width: 233px;">Not enough stars detected</td></tr><tr><td style="width: 129px;"></td><td style="width: 233px;"></td></tr><tr><td style="width: 129px;">16</td><td style="width: 233px;">Error reading image file</td></tr><tr><td style="width: 129px;"></td><td style="width: 233px;"></td></tr><tr><td style="width: 129px;">32</td><td style="width: 233px;">No star database found</td></tr><tr><td>33</td><td>Error reading star database</td></tr><tr><td>34</td><td>Error updating input file </td></tr></tbody></table><br><div style="text-align: left;"><span style="font-weight: bold;"><a name="analyse"></a>To analyse a FITS file you could do in a Windows batch file </span><span style="font-weight: bold;">the following</span><span style="font-weight: bold;">:</span><br><br>c:\astap.fpc\astap.exe -f&nbsp; c:\astap.fpc\test_files\command_line_test\m16.fit -analyse 30<br>echo Exit Code is %errorlevel%<br>pause<br><br>You will get<br>Exit Code is 326000666<br><br>where the HFD is 3.26 using 666 stars<br><br>For Linux and Mac&nbsp;a stdout is used reporting as follows:<br><pre><span class="nv">HFD_MEDIAN</span><span class="o">=</span><span class="mi">3</span>.<span class="mi">3</span><br><span class="nv">STARS</span><span class="o">=</span><span class="mi">666<br></span></pre><div style="text-align: center;"><span class="mi">-analyse functionality:</span><br><span class="mi"></span></div><pre></pre><table style="width: 100px; background-color: silver; text-align: left; margin-left: auto; margin-right: auto;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td style="font-weight: bold;">Program</td><td style="font-weight: bold;">Windows</td><td style="font-weight: bold;">Linux</td><td style="font-weight: bold;">macOS</td></tr><tr><td><span style="font-weight: bold;">astap</span></td><td>exit code</td><td>stdout</td><td>stdout</td></tr><tr><td><span style="font-weight: bold;">astap_cli</span></td><td>exit code &amp; stdout</td><td>stdout</td><td>stdout</td></tr></tbody></table><pre><span class="mi"><br></span></pre><br><br><br><span style="font-weight: bold;">Finding best focus based on four or more input images:</span><br><br>c:\astap.fpc\astap -focus1 D:\temp\FocusSample\FOCUS04689.fit
    -focus2 D:\temp\FocusSample\FOCUS05039.fit -focus3
    D:\temp\FocusSample\FOCUS05389.fit -focus4
    D:\temp\FocusSample\FOCUS05739.fit -focus5
    D:\temp\FocusSample\FOCUS06089.fit -focus6
    D:\temp\FocusSample\FOCUS06439.fit -focus7
    D:\temp\FocusSample\FOCUS06789.fit -focus8
    D:\temp\FocusSample\FOCUS07139.fit<br>
    echo Exit Code is %errorlevel%<br>
    pause
    <p>or with the -debug option</p>
    <p>astap.exe&nbsp; -debug -focus1 D:\temp\FocusSample\FOCUS04689.fit
      -focus2 D:\temp\FocusSample\FOCUS05039.fit -focus3
      D:\temp\FocusSample\FOCUS05389.fit -focus4
      D:\temp\FocusSample\FOCUS05739.fit -focus5
      D:\temp\FocusSample\FOCUS06089.fit -focus6
      D:\temp\FocusSample\FOCUS06439.fit -focus7
      D:\temp\FocusSample\FOCUS06789.fit -focus8
      D:\temp\FocusSample\FOCUS07139.fit</p><p>Select&nbsp;then tab "inspector" and hit the "hyperbola curve fitting button" to test the functionality.</p><p></p>
    Here an example of the command-line output:<br><br><img style="width: 979px; height: 290px;" alt="" src="astap_command_line_focus.png"><br><br>This option is not available for the astap_cli version.<br><br><br></div><p align="left"><a name="popup_notifier"></a><big style="text-decoration: underline; font-weight: bold;">Command-line pop-up notifier</big></p><p align="left"><big>If
          the ASTAP is command-line
          executed&nbsp;in MS-Windows, it will be shown by a small ASTAP
          tray
          icon on the right side of the status bar. If you move the
          mouse to the
          ASTAP tray icon, the hint will show the search radius reached.
          To
          refresh the value move the mouse away and back.&nbsp;</big></p>
      <p align="left"><big>If
          the search spiral has reached a distance more then 2 degrees
          from
          the&nbsp;start position then&nbsp;a pop-up notifier will show
          the actual
          search distance and solver
          settings:</big></p>
      <p align="left"><img style="width: 325px; height: 110px;" alt="" src="astap_popup_notifier.png"></p>
      <ol style="text-align: left;">
        <li>The first line indicates the search spiral distance (8<span class="st"></span>) from the start position and the
          maximum search radius (90<span class="st"></span>)</li>
        <li>The image height in degrees.&nbsp;</li>
        <li>Downsample
          setting and the input dimensions of the image to solve.&nbsp;</li>
        <li>The &#945; and &#948; of the start position.&nbsp;</li>
        <li>Speed normal (&#9654;&#9654;) &nbsp;or small steps (&#9654;)</li>
      </ol><br><br><div style="text-align: left;"><big>See&nbsp;<a href="astap.htm#conditions">conditions required for solving
          </a>to
          fix solve failures. Or </big><a href="astap.htm#solvable"><big><span style="text-decoration: underline;">test if an image is solvable.</span></big></a></div>
      <p align="left"><big>Tray
          icons are default off&nbsp;in the latest Win10 version. To set
          the
          ASTAP tray icon on, start a solve via the imaging program, go
          to
          Windows&nbsp; "<span style="font-weight: bold;">Settings</span>",
          "<span style="font-weight: bold;">Taskbar</span>", "<span style="font-weight: bold;">Turn system icons on or off</span>"
          and set the ASTAP tray icon permanent "<span style="font-weight: bold;">on</span>" as shown below:</big></p>
      <p align="left"><img style="width: 572px; height: 281px;" alt="" src="astap_tray_icon.png"></p><p align="left"></p><p style="text-align: left;"><a name="performance_blind"></a><big style="font-weight: bold; text-decoration: underline;">Blind solving performance</big></p>
      <p style="text-align: left;"><big>Blind solving
          performance for a 90 degrees offset:</big></p>
      <table style="text-align: left; width: 808px; height: 184px; background-color: rgb(204, 204, 255);" border="1" cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td colspan="2"><big><span style="font-weight: bold;">ASTAP blind solver
                performance for a 90 degrees offset.</span><br><br><small>Solving a 50 seconds exposed monochrome
                image of M16, 2328x1760 pixels covering a field of 1.75
                x 1.32
                starting 90 degrees more north. Database used D50</small></big></td>
          </tr>
          <tr>
            <td><br>
            </td>
            
            <td><br>
            </td>
          </tr>
          <tr>
            <td style="text-align: left; font-weight: bold; text-decoration: underline;">Maximum&nbsp;stars
              set </td>
            
            <td style="font-weight: bold; text-decoration: underline;">Astrometric
solving
              &nbsp;time</td>
          </tr>
          <tr>
            <td>500</td>
            
            <td>23.8 sec.</td>
          </tr>
          <tr>
            <td>300</td>
            
            <td>9.8 sec</td>
          </tr>
          <tr>
            <td>200</td>
            
            <td>6.7 sec</td>
          </tr>
          
          <tr><td>100</td><td>4.8 sec</td></tr><tr>
            <td><br>
            </td>
            
            <td><br>
            </td>
          </tr>
          <tr>
            <td colspan="2">Reducing the "maximum number of
              stars to use" will result in a faster
              solving&nbsp;but also an increased risk of solve failure.</td>
          </tr>
        </tbody>
      </table>
      <p style="text-align: left;"><big><br>
        </big></p><p align="left"></p>
      <p align="left"><big> </big></p>
      <p align="left"><big style="text-decoration: underline;"><a name="platesolve2"></a><span style="font-weight: bold;"></span></big><big style="font-weight: bold; text-decoration: underline;">Usage&nbsp;as
a&nbsp;PlateSolve2 substitute</big></p><div style="text-align: left;">ASTAP
is command line compatible with Platesolve2. For older programs not
supporting ASTAP you could rename the executable astap.exe to
platesolve2.exe as a replacement. The star database files should be at
the same location as the platesolve2.exe executable.</div><p align="left">E.g. for older SGP versions:</p><p align="left"><small><small>The orginal
        PlateSolve2.exe is
        located at C:\Users\you\AppData\Local\SequenceGenerator\ &nbsp;
        &nbsp; Where "you" is your user name. &nbsp;You can access this
        directory also directly by %LOCALAPPDATA%\SequenceGenerator<br>
        <br>
      </small></small></p>
      <ol style="text-align: left;"><small><small>
        </small></small><li><small><small>Install ASTAP and additional install the&nbsp;star
          database in the same directory. Typical c:\program files\astap</small></small></li><li><small><small>Copy or move the astap.exe &nbsp;and all&nbsp;files with

          extension .1476&nbsp; to
          C:\Users\you\AppData\Local\SequenceGenerator\</small></small></li><small><small>
        </small></small><li><small><small>Rename the original Platesolve2.exe to something
          like&nbsp;PlateSolve2ORG.exe</small></small></li><small><small>
        </small></small><li><small><small>Rename ASTAP.exe to PlateSolve2.exe</small></small></li><small><small>
        </small></small><li><small><small>Test it with SGP. The confidence will be always 999. No
          PlateSolve2 window will be shown.</small></small></li><li><small><small><br></small></small></li></ol><div style="text-align: left;">For older Voyager version<small> the original
        PlateSolve2.exe is
        located at&nbsp;<strong> C:\Program Files (x86)\Voyager</strong>&nbsp;</small></div><br><div style="text-align: left;"><p align="left"><big>Solving should be reliable. In
            case of failure, have a look to&nbsp;<a href="astap.htm#conditions">conditions required for
              solving.</a></big><big><span style="font-weight: bold;"><span style="text-decoration: underline;"></span></span></big></p>
      
      <small>
        </small></div><p align="left"><a href="astap.htm#index">Back
          to index</a></p>
      <hr style="width: 100%; height: 2px;"><big><span style="font-weight: bold;"></span></big><div style="text-align: left;"><p align="left"><span style="font-family: Arial;"><span style="font-weight: bold; text-decoration: underline;"><a name="solver_installation"></a></span></span><span style="font-family: Arial;"><span style="font-weight: bold; text-decoration: underline;">Installation
of the external Astrometry.net&nbsp;solver</span>: </span></p>
<p align="left"><span style="text-decoration: underline;"></span></p>
<p align="left"><span style="font-family: Arial;"><span style="font-weight: bold;">MS-Windows</span>: <br>
</span><span style="font-family: Arial;"></span><br>
<span style="font-family: Arial;"></span><span style="font-family: Arial;">Install a local copy
of Astrometry.net (</span><span style="font-family: Arial;">via</span><span style="font-family: Arial;"> <a href="http://adgsoftware.com/ansvr/" rel="external nofollow" target="_blank">ANSVR</a> &nbsp;or&nbsp;</span><span style="font-family: Arial;">&nbsp;<a href="https://sourceforge.net/p/astrotortilla/home/Home/">Astrotortilla)</a>&nbsp;&nbsp;
as the&nbsp;astrometric
solver. Or&nbsp;alternatively if you have Win10, 64 bit Creation
edition you use the new Linux sub-system<br>
</span></p><br><span style="font-weight: bold;">ANSVR</span>: The
ANSVR link contains a newer compilation of astrometry.net made for SGP.
It runs as a Linux program under Cygwin in MSWindows. Follow up to
installation step 9. The link you have to put in ASTAP is as follows:<br><div style="margin-left: 40px; text-align: left;">
<br>
C:\Users\user_name\AppData\Local\cygwin_ansvr\bin\bash.exe &nbsp; &nbsp;&nbsp;<br>
<br>
Adapt "user_name" to the login name used in Windows. <br>
<br>
The server program ANSVR is not required. Remove the ANSVR
shortcut&nbsp;in the startup menu. Location:<br>
<br>
C:\Users\user_name\AppData\Roaming\Microsoft\Windows\Start
Menu\Programs\Startup<br>
<br>
<br>
Alternative <a href="linux_subsyst.htm"><span style="font-weight: bold;">Linux sub-system in Win10 64bit
Creators edition</span></a><br>
<br>
Path for the astrometry.net solver program<br>
ANSVR installation:<br>
&nbsp;&nbsp;&nbsp;
C:\Users\user_name\AppData\Local\cygwin_ansvr\bin\bash.exe<br>
Astrotortilla installation: <br>
&nbsp;&nbsp;&nbsp; C:\cygwin\bin\bash.exe<br>
Win10 subsystem:<br>
&nbsp;&nbsp;&nbsp; C:\Windows\System32\bash.exe<br>
</div>
<div style="margin-left: 80px;"><br>
</div>
<br>
<div style="text-align: left;"><span style="font-weight: bold;">Linux installation:</span><br>
</div>
<div style="margin-left: 40px; text-align: left;">The
single executable astap could be
used anywhere. Standard directory could be c:/opt/astap but also at
your home folder.<br>
<br>
If you want to use&nbsp; <a href="http://astrometry.net/use.html">astrometry.net</a>&nbsp;
this is described at <a href="http://astrometry.net/doc/readme.html#installing">installation</a>.
To get the Astrometry.net solver&nbsp;type:&nbsp;sudo apt-get
install libcairo2-dev
libnetpbm10-dev netpbm libpng-dev libjpeg-dev python-numpy
python-pyfits python-dev zlib1g-dev libbz2-dev swig libcfitsio-dev
&nbsp; You also have to download index files.<br>
<br>
Path to the astrometry.net solver program "solve-field" could be:<br>
<br>
/usr/bin/<br>
or<br>
/usr/local/astrometry/bin<br>
</div><br></div><br><br>
      <div style="text-align: left;"><big><a style="font-weight: bold;" name="stack_process"></a><span style="font-weight: bold;">Appendix 1, the stack
            process:</span></big><big style="font-weight: bold;"><span style="text-decoration: underline;"><br><br></span></big>
        <div style="margin-left: 40px;"><big>The stacking process for
          one shot color color camera's will be mathematically executed
          as
          follows:<br>
          <br>
          The master flat is calculated as:<br>
          <br>
          <span style="font-weight: bold;">master flat: = (1/n &#8721; [flats] - 1/n &#8721; [flat darks] )</span><br>
          <br>
          Where a bias image could be used as flat-dark image. The
          master flat
          should be averaged by a 2x2mean to remove Bayer matrix
          artifacts.<br>
          <br>
          Each image is calculated as:<br>
          <br>
          <span style="font-weight: bold;">(image- {1/n&#8721; [darks]} ) / master flat</span><br>
          <br>
          Then the Bayer matrix is applied and finally the images are
          stacked in
          mode average or sigma clipped.<br>
          <br>
          So for average stack:<br>
          <br>
          <span style="font-weight: bold;">final image:= 1/n &#8721; Bayer(image)</span></big></div>
        <p align="left"></p>
        <p align="left"> <a href="astap.htm#index">Back
            to index</a></p>
      </div>
      <div style="text-align: left;"><big style="font-weight: bold;"><span style="text-decoration: underline;"><a name="why-flat-darks"></a>Appendix 2, Why use flat-darks</span></big><br><p><big>The main reason why you have to use flat-darks or bias frames is that
 they provide a pedestal so a fixed value to the flat routine. The same 
pedestal value which is present in the flat. This is typical a pixel 
value of something around 500 to 1000. Without this value the flat 
compensation will not work properly, and the darker corners of the light
 frame(s) will be under compensated.</big></p>


<p><big>This can be visualised&nbsp;with a simple X, Y diagram. The green part of the 
value is due to the light exposure. Blue is the pedestal value. If the 
flat-dark is included (subtracted) the intensity at the corners of the 
sensor drops to 40000/50000 equals 80%. If no flat-dark is included, 
then the measured intensity drop will be 41000/51000 equals 80.3%. This 
will result in an under compensation by the flat routine and the corners
 of the stack will be a little darker than the center. So use flat-darks
 or bias frames for best flat correction.</big></p>

<p><big>Some cameras behave a little weird in the first second. For those it 
could be better to use the same exposure time for the flat-dark as for 
the flat.&nbsp; A bias is a flat-dark with an exposure time 0 or about zero. 
For most cameras you will not notice the difference between using either
 a bias or flat-dark.&nbsp;</big></p>
<p><img style="width: 635px; height: 660px;" alt="" src="astap_flat_dark1.png"></p><p><big>The
dark temperature should be about equal as the the light temperature.
Calibration with a&nbsp;master dark of a lower temperature&nbsp;gives a
poorer result then calibration with a master dark of equal temperature.
See test results below:</big></p><p><img style="width: 1015px; height: 397px;" alt="" src="astap_dark_test1.png"></p>
<p><br></p><p align="left"></p>
        <p align="left"> <a href="astap.htm#index">Back
            to index</a></p><br><big style="font-weight: bold;"><span style="text-decoration: underline;"><br><a name="1476"></a>Appendix 3, the&nbsp;1476 and 001 star database format:<br><br></span>The 1476 format:<span style="text-decoration: underline;"><br><br></span></big><span class="comment-copy">The .1476 format divides the sky in&nbsp;1476 area's and 1476
      corresponding files with the extension .1476. </span><span class="comment-copy">
The 1476 areas have a minimum width or diameter of 90</span><span role="math" class="sfrac tion"><span class="num"></span></span><span class="comment-copy"></span><span class="comment-copy">/17.5 equals 5.143</span><span role="math" class="sfrac tion"><span class="num"></span></span><span class="comment-copy">. &nbsp;The
boundaries are defined by constan</span>t &#945; and &#948; v<span class="comment-copy">alues.</span><span class="comment-copy"> For the similar 290 file format see the <a href="http://www.hnsky.org/help/uk/hnsky.htm#database">HNSKY help file</a><br></span><span class="comment-copy"><br>Each star is stored in a record of 5 bytes. The files start 'with a 110 byte header containing a
      textual description and the record size binary stored in byte 110. &nbsp;</span><span class="comment-copy">The RA values are stored as a 3 bytes word. The DEC positions are stored as a
two's complement (=standard), three bytes integer. The resolution of
this three byte storage will be for RA: 360*60*60/((256*256*256)-1) =
0.077 arc seconds. For the DEC value it will be:
90*60*60/((128*256*256)-1) = 0.039 arc seconds.&nbsp; The stars are
sorted on magnitude and the magnitude is stored in a byte of the
special preceding header with an offset to make all values positive.<br>
      </span><br><span class="comment-copy">
      <font face="Courier" size="2"> &nbsp;&nbsp;Example of star Sirius
        RA and DEC position:<br>
        &nbsp;&nbsp;The RA position is stored as C3 06 48 equals:
        (195 +6*256 +72*256*256)<b>*24</b>/((256*256*256)-1)=6.75247662
        hours equals: 6:45:8.9<br>
        &nbsp;&nbsp;The DEC position is stored as D7 39 E8, equals: 215
        57 -24. The DEC is then (215 +57*256 -24*256*256)<b>*90</b>/((128*256*256)-1)=-16.7161401











































































































        degrees equals -16d 42 58<br>
      </font> </span><br><span class="comment-copy">Record format:<br>
      <br>
      </span>The 1476-5 or 290-5, short record size of 5 bytes for one star without
    designation used for the G05, D05, D20,D50:<br><br><span class="comment-copy"><font face="courier" size="2"><span class="comment-copy">
          <font face="courier" size="2"> &nbsp;&nbsp;&nbsp;&nbsp;type<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;hnskyhdr1476 = packed record<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ra7&nbsp; : byte;<br>
            &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;ra8&nbsp; : byte;<br>&nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ra9&nbsp; : byte;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;dec7 : byte;<br>
            &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;dec8 : byte;{magnitude and dec9 are
            written once in preceding header-record} <br>&nbsp;&nbsp; &nbsp;&nbsp; end;<br><br></font></span></font></span>The 1476-6 or 290-6, short record size of 6 bytes for one star without
    designation: used for the V50<br><span class="comment-copy"><font face="courier" size="2"><span class="comment-copy"><font face="courier" size="2"> &nbsp;&nbsp;&nbsp;&nbsp;type<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;hnskyhdr1476 = packed record<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ra7&nbsp; : byte;<br>
            &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;ra8&nbsp; : byte;<br>&nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ra9&nbsp; : byte;<br>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;dec7 : byte;<br>
            &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;dec8 : byte;{magnitude and dec9 are
            written once in preceding header-record} <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B_R&nbsp; : shortint;{Gaia Bp-Rp}&nbsp; <br>&nbsp;&nbsp; &nbsp;&nbsp; end;</font></span></font></span><br><span class="comment-copy"><font face="courier" size="2"><span class="comment-copy"><font face="courier" size="2">
          </font> <br>
        </span></font></span><span class="comment-copy"><br></span><span class="comment-copy"></span><span class="comment-copy"><br>
      Stars are sorted from bright to
      faint in the "0.1" steps. Within the magnitude range, the stars are
      additional sorted in DEC. For a series of stars with the same DEC9
      value, a <span style="font-weight: bold;">header-record</span>
is preceding containing the DEC9 value stored at location DEC7. Since
the stars are already sorted in 36 declination bands, the number of
DEC9 values is already limited by a factor 36.<br>
      <br>1476-5 <span style="font-weight: bold;">header-record</span> example: FF FF FF 20 06 This indicates the
      following records have a DEC9 value of 20 -128 offset and a
      magnitude of (06 - 16)/10 equals -1.0 (new method, +16 offset).<br><br>
The shorter records methods become only space efficient for very large
star collection of a few million stars. In these large collections many
stars can be found with the same magnitude and DEC9 shortint. The Gaia
database is&nbsp; issued in the 1476-5 format of 5 bytes per star or
1476-6 of 6 bytes per star (V50). An older format 290-5 is used for
larger field of view (G05. Thes 290 areas are documented in the HNSKY
planetarium
program help file.<br><br>So the record sequence will be as follows:<br><br></span><div style="margin-left: 40px;"><span class="comment-copy">header-record </span><span class="comment-copy">{new section will start with a different magnitude and dec9}</span><br><span class="comment-copy">record</span><br><span class="comment-copy">record</span><br><span class="comment-copy">record</span><br><span class="comment-copy">record</span><br><span class="comment-copy">header-record &nbsp;{new section will start with a different magnitude and dec9}</span><br><span class="comment-copy">record</span><br><span class="comment-copy">record</span><br><span class="comment-copy">
      </span><br><span class="comment-copy"></span></div><span class="comment-copy"><br><span style="font-weight: bold;">The 1476 areas:</span> Each ring is divided by lines of constant RA such that the <span style="font-weight: bold;">minimum width</span> in RA is about 5 degrees (deltaRA*cos(DEC)</span><br>.<span class="comment-copy"><br>
      </span>
 <table style="border-collapse: collapse; width: 689px; height: 866px;" x:str="" border="2" cellpadding="0" cellspacing="0"><col span="2" style="width: 64pt;" width="85">
 <col style="width: 48pt;" width="64">
 <col style="width: 48pt;" width="64">
 <col span="2" style="width: 61pt;" width="81">
 <col style="width: 59pt;" width="78">
 <tbody><tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt; font-weight: bold; width: 64pt;" x:str="Declination  " height="17" width="85">Declination<span style=""> minimum &nbsp;</span></td>
  <td class="xl25" style="width: 64pt; font-weight: bold;" x:str="Declination " width="85">Declination<span style=""> maximum</span></td>
  <td class="xl24" style="width: 48pt; font-weight: bold;" width="64">Ring</td>
  <td style="width: 48pt; font-weight: bold;" x:str="RA " width="64">RA cells<span style="">&nbsp;</span></td>
  <td style="width: 61pt; font-weight: bold;" width="81">RA step north[degr]</td>
  <td style="width: 61pt; font-weight: bold;" x:str="        RA step " width="81"><span style=""></span>RA step<span style=""> distance south[degr]</span></td>
  <td style="width: 59pt; font-weight: bold;" width="78">DEC step</td><td></td><td>Files</td>
 </tr>
 
 
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="" align="right" height="17">&nbsp;-90.00000000</td>
  <td class="xl25" x:num="-87.428571430000005" align="right">&nbsp;-87.42857143&nbsp;</td>
  <td class="xl24">&nbsp;0-1</td>
  <td x:num="" align="right">1</td>
  <td class="xl25"></td>
  <td class="xl25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</td>
  <td class="xl25"></td><td></td><td>0101.1476
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-87.428571430000005" align="right" height="17">-87.42857143</td>
  <td class="xl25" x:num="-82.285714290000001" align="right">-82.28571429</td>
  <td class="xl24">&nbsp;1-2</td>
  <td x:num="" align="right">3</td>
  <td class="xl25" x:num="5.3837796400000002" align="right">5.38377964</td>
  <td class="xl25" x:num="16.107991899999998" align="right">16.10799190</td>
  <td class="xl25">&nbsp;-2.57142857<span style="">&nbsp;&nbsp;</span></td><td>{=90/(2*17.5)}</td><td>0201.1476,&nbsp;0202.1476,&nbsp;0203.1476</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-82.285714290000001" align="right" height="17">-82.28571429</td>
  <td class="xl25" x:num="-77.142857140000004" align="right">-77.14285714</td>
  <td class="xl24">&nbsp;2-3</td>
  <td x:num="" align="right">9</td>
  <td class="xl25" x:num="5.3693306300000003" align="right">5.36933063</td>
  <td class="xl25" x:num="8.9008373600000006" align="right">8.90083736</td>
  <td class="xl25">&nbsp; &nbsp;-5.14285714<span style="">&nbsp;&nbsp;</span></td><td>{=90/17.5}</td><td>0301.1476,&nbsp; . . . . . ,&nbsp;0309.1476</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-77.142857140000004" align="right" height="17">-77.14285714</td>
  <td class="xl25" x:num="" align="right">-72.00000000</td>
  <td class="xl24">&nbsp;3-4</td>
  <td x:num="" align="right">15</td>
  <td class="xl25" x:num="5.34050241" align="right">5.34050241</td>
  <td class="xl25" x:num="7.4164078599999996" align="right">7.41640786</td>
  <td class="xl25">&nbsp;-5.14285714<span style="">&nbsp;&nbsp;</span></td><td>{=90/17.5}</td><td>0401.1476,&nbsp; . . . . .&nbsp;,&nbsp;0415.1476</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="" align="right" height="17">-72.00000000</td>
  <td class="xl25" x:num="-66.857142859999996" align="right">-66.85714286</td>
  <td class="xl24">&nbsp;4-5</td>
  <td x:num="" align="right">21</td>
  <td class="xl25" x:num="5.2974341899999997" align="right">5.29743419</td>
  <td class="xl25" x:num="6.7375719700000003" align="right">6.73757197</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>0501.1476,&nbsp; . . . . .&nbsp;,&nbsp;0521.1476</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-66.857142859999996" align="right" height="17">-66.85714286</td>
  <td class="xl25" x:num="-61.714285709999999" align="right">-61.71428571</td>
  <td class="xl24">&nbsp;5-6</td>
  <td x:num="" align="right">27</td>
  <td class="xl25" x:num="5.2403337600000004" align="right">5.24033376</td>
  <td class="xl25" x:num="6.3182488299999999" align="right">6.31824883</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>06 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-61.714285709999999" align="right" height="17">-61.71428571</td>
  <td class="xl25" x:num="-56.571428570000002" align="right">-56.57142857</td>
  <td class="xl24">&nbsp;6-7</td>
  <td x:num="" align="right">33</td>
  <td class="xl25" x:num="5.1694763200000002" align="right">5.16947632</td>
  <td class="xl25" x:num="6.0097852500000002" align="right">6.00978525</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>07 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-56.571428570000002" align="right" height="17">-56.57142857</td>
  <td class="xl25" x:num="-51.428571429999998" align="right">-51.42857143</td>
  <td class="xl24">&nbsp;7-8</td>
  <td x:num="" align="right">38</td>
  <td class="xl25" x:num="5.2190240299999999" align="right">5.21902403</td>
  <td class="xl25" x:num="5.9067454899999996" align="right">5.90674549</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>08 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-51.428571429999998" align="right" height="17">-51.42857143</td>
  <td class="xl25" x:num="-46.285714290000001" align="right">-46.28571429</td>
  <td class="xl24">&nbsp;8-9</td>
  <td x:num="" align="right">43</td>
  <td class="xl25" x:num="5.2199146199999999" align="right">5.21991462</td>
  <td class="xl25" x:num="5.7856407799999996" align="right">5.78564078</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>09 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-46.285714290000001" align="right" height="17">-46.28571429</td>
  <td class="xl25" x:num="-41.142857139999997" align="right">-41.14285714</td>
  <td class="xl24">&nbsp;9-10</td>
  <td x:num="" align="right">48</td>
  <td class="xl25" x:num="5.18296987" align="right">5.18296987</td>
  <td class="xl25" x:num="5.6480360000000003" align="right">5.64803600</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>10 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-41.142857139999997" align="right" height="17">-41.14285714</td>
  <td class="xl25" x:num="" align="right">-36.00000000</td>
  <td class="xl24">&nbsp;10-11</td>
  <td x:num="" align="right">52</td>
  <td class="xl25" x:num="5.2135716900000002" align="right">5.21357169</td>
  <td class="xl25" x:num="5.60088688" align="right">5.60088688</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>11 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="" align="right" height="17">-36.00000000</td>
  <td class="xl25" x:num="-30.85714286" align="right">-30.85714286</td>
  <td class="xl24">&nbsp;11-12</td>
  <td x:num="" align="right">56</td>
  <td class="xl25" x:num="5.20082354" align="right">5.20082354</td>
  <td class="xl25" x:num="5.5185993900000003" align="right">5.51859939</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>12 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-30.85714286" align="right" height="17">-30.85714286</td>
  <td class="xl25" x:num="-25.714285709999999" align="right">-25.71428571</td>
  <td class="xl24">&nbsp;12-13</td>
  <td x:num="" align="right">60</td>
  <td class="xl25" x:num="5.1506927600000001" align="right">5.15069276</td>
  <td class="xl25" x:num="5.4058132099999998" align="right">5.40581321</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>13 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-25.714285709999999" align="right" height="17">-25.71428571</td>
  <td class="xl25" x:num="-20.571428569999998" align="right">-20.57142857</td>
  <td class="xl24">&nbsp;13-14</td>
  <td x:num="" align="right">63</td>
  <td class="xl25" x:num="5.1483935299999999" align="right">5.14839353</td>
  <td class="xl25" x:num="5.3499135500000001" align="right">5.34991355</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>14 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-20.571428569999998" align="right" height="17">-20.57142857</td>
  <td class="xl25" x:num="-15.42857143" align="right">-15.42857143</td>
  <td class="xl24">&nbsp;14-15</td>
  <td x:num="" align="right">65</td>
  <td class="xl25" x:num="5.1853008200000001" align="right">5.18530082</td>
  <td class="xl25" x:num="5.3388712299999996" align="right">5.33887123</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>15 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-15.42857143" align="right" height="17">-15.42857143</td>
  <td class="xl25" x:num="-10.28571429" align="right">-10.28571429</td>
  <td class="xl24">&nbsp;15-16</td>
  <td x:num="" align="right">67</td>
  <td class="xl25" x:num="5.1795019399999997" align="right">5.17950194</td>
  <td class="xl25" x:num="5.2867858500000002" align="right">5.28678585</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>16 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-10.28571429" align="right" height="17">-10.28571429</td>
  <td class="xl25" x:num="-5.1428571400000003" align="right">-5.14285714</td>
  <td class="xl24">&nbsp;16-17</td>
  <td x:num="" align="right">68</td>
  <td class="xl25" x:num="5.2090389999999998" align="right">5.20903900</td>
  <td class="xl25" x:num="5.2728050900000003" align="right">5.27280509</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>17 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="-5.1428571400000003" align="right" height="17">-5.14285714</td>
  <td class="xl25" x:num="" align="right">0.00000000</td>
  <td class="xl24">&nbsp;17-18</td>
  <td x:num="" align="right">69</td>
  <td class="xl25" x:num="5.1963876200000003" align="right">5.19638762</td>
  <td class="xl25" x:num="5.2173913000000001" align="right">5.21739130</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>18 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" height="17"></td>
  <td class="xl25"></td>
  <td class="xl24"></td>
  <td></td>
  <td class="xl25"></td>
  <td class="xl25"></td>
  <td class="xl25"></td><td></td><td></td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="" align="right" height="17">0.00000000</td>
  <td class="xl25" x:num="5.1428571400000003" align="right">5.14285714</td>
  <td class="xl24">&nbsp;18-19</td>
  <td x:num="" align="right">69</td>
  <td class="xl25" x:num="5.2173913000000001" align="right">5.21739130</td>
  <td class="xl25" x:num="5.1963876200000003" align="right">5.19638762</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>19 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="5.1428571400000003" align="right" height="17">5.14285714</td>
  <td class="xl25" x:num="10.28571429" align="right">10.28571429</td>
  <td class="xl24">&nbsp;19-20</td>
  <td x:num="" align="right">68</td>
  <td class="xl25" x:num="5.2728050900000003" align="right">5.27280509</td>
  <td class="xl25" x:num="5.2090389999999998" align="right">5.20903900</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>20 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="10.28571429" align="right" height="17">10.28571429</td>
  <td class="xl25" x:num="15.42857143" align="right">15.42857143</td>
  <td class="xl24">&nbsp; &nbsp;20-21</td>
  <td x:num="" align="right">67</td>
  <td class="xl25" x:num="5.2867858500000002" align="right">5.28678585</td>
  <td class="xl25" x:num="5.1795019399999997" align="right">5.17950194</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>21 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="15.42857143" align="right" height="17">15.42857143</td>
  <td class="xl25" x:num="20.571428569999998" align="right">20.57142857</td>
  <td class="xl24">&nbsp;21-22</td>
  <td x:num="" align="right">65</td>
  <td class="xl25" x:num="5.3388712299999996" align="right">5.33887123</td>
  <td class="xl25" x:num="5.1853008200000001" align="right">5.18530082</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>22 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="20.571428569999998" align="right" height="17">20.57142857</td>
  <td class="xl25" x:num="25.714285709999999" align="right">25.71428571</td>
  <td class="xl24">&nbsp;22-23</td>
  <td x:num="" align="right">63</td>
  <td class="xl25" x:num="5.3499135500000001" align="right">5.34991355</td>
  <td class="xl25" x:num="5.1483935299999999" align="right">5.14839353</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>23 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="25.714285709999999" align="right" height="17">25.71428571</td>
  <td class="xl25" x:num="30.85714286" align="right">30.85714286</td>
  <td class="xl24">&nbsp;23-24</td>
  <td x:num="" align="right">60</td>
  <td class="xl25" x:num="5.4058132099999998" align="right">5.40581321</td>
  <td class="xl25" x:num="5.1506927600000001" align="right">5.15069276</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>24 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="30.85714286" align="right" height="17">30.85714286</td>
  <td class="xl25" x:num="" align="right">36.00000000</td>
  <td class="xl24">&nbsp;24-25</td>
  <td x:num="" align="right">56</td>
  <td class="xl25" x:num="5.5185993900000003" align="right">5.51859939</td>
  <td class="xl25" x:num="5.20082354" align="right">5.20082354</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>25 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="" align="right" height="17">36.00000000</td>
  <td class="xl25" x:num="41.142857139999997" align="right">41.14285714</td>
  <td class="xl24">&nbsp;25-26</td>
  <td x:num="" align="right">52</td>
  <td class="xl25" x:num="5.60088688" align="right">5.60088688</td>
  <td class="xl25" x:num="5.2135716900000002" align="right">5.21357169</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>26 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="41.142857139999997" align="right" height="17">41.14285714</td>
  <td class="xl25" x:num="46.285714290000001" align="right">46.28571429</td>
  <td class="xl24">&nbsp;26-27</td>
  <td x:num="" align="right">48</td>
  <td class="xl25" x:num="5.6480360000000003" align="right">5.64803600</td>
  <td class="xl25" x:num="5.18296987" align="right">5.18296987</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>27 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="46.285714290000001" align="right" height="17">46.28571429</td>
  <td class="xl25" x:num="51.428571429999998" align="right">51.42857143</td>
  <td class="xl24">&nbsp;27-28</td>
  <td x:num="" align="right">43</td>
  <td class="xl25" x:num="5.7856407799999996" align="right">5.78564078</td>
  <td class="xl25" x:num="5.2199146199999999" align="right">5.21991462</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>28 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="51.428571429999998" align="right" height="17">51.42857143</td>
  <td class="xl25" x:num="56.571428570000002" align="right">56.57142857</td>
  <td class="xl24">&nbsp;28-29</td>
  <td x:num="" align="right">38</td>
  <td class="xl25" x:num="5.9067454899999996" align="right">5.90674549</td>
  <td class="xl25" x:num="5.2190240299999999" align="right">5.21902403</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>29 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="56.571428570000002" align="right" height="17">56.57142857</td>
  <td class="xl25" x:num="61.714285709999999" align="right">61.71428571</td>
  <td class="xl24">&nbsp;29-30</td>
  <td x:num="" align="right">33</td>
  <td class="xl25" x:num="6.0097852500000002" align="right">6.00978525</td>
  <td class="xl25" x:num="5.1694763200000002" align="right">5.16947632</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>30 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="61.714285709999999" align="right" height="17">61.71428571</td>
  <td class="xl25" x:num="66.857142859999996" align="right">66.85714286</td>
  <td class="xl24">&nbsp;30-31</td>
  <td x:num="" align="right">27</td>
  <td class="xl25" x:num="6.3182488299999999" align="right">6.31824883</td>
  <td class="xl25" x:num="5.2403337600000004" align="right">5.24033376</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>31 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="66.857142859999996" align="right" height="17">66.85714286</td>
  <td class="xl25" x:num="" align="right">72.00000000</td>
  <td class="xl24">&nbsp;31-32</td>
  <td x:num="" align="right">21</td>
  <td class="xl25" x:num="6.7375719700000003" align="right">6.73757197</td>
  <td class="xl25" x:num="5.2974341899999997" align="right">5.29743419</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>32 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="" align="right" height="17">72.00000000</td>
  <td class="xl25" x:num="77.142857140000004" align="right">77.14285714</td>
  <td class="xl24">&nbsp;32-33</td>
  <td x:num="" align="right">15</td>
  <td class="xl25" x:num="7.4164078599999996" align="right">7.41640786</td>
  <td class="xl25" x:num="5.34050241" align="right">5.34050241</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>33 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="77.142857140000004" align="right" height="17">77.14285714</td>
  <td class="xl25" x:num="82.285714290000001" align="right">82.28571429</td>
  <td class="xl24">&nbsp;33-34</td>
  <td x:num="" align="right">9</td>
  <td class="xl25" x:num="8.9008373600000006" align="right">8.90083736</td>
  <td class="xl25" x:num="5.3693306300000003" align="right">5.36933063</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>34 . . .</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="82.285714290000001" align="right" height="17">82.28571429</td>
  <td class="xl25" x:num="87.428571430000005" align="right">87.42857143</td>
  <td class="xl24">&nbsp;34-35</td>
  <td x:num="" align="right">3</td>
  <td class="xl25" x:num="16.107991899999998" align="right">16.10799190</td>
  <td class="xl25" x:num="5.3837796400000002" align="right">5.38377964</td>
  <td style="text-align: left;" class="xl25" x:num="-5.1428571400000003">&nbsp;-5.14285714</td><td></td><td>3501.1476,&nbsp;3502.1476,&nbsp;3503.1476</td>
 </tr>
 <tr style="height: 12.75pt;" height="17">
  <td class="xl25" style="height: 12.75pt;" x:num="87.428571430000005" align="right" height="17">87.42857143</td>
  <td class="xl25" x:num="" align="right">90.00000000</td>
  <td class="xl24">&nbsp;36-37</td>
  <td x:num="" align="right">1</td>
  <td class="xl25"></td>
  <td class="xl25"></td>
  <td style="text-align: left;" class="xl25"></td><td></td><td>3601.1476</td>
 </tr></tbody></table><br>The 1476 areas:<br><span class="comment-copy"></span><img style="width: 681px; height: 650px;" alt="" src="1476_1.png"><br><br>South pole view of the 1476 areas:<br><img style="width: 683px; height: 659px;" alt="" src="1476_2.png"><br><br><br><big style="font-weight: bold;">The 001 format:</big><br><br>For
wide field the stars are stored in a single file w08.001 down to
magnitude 8.&nbsp; The stars are sorted from bright to faint. The file
starts with a 4 byte integer specifying the number of records=stars and
has for the W08 value 41246. Each star is stored in a record of three
singles (4 byte floats). Starting with magnitude [x10] then&nbsp; RA
[radians]&nbsp; and finally DEC[radians]. So the data is written as the
following array (first star is Sirius):<br><br><span style="font-family: monospace;">&nbsp; star_array : array[0..41264,0..2] of single =&nbsp;&nbsp;&nbsp; //all stars up
      to magnitude 8</span><br style="font-family: monospace;"><span style="font-family: monospace;">
      &nbsp; (</span><br style="font-family: monospace;"><span style="font-family: monospace;">
&nbsp; (&nbsp; -15&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp;&nbsp;
1.767725252&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp; -0.291899504&nbsp;&nbsp; ),</span><br style="font-family: monospace;"><span style="font-family: monospace;">
&nbsp; (&nbsp;&nbsp; -6&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp;&nbsp;
1.675309906&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp; -0.919709903&nbsp;&nbsp; ),</span><br style="font-family: monospace;"><span style="font-family: monospace;">
&nbsp; (&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp;&nbsp;
4.873596766&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp;&nbsp;
0.676937966&nbsp;&nbsp; ),</span><br style="font-family: monospace;"><span style="font-family: monospace;">
&nbsp; (&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp;&nbsp;
3.837100429&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp; -1.061694783&nbsp;&nbsp; ),</span><br style="font-family: monospace;"><span style="font-family: monospace;">
&nbsp; (&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp;&nbsp;
3.73338603 &nbsp; &nbsp; ,&nbsp;&nbsp;&nbsp; 0.334553937&nbsp;&nbsp; ),</span><br style="font-family: monospace;"><span style="font-family: monospace;">
&nbsp; (&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp;&nbsp;
1.381830995&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp;&nbsp;
0.802764629&nbsp;&nbsp; ),</span><br style="font-family: monospace;"><span style="font-family: monospace;">
&nbsp; (&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp;&nbsp;
1.372430608&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp; -0.143145706&nbsp;&nbsp; ),</span><br style="font-family: monospace;"><span style="font-family: monospace;">
&nbsp; (&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp;&nbsp;
2.003995701&nbsp;&nbsp;&nbsp; ,&nbsp;&nbsp;&nbsp;
0.091067934&nbsp;&nbsp; ),</span><br>
      &nbsp; <br><big style="font-weight: bold;"><span style="text-decoration: underline;"></span></big><p align="left"><a href="astap.htm#index">Back
            to index</a></p><br><hr style="width: 100%; height: 2px;"><big style="font-weight: bold;"><span style="text-decoration: underline;"><br><a name="sip"></a></span> &nbsp;SIP </big><big style="font-weight: bold;">polynomial coefficients</big><big style="font-weight: bold;"><span style="font-weight: bold;">:</span><span style="text-decoration: underline;"><br><br></span></big><big><span style="text-decoration: underline;">The ASTAP&nbsp;</span></big><big>solver can add 3th order <a href="astap.htm#sip">SIP</a> polynomial coefficients to the header to cope with </big><big>image distortion.</big><big> <br><br></big><big>Adding SIP coefficients&nbsp;ensures accurate positional 
information of celestial objects and to facilitate precise image 
stitching. Astronomical images often suffer from barrel distortion, 
where stars near the edges appear to move outward from the center of the
 image. SIP (Simple Image Polynomial) coefficients provide a polynomial 
model to represent this distortion. This model mathematically describes 
how the actual positions of stars (or other celestial objects) in the 
image deviate from their ideal positions on a distortion-free plane.</big><big> The SIP correction can be tested with the option "<a href="astap.htm#show_distortion">Show distortion</a>". The SIP option can be set in the <a href="#add_sip">tab alignment</a> and can also be activated by a <a href="astap.htm#astap_command_line">command-line</a> parameter. The&nbsp;astap_cli command-line version can also add SIP coefficients.</big><br><big style="font-weight: bold;"><span style="text-decoration: underline;"><br></span></big><big>External link:</big><big style="font-weight: bold;"><span style="text-decoration: underline;"><br><br></span></big><big><a href="sip.htm">Developer information: Using&nbsp;SIP Coefficients&nbsp;for optical distortion correction</a></big><big style="font-weight: bold;"> <br><br></big><br></div><br>
      <big style="font-weight: bold;"><span style="text-decoration: underline;"></span></big>
      <hr size="1"></center>
    <br>
    <p align="left">Send a message if you like this free
      program. Feel free to distribute ! </p>
    <p align="left"> Succes, &nbsp;Han &nbsp;K</p>
    <p align="left"> <img src="hanemail.gif"></p>
    <ul>
      <li> <a href="software.htm">Back to the HNSKY
          software page.</a></li>
    </ul>
    <br>
    <div style="text-align: center;">Counter since 2017-11-15:
    </div>
    <p><!-- BEGIN: Powered by Supercounters.com -->
    </p>
    <center>
      <script type="text/javascript" src="//widget.supercounters.com/ssl/hit.js"></script>
      <script type="text/javascript">sc_hit(1455527,0,5);</script><br>
      <noscript><a href="http://www.supercounters.com">free Hit
Counter</a></noscript>
    </center>
    <!-- END: Powered by Supercounters.com -->
    <!-- BEGIN: Powered by Supercounters.com -->
    <center>
      <script type="text/javascript" src="//widget.supercounters.com/ssl/map.js"></script>
      <script type="text/javascript">var sc_map_var = sc_map_var || [];sc_map(1459341,"112288","ff0000",1)</script><br>
      <noscript><a href="http://www.supercounters.com/">Visitor
Map Widget</a></noscript>
    </center>
    <!-- END: Powered by Supercounters.com -->
    <p></p>
  </body></html>